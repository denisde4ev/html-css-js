{"version":3,"file":"view-transitions-polyfill.js","sources":["../src/elements/media-clone.ts","../node_modules/css-tree/lib/tokenizer/types.js","../node_modules/css-tree/lib/tokenizer/char-code-definitions.js","../node_modules/css-tree/lib/tokenizer/utils.js","../node_modules/css-tree/lib/tokenizer/names.js","../node_modules/css-tree/lib/tokenizer/adopt-buffer.js","../node_modules/css-tree/lib/tokenizer/OffsetToLocation.js","../node_modules/css-tree/lib/tokenizer/TokenStream.js","../node_modules/css-tree/lib/tokenizer/index.js","../node_modules/css-tree/lib/utils/List.js","../node_modules/css-tree/lib/utils/create-custom-error.js","../node_modules/css-tree/lib/parser/SyntaxError.js","../node_modules/css-tree/lib/parser/sequence.js","../node_modules/css-tree/lib/parser/create.js","../node_modules/source-map-js/lib/base64.js","../node_modules/source-map-js/lib/base64-vlq.js","../node_modules/source-map-js/lib/util.js","../node_modules/source-map-js/lib/array-set.js","../node_modules/source-map-js/lib/mapping-list.js","../node_modules/source-map-js/lib/source-map-generator.js","../node_modules/css-tree/lib/generator/sourceMap.js","../node_modules/css-tree/lib/generator/token-before.js","../node_modules/css-tree/lib/generator/create.js","../node_modules/css-tree/lib/convertor/create.js","../node_modules/css-tree/lib/walker/create.js","../node_modules/css-tree/lib/definition-syntax/generate.js","../node_modules/css-tree/lib/lexer/error.js","../node_modules/css-tree/lib/utils/names.js","../node_modules/css-tree/lib/lexer/generic-const.js","../node_modules/css-tree/lib/lexer/generic-an-plus-b.js","../node_modules/css-tree/lib/lexer/generic-urange.js","../node_modules/css-tree/lib/lexer/generic.js","../node_modules/css-tree/lib/lexer/units.js","../node_modules/css-tree/lib/definition-syntax/SyntaxError.js","../node_modules/css-tree/lib/definition-syntax/tokenizer.js","../node_modules/css-tree/lib/definition-syntax/parse.js","../node_modules/css-tree/lib/definition-syntax/walk.js","../node_modules/css-tree/lib/lexer/prepare-tokens.js","../node_modules/css-tree/lib/lexer/match-graph.js","../node_modules/css-tree/lib/lexer/match.js","../node_modules/css-tree/lib/lexer/trace.js","../node_modules/css-tree/lib/lexer/search.js","../node_modules/css-tree/lib/lexer/structure.js","../node_modules/css-tree/lib/lexer/Lexer.js","../node_modules/css-tree/lib/syntax/config/mix.js","../node_modules/css-tree/lib/syntax/create.js","../node_modules/css-tree/dist/data.js","../node_modules/css-tree/lib/syntax/node/AnPlusB.js","../node_modules/css-tree/lib/syntax/node/Atrule.js","../node_modules/css-tree/lib/syntax/node/AtrulePrelude.js","../node_modules/css-tree/lib/syntax/node/AttributeSelector.js","../node_modules/css-tree/lib/syntax/node/Block.js","../node_modules/css-tree/lib/syntax/node/Brackets.js","../node_modules/css-tree/lib/syntax/node/CDC.js","../node_modules/css-tree/lib/syntax/node/CDO.js","../node_modules/css-tree/lib/syntax/node/ClassSelector.js","../node_modules/css-tree/lib/syntax/node/Combinator.js","../node_modules/css-tree/lib/syntax/node/Comment.js","../node_modules/css-tree/lib/syntax/node/Condition.js","../node_modules/css-tree/lib/syntax/node/Declaration.js","../node_modules/css-tree/lib/syntax/node/DeclarationList.js","../node_modules/css-tree/lib/syntax/node/Dimension.js","../node_modules/css-tree/lib/syntax/node/Feature.js","../node_modules/css-tree/lib/syntax/node/FeatureFunction.js","../node_modules/css-tree/lib/syntax/node/FeatureRange.js","../node_modules/css-tree/lib/syntax/node/Function.js","../node_modules/css-tree/lib/syntax/node/GeneralEnclosed.js","../node_modules/css-tree/lib/syntax/node/Hash.js","../node_modules/css-tree/lib/syntax/node/Identifier.js","../node_modules/css-tree/lib/syntax/node/IdSelector.js","../node_modules/css-tree/lib/syntax/node/Layer.js","../node_modules/css-tree/lib/syntax/node/LayerList.js","../node_modules/css-tree/lib/syntax/node/MediaQuery.js","../node_modules/css-tree/lib/syntax/node/MediaQueryList.js","../node_modules/css-tree/lib/syntax/node/NestingSelector.js","../node_modules/css-tree/lib/syntax/node/Nth.js","../node_modules/css-tree/lib/syntax/node/Number.js","../node_modules/css-tree/lib/syntax/node/Operator.js","../node_modules/css-tree/lib/syntax/node/Parentheses.js","../node_modules/css-tree/lib/syntax/node/Percentage.js","../node_modules/css-tree/lib/syntax/node/PseudoClassSelector.js","../node_modules/css-tree/lib/syntax/node/PseudoElementSelector.js","../node_modules/css-tree/lib/syntax/node/Ratio.js","../node_modules/css-tree/lib/syntax/node/Raw.js","../node_modules/css-tree/lib/syntax/node/Rule.js","../node_modules/css-tree/lib/syntax/node/Scope.js","../node_modules/css-tree/lib/syntax/node/Selector.js","../node_modules/css-tree/lib/syntax/node/SelectorList.js","../node_modules/css-tree/lib/utils/string.js","../node_modules/css-tree/lib/syntax/node/String.js","../node_modules/css-tree/lib/syntax/node/StyleSheet.js","../node_modules/css-tree/lib/syntax/node/SupportsDeclaration.js","../node_modules/css-tree/lib/syntax/node/TypeSelector.js","../node_modules/css-tree/lib/syntax/node/UnicodeRange.js","../node_modules/css-tree/lib/utils/url.js","../node_modules/css-tree/lib/syntax/node/Url.js","../node_modules/css-tree/lib/syntax/node/Value.js","../node_modules/css-tree/lib/syntax/node/WhiteSpace.js","../node_modules/css-tree/lib/syntax/config/lexer.js","../node_modules/css-tree/lib/syntax/scope/default.js","../node_modules/css-tree/lib/syntax/scope/atrulePrelude.js","../node_modules/css-tree/lib/syntax/scope/selector.js","../node_modules/css-tree/lib/syntax/function/expression.js","../node_modules/css-tree/lib/syntax/function/var.js","../node_modules/css-tree/lib/syntax/scope/value.js","../node_modules/css-tree/lib/syntax/atrule/container.js","../node_modules/css-tree/lib/syntax/atrule/font-face.js","../node_modules/css-tree/lib/syntax/atrule/import.js","../node_modules/css-tree/lib/syntax/atrule/layer.js","../node_modules/css-tree/lib/syntax/atrule/media.js","../node_modules/css-tree/lib/syntax/atrule/nest.js","../node_modules/css-tree/lib/syntax/atrule/page.js","../node_modules/css-tree/lib/syntax/atrule/scope.js","../node_modules/css-tree/lib/syntax/atrule/starting-style.js","../node_modules/css-tree/lib/syntax/atrule/supports.js","../node_modules/css-tree/lib/syntax/atrule/index.js","../node_modules/css-tree/lib/syntax/pseudo/lang.js","../node_modules/css-tree/lib/syntax/pseudo/index.js","../node_modules/css-tree/lib/syntax/config/parser.js","../node_modules/css-tree/lib/syntax/config/walker.js","../node_modules/css-tree/lib/syntax/index.js","../node_modules/css-tree/lib/index.js","../src/style-parsing/style-types.ts","../src/style-parsing/parsing-utils.ts","../src/style-parsing/style-parser.ts","../src/style-parsing/style-sheet-parser.ts","../src/elements/view-transition-image-elements.ts","../src/elements/view-transition-group.ts","../src/capture-element.ts","../src/elements/view-transition-element.ts","../src/view-transition-manager.ts","../src/polyfill-utils.ts","../src/style-parsing/style-attribute-parser.ts","../src/polyfill-functions.ts","../src/view-transitions-api-polyfill.ts"],"sourcesContent":["export class MediaClone extends HTMLElement {\n  clone: HTMLCanvasElement;\n  element: HTMLVideoElement | HTMLCanvasElement | undefined;\n  ctx: CanvasRenderingContext2D;\n  nextAnimationFrame?: number;\n  live = false;\n  constructor() {\n    super();\n    this.style.display = 'block';\n    this.clone = document.createElement('canvas');\n    this.clone.style.width = '100%';\n    this.clone.style.height = '100%';\n    this.appendChild(this.clone);\n    const ctx = this.clone.getContext('2d');\n    if (!ctx) {\n      throw new Error('Canvas context 2D is unsupported');\n    }\n    this.ctx = ctx;\n  }\n  setup(element: HTMLVideoElement | HTMLCanvasElement, live?: boolean) {\n    this.element = element;\n    if (live) {\n      this.live = live;\n    }\n\n    if (this.element instanceof HTMLVideoElement) {\n      this.clone.width = this.element.videoWidth;\n      this.clone.height = this.element.videoHeight;\n    } else if (this.element instanceof HTMLCanvasElement) {\n      this.clone.width = this.element.width;\n      this.clone.height = this.element.height;\n    }\n  }\n  connectedCallback() {\n    if (this.live) {\n      this.drawLive();\n    } else {\n      this.draw();\n    }\n  }\n  disconnectedCallback() {\n    if (this.nextAnimationFrame) cancelAnimationFrame(this.nextAnimationFrame);\n  }\n  drawLive() {\n    // Update the canvas live if the image is not static.\n    // Quit when either <video> or <canvas> is removed from the document.\n    if (!this) return;\n    if (!this.element || !document.documentElement.contains(this.element)) {\n      if (this.nextAnimationFrame)\n        cancelAnimationFrame(this.nextAnimationFrame);\n      return;\n    }\n    this.ctx.drawImage(this.element, 0, 0);\n    this.nextAnimationFrame = requestAnimationFrame(() =>\n      this.drawLive.call(this)\n    );\n  }\n  draw() {\n    if (!this.element) return;\n    return this.ctx.drawImage(this.element, 0, 0);\n  }\n}\ncustomElements.define('view-transition-media', MediaClone);\n","// CSS Syntax Module Level 3\n// https://www.w3.org/TR/css-syntax-3/\nexport const EOF = 0;                 // <EOF-token>\nexport const Ident = 1;               // <ident-token>\nexport const Function = 2;            // <function-token>\nexport const AtKeyword = 3;           // <at-keyword-token>\nexport const Hash = 4;                // <hash-token>\nexport const String = 5;              // <string-token>\nexport const BadString = 6;           // <bad-string-token>\nexport const Url = 7;                 // <url-token>\nexport const BadUrl = 8;              // <bad-url-token>\nexport const Delim = 9;               // <delim-token>\nexport const Number = 10;             // <number-token>\nexport const Percentage = 11;         // <percentage-token>\nexport const Dimension = 12;          // <dimension-token>\nexport const WhiteSpace = 13;         // <whitespace-token>\nexport const CDO = 14;                // <CDO-token>\nexport const CDC = 15;                // <CDC-token>\nexport const Colon = 16;              // <colon-token>     :\nexport const Semicolon = 17;          // <semicolon-token> ;\nexport const Comma = 18;              // <comma-token>     ,\nexport const LeftSquareBracket = 19;  // <[-token>\nexport const RightSquareBracket = 20; // <]-token>\nexport const LeftParenthesis = 21;    // <(-token>\nexport const RightParenthesis = 22;   // <)-token>\nexport const LeftCurlyBracket = 23;   // <{-token>\nexport const RightCurlyBracket = 24;  // <}-token>\nexport const Comment = 25;\n","const EOF = 0;\n\n// https://drafts.csswg.org/css-syntax-3/\n// § 4.2. Definitions\n\n// digit\n// A code point between U+0030 DIGIT ZERO (0) and U+0039 DIGIT NINE (9).\nexport function isDigit(code) {\n    return code >= 0x0030 && code <= 0x0039;\n}\n\n// hex digit\n// A digit, or a code point between U+0041 LATIN CAPITAL LETTER A (A) and U+0046 LATIN CAPITAL LETTER F (F),\n// or a code point between U+0061 LATIN SMALL LETTER A (a) and U+0066 LATIN SMALL LETTER F (f).\nexport function isHexDigit(code) {\n    return (\n        isDigit(code) || // 0 .. 9\n        (code >= 0x0041 && code <= 0x0046) || // A .. F\n        (code >= 0x0061 && code <= 0x0066)    // a .. f\n    );\n}\n\n// uppercase letter\n// A code point between U+0041 LATIN CAPITAL LETTER A (A) and U+005A LATIN CAPITAL LETTER Z (Z).\nexport function isUppercaseLetter(code) {\n    return code >= 0x0041 && code <= 0x005A;\n}\n\n// lowercase letter\n// A code point between U+0061 LATIN SMALL LETTER A (a) and U+007A LATIN SMALL LETTER Z (z).\nexport function isLowercaseLetter(code) {\n    return code >= 0x0061 && code <= 0x007A;\n}\n\n// letter\n// An uppercase letter or a lowercase letter.\nexport function isLetter(code) {\n    return isUppercaseLetter(code) || isLowercaseLetter(code);\n}\n\n// non-ASCII code point\n// A code point with a value equal to or greater than U+0080 <control>.\n//\n// 2024-09-02: The latest spec narrows the range for non-ASCII characters (see https://github.com/csstree/csstree/issues/188).\n// However, all modern browsers support a wider range, and strictly following the latest spec could result\n// in some CSS being parsed incorrectly, even though it works in the browser. Therefore, this function adheres\n// to the previous, broader definition of non-ASCII characters.\nexport function isNonAscii(code) {\n    return code >= 0x0080;\n}\n\n// name-start code point\n// A letter, a non-ASCII code point, or U+005F LOW LINE (_).\nexport function isNameStart(code) {\n    return isLetter(code) || isNonAscii(code) || code === 0x005F;\n}\n\n// name code point\n// A name-start code point, a digit, or U+002D HYPHEN-MINUS (-).\nexport function isName(code) {\n    return isNameStart(code) || isDigit(code) || code === 0x002D;\n}\n\n// non-printable code point\n// A code point between U+0000 NULL and U+0008 BACKSPACE, or U+000B LINE TABULATION,\n// or a code point between U+000E SHIFT OUT and U+001F INFORMATION SEPARATOR ONE, or U+007F DELETE.\nexport function isNonPrintable(code) {\n    return (\n        (code >= 0x0000 && code <= 0x0008) ||\n        (code === 0x000B) ||\n        (code >= 0x000E && code <= 0x001F) ||\n        (code === 0x007F)\n    );\n}\n\n// newline\n// U+000A LINE FEED. Note that U+000D CARRIAGE RETURN and U+000C FORM FEED are not included in this definition,\n// as they are converted to U+000A LINE FEED during preprocessing.\n// TODO: we doesn't do a preprocessing, so check a code point for U+000D CARRIAGE RETURN and U+000C FORM FEED\nexport function isNewline(code) {\n    return code === 0x000A || code === 0x000D || code === 0x000C;\n}\n\n// whitespace\n// A newline, U+0009 CHARACTER TABULATION, or U+0020 SPACE.\nexport function isWhiteSpace(code) {\n    return isNewline(code) || code === 0x0020 || code === 0x0009;\n}\n\n// § 4.3.8. Check if two code points are a valid escape\nexport function isValidEscape(first, second) {\n    // If the first code point is not U+005C REVERSE SOLIDUS (\\), return false.\n    if (first !== 0x005C) {\n        return false;\n    }\n\n    // Otherwise, if the second code point is a newline or EOF, return false.\n    if (isNewline(second) || second === EOF) {\n        return false;\n    }\n\n    // Otherwise, return true.\n    return true;\n}\n\n// § 4.3.9. Check if three code points would start an identifier\nexport function isIdentifierStart(first, second, third) {\n    // Look at the first code point:\n\n    // U+002D HYPHEN-MINUS\n    if (first === 0x002D) {\n        // If the second code point is a name-start code point or a U+002D HYPHEN-MINUS,\n        // or the second and third code points are a valid escape, return true. Otherwise, return false.\n        return (\n            isNameStart(second) ||\n            second === 0x002D ||\n            isValidEscape(second, third)\n        );\n    }\n\n    // name-start code point\n    if (isNameStart(first)) {\n        // Return true.\n        return true;\n    }\n\n    // U+005C REVERSE SOLIDUS (\\)\n    if (first === 0x005C) {\n        // If the first and second code points are a valid escape, return true. Otherwise, return false.\n        return isValidEscape(first, second);\n    }\n\n    // anything else\n    // Return false.\n    return false;\n}\n\n// § 4.3.10. Check if three code points would start a number\nexport function isNumberStart(first, second, third) {\n    // Look at the first code point:\n\n    // U+002B PLUS SIGN (+)\n    // U+002D HYPHEN-MINUS (-)\n    if (first === 0x002B || first === 0x002D) {\n        // If the second code point is a digit, return true.\n        if (isDigit(second)) {\n            return 2;\n        }\n\n        // Otherwise, if the second code point is a U+002E FULL STOP (.)\n        // and the third code point is a digit, return true.\n        // Otherwise, return false.\n        return second === 0x002E && isDigit(third) ? 3 : 0;\n    }\n\n    // U+002E FULL STOP (.)\n    if (first === 0x002E) {\n        // If the second code point is a digit, return true. Otherwise, return false.\n        return isDigit(second) ? 2 : 0;\n    }\n\n    // digit\n    if (isDigit(first)) {\n        // Return true.\n        return 1;\n    }\n\n    // anything else\n    // Return false.\n    return 0;\n}\n\n//\n// Misc\n//\n\n// detect BOM (https://en.wikipedia.org/wiki/Byte_order_mark)\nexport function isBOM(code) {\n    // UTF-16BE\n    if (code === 0xFEFF) {\n        return 1;\n    }\n\n    // UTF-16LE\n    if (code === 0xFFFE) {\n        return 1;\n    }\n\n    return 0;\n}\n\n// Fast code category\n// Only ASCII code points has a special meaning, that's why we define a maps for 0..127 codes only\nconst CATEGORY = new Array(0x80);\nexport const EofCategory = 0x80;\nexport const WhiteSpaceCategory = 0x82;\nexport const DigitCategory = 0x83;\nexport const NameStartCategory = 0x84;\nexport const NonPrintableCategory = 0x85;\n\nfor (let i = 0; i < CATEGORY.length; i++) {\n    CATEGORY[i] =\n        isWhiteSpace(i) && WhiteSpaceCategory ||\n        isDigit(i) && DigitCategory ||\n        isNameStart(i) && NameStartCategory ||\n        isNonPrintable(i) && NonPrintableCategory ||\n        i || EofCategory;\n}\n\nexport function charCodeCategory(code) {\n    return code < 0x80 ? CATEGORY[code] : NameStartCategory;\n}\n","import {\n    isDigit,\n    isHexDigit,\n    isUppercaseLetter,\n    isName,\n    isWhiteSpace,\n    isValidEscape\n} from './char-code-definitions.js';\n\nfunction getCharCode(source, offset) {\n    return offset < source.length ? source.charCodeAt(offset) : 0;\n}\n\nexport function getNewlineLength(source, offset, code) {\n    if (code === 13 /* \\r */ && getCharCode(source, offset + 1) === 10 /* \\n */) {\n        return 2;\n    }\n\n    return 1;\n}\n\nexport function cmpChar(testStr, offset, referenceCode) {\n    let code = testStr.charCodeAt(offset);\n\n    // code.toLowerCase() for A..Z\n    if (isUppercaseLetter(code)) {\n        code = code | 32;\n    }\n\n    return code === referenceCode;\n}\n\nexport function cmpStr(testStr, start, end, referenceStr) {\n    if (end - start !== referenceStr.length) {\n        return false;\n    }\n\n    if (start < 0 || end > testStr.length) {\n        return false;\n    }\n\n    for (let i = start; i < end; i++) {\n        const referenceCode = referenceStr.charCodeAt(i - start);\n        let testCode = testStr.charCodeAt(i);\n\n        // testCode.toLowerCase() for A..Z\n        if (isUppercaseLetter(testCode)) {\n            testCode = testCode | 32;\n        }\n\n        if (testCode !== referenceCode) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\nexport function findWhiteSpaceStart(source, offset) {\n    for (; offset >= 0; offset--) {\n        if (!isWhiteSpace(source.charCodeAt(offset))) {\n            break;\n        }\n    }\n\n    return offset + 1;\n}\n\nexport function findWhiteSpaceEnd(source, offset) {\n    for (; offset < source.length; offset++) {\n        if (!isWhiteSpace(source.charCodeAt(offset))) {\n            break;\n        }\n    }\n\n    return offset;\n}\n\nexport function findDecimalNumberEnd(source, offset) {\n    for (; offset < source.length; offset++) {\n        if (!isDigit(source.charCodeAt(offset))) {\n            break;\n        }\n    }\n\n    return offset;\n}\n\n// § 4.3.7. Consume an escaped code point\nexport function consumeEscaped(source, offset) {\n    // It assumes that the U+005C REVERSE SOLIDUS (\\) has already been consumed and\n    // that the next input code point has already been verified to be part of a valid escape.\n    offset += 2;\n\n    // hex digit\n    if (isHexDigit(getCharCode(source, offset - 1))) {\n        // Consume as many hex digits as possible, but no more than 5.\n        // Note that this means 1-6 hex digits have been consumed in total.\n        for (const maxOffset = Math.min(source.length, offset + 5); offset < maxOffset; offset++) {\n            if (!isHexDigit(getCharCode(source, offset))) {\n                break;\n            }\n        }\n\n        // If the next input code point is whitespace, consume it as well.\n        const code = getCharCode(source, offset);\n        if (isWhiteSpace(code)) {\n            offset += getNewlineLength(source, offset, code);\n        }\n    }\n\n    return offset;\n}\n\n// §4.3.11. Consume a name\n// Note: This algorithm does not do the verification of the first few code points that are necessary\n// to ensure the returned code points would constitute an <ident-token>. If that is the intended use,\n// ensure that the stream starts with an identifier before calling this algorithm.\nexport function consumeName(source, offset) {\n    // Let result initially be an empty string.\n    // Repeatedly consume the next input code point from the stream:\n    for (; offset < source.length; offset++) {\n        const code = source.charCodeAt(offset);\n\n        // name code point\n        if (isName(code)) {\n            // Append the code point to result.\n            continue;\n        }\n\n        // the stream starts with a valid escape\n        if (isValidEscape(code, getCharCode(source, offset + 1))) {\n            // Consume an escaped code point. Append the returned code point to result.\n            offset = consumeEscaped(source, offset) - 1;\n            continue;\n        }\n\n        // anything else\n        // Reconsume the current input code point. Return result.\n        break;\n    }\n\n    return offset;\n}\n\n// §4.3.12. Consume a number\nexport function consumeNumber(source, offset) {\n    let code = source.charCodeAt(offset);\n\n    // 2. If the next input code point is U+002B PLUS SIGN (+) or U+002D HYPHEN-MINUS (-),\n    // consume it and append it to repr.\n    if (code === 0x002B || code === 0x002D) {\n        code = source.charCodeAt(offset += 1);\n    }\n\n    // 3. While the next input code point is a digit, consume it and append it to repr.\n    if (isDigit(code)) {\n        offset = findDecimalNumberEnd(source, offset + 1);\n        code = source.charCodeAt(offset);\n    }\n\n    // 4. If the next 2 input code points are U+002E FULL STOP (.) followed by a digit, then:\n    if (code === 0x002E && isDigit(source.charCodeAt(offset + 1))) {\n        // 4.1 Consume them.\n        // 4.2 Append them to repr.\n        offset += 2;\n\n        // 4.3 Set type to \"number\".\n        // TODO\n\n        // 4.4 While the next input code point is a digit, consume it and append it to repr.\n\n        offset = findDecimalNumberEnd(source, offset);\n    }\n\n    // 5. If the next 2 or 3 input code points are U+0045 LATIN CAPITAL LETTER E (E)\n    // or U+0065 LATIN SMALL LETTER E (e), ... , followed by a digit, then:\n    if (cmpChar(source, offset, 101 /* e */)) {\n        let sign = 0;\n        code = source.charCodeAt(offset + 1);\n\n        // ... optionally followed by U+002D HYPHEN-MINUS (-) or U+002B PLUS SIGN (+) ...\n        if (code === 0x002D || code === 0x002B) {\n            sign = 1;\n            code = source.charCodeAt(offset + 2);\n        }\n\n        // ... followed by a digit\n        if (isDigit(code)) {\n            // 5.1 Consume them.\n            // 5.2 Append them to repr.\n\n            // 5.3 Set type to \"number\".\n            // TODO\n\n            // 5.4 While the next input code point is a digit, consume it and append it to repr.\n            offset = findDecimalNumberEnd(source, offset + 1 + sign + 1);\n        }\n    }\n\n    return offset;\n}\n\n// § 4.3.14. Consume the remnants of a bad url\n// ... its sole use is to consume enough of the input stream to reach a recovery point\n// where normal tokenizing can resume.\nexport function consumeBadUrlRemnants(source, offset) {\n    // Repeatedly consume the next input code point from the stream:\n    for (; offset < source.length; offset++) {\n        const code = source.charCodeAt(offset);\n\n        // U+0029 RIGHT PARENTHESIS ())\n        // EOF\n        if (code === 0x0029) {\n            // Return.\n            offset++;\n            break;\n        }\n\n        if (isValidEscape(code, getCharCode(source, offset + 1))) {\n            // Consume an escaped code point.\n            // Note: This allows an escaped right parenthesis (\"\\)\") to be encountered\n            // without ending the <bad-url-token>. This is otherwise identical to\n            // the \"anything else\" clause.\n            offset = consumeEscaped(source, offset);\n        }\n    }\n\n    return offset;\n}\n\n// § 4.3.7. Consume an escaped code point\n// Note: This algorithm assumes that escaped is valid without leading U+005C REVERSE SOLIDUS (\\)\nexport function decodeEscaped(escaped) {\n    // Single char escaped that's not a hex digit\n    if (escaped.length === 1 && !isHexDigit(escaped.charCodeAt(0))) {\n        return escaped[0];\n    }\n\n    // Interpret the hex digits as a hexadecimal number.\n    let code = parseInt(escaped, 16);\n\n    if (\n        (code === 0) ||                       // If this number is zero,\n        (code >= 0xD800 && code <= 0xDFFF) || // or is for a surrogate,\n        (code > 0x10FFFF)                     // or is greater than the maximum allowed code point\n    ) {\n        // ... return U+FFFD REPLACEMENT CHARACTER\n        code = 0xFFFD;\n    }\n\n    // Otherwise, return the code point with that value.\n    return String.fromCodePoint(code);\n}\n","export default [\n    'EOF-token',\n    'ident-token',\n    'function-token',\n    'at-keyword-token',\n    'hash-token',\n    'string-token',\n    'bad-string-token',\n    'url-token',\n    'bad-url-token',\n    'delim-token',\n    'number-token',\n    'percentage-token',\n    'dimension-token',\n    'whitespace-token',\n    'CDO-token',\n    'CDC-token',\n    'colon-token',\n    'semicolon-token',\n    'comma-token',\n    '[-token',\n    ']-token',\n    '(-token',\n    ')-token',\n    '{-token',\n    '}-token',\n    'comment-token'\n];\n","const MIN_SIZE = 16 * 1024;\n\nexport function adoptBuffer(buffer = null, size) {\n    if (buffer === null || buffer.length < size) {\n        return new Uint32Array(Math.max(size + 1024, MIN_SIZE));\n    }\n\n    return buffer;\n};\n","import { adoptBuffer } from './adopt-buffer.js';\nimport { isBOM } from './char-code-definitions.js';\n\nconst N = 10;\nconst F = 12;\nconst R = 13;\n\nfunction computeLinesAndColumns(host) {\n    const source = host.source;\n    const sourceLength = source.length;\n    const startOffset = source.length > 0 ? isBOM(source.charCodeAt(0)) : 0;\n    const lines = adoptBuffer(host.lines, sourceLength);\n    const columns = adoptBuffer(host.columns, sourceLength);\n    let line = host.startLine;\n    let column = host.startColumn;\n\n    for (let i = startOffset; i < sourceLength; i++) {\n        const code = source.charCodeAt(i);\n\n        lines[i] = line;\n        columns[i] = column++;\n\n        if (code === N || code === R || code === F) {\n            if (code === R && i + 1 < sourceLength && source.charCodeAt(i + 1) === N) {\n                i++;\n                lines[i] = line;\n                columns[i] = column;\n            }\n\n            line++;\n            column = 1;\n        }\n    }\n\n    lines[sourceLength] = line;\n    columns[sourceLength] = column;\n\n    host.lines = lines;\n    host.columns = columns;\n    host.computed = true;\n}\n\nexport class OffsetToLocation {\n    constructor() {\n        this.lines = null;\n        this.columns = null;\n        this.computed = false;\n    }\n    setSource(source, startOffset = 0, startLine = 1, startColumn = 1) {\n        this.source = source;\n        this.startOffset = startOffset;\n        this.startLine = startLine;\n        this.startColumn = startColumn;\n        this.computed = false;\n    }\n    getLocation(offset, filename) {\n        if (!this.computed) {\n            computeLinesAndColumns(this);\n        }\n\n        return {\n            source: filename,\n            offset: this.startOffset + offset,\n            line: this.lines[offset],\n            column: this.columns[offset]\n        };\n    }\n    getLocationRange(start, end, filename) {\n        if (!this.computed) {\n            computeLinesAndColumns(this);\n        }\n\n        return {\n            source: filename,\n            start: {\n                offset: this.startOffset + start,\n                line: this.lines[start],\n                column: this.columns[start]\n            },\n            end: {\n                offset: this.startOffset + end,\n                line: this.lines[end],\n                column: this.columns[end]\n            }\n        };\n    }\n};\n","import { adoptBuffer } from './adopt-buffer.js';\nimport { cmpStr } from './utils.js';\nimport tokenNames from './names.js';\nimport {\n    WhiteSpace,\n    Comment,\n    Delim,\n    EOF,\n    Function as FunctionToken,\n    LeftParenthesis,\n    RightParenthesis,\n    LeftSquareBracket,\n    RightSquareBracket,\n    LeftCurlyBracket,\n    RightCurlyBracket\n} from './types.js';\n\nconst OFFSET_MASK = 0x00FFFFFF;\nconst TYPE_SHIFT = 24;\nconst balancePair = new Map([\n    [FunctionToken, RightParenthesis],\n    [LeftParenthesis, RightParenthesis],\n    [LeftSquareBracket, RightSquareBracket],\n    [LeftCurlyBracket, RightCurlyBracket]\n]);\n\nexport class TokenStream {\n    constructor(source, tokenize) {\n        this.setSource(source, tokenize);\n    }\n    reset() {\n        this.eof = false;\n        this.tokenIndex = -1;\n        this.tokenType = 0;\n        this.tokenStart = this.firstCharOffset;\n        this.tokenEnd = this.firstCharOffset;\n    }\n    setSource(source = '', tokenize = () => {}) {\n        source = String(source || '');\n\n        const sourceLength = source.length;\n        const offsetAndType = adoptBuffer(this.offsetAndType, source.length + 1); // +1 because of eof-token\n        const balance = adoptBuffer(this.balance, source.length + 1);\n        let tokenCount = 0;\n        let balanceCloseType = 0;\n        let balanceStart = 0;\n        let firstCharOffset = -1;\n\n        // capture buffers\n        this.offsetAndType = null;\n        this.balance = null;\n\n        tokenize(source, (type, start, end) => {\n            switch (type) {\n                default:\n                    balance[tokenCount] = sourceLength;\n                    break;\n\n                case balanceCloseType: {\n                    let balancePrev = balanceStart & OFFSET_MASK;\n                    balanceStart = balance[balancePrev];\n                    balanceCloseType = balanceStart >> TYPE_SHIFT;\n                    balance[tokenCount] = balancePrev;\n                    balance[balancePrev++] = tokenCount;\n                    for (; balancePrev < tokenCount; balancePrev++) {\n                        if (balance[balancePrev] === sourceLength) {\n                            balance[balancePrev] = tokenCount;\n                        }\n                    }\n                    break;\n                }\n\n                case LeftParenthesis:\n                case FunctionToken:\n                case LeftSquareBracket:\n                case LeftCurlyBracket:\n                    balance[tokenCount] = balanceStart;\n                    balanceCloseType = balancePair.get(type);\n                    balanceStart = (balanceCloseType << TYPE_SHIFT) | tokenCount;\n                    break;\n            }\n\n            offsetAndType[tokenCount++] = (type << TYPE_SHIFT) | end;\n            if (firstCharOffset === -1) {\n                firstCharOffset = start;\n            }\n        });\n\n        // finalize buffers\n        offsetAndType[tokenCount] = (EOF << TYPE_SHIFT) | sourceLength; // <EOF-token>\n        balance[tokenCount] = sourceLength;\n        balance[sourceLength] = sourceLength; // prevents false positive balance match with any token\n        while (balanceStart !== 0) {\n            const balancePrev = balanceStart & OFFSET_MASK;\n            balanceStart = balance[balancePrev];\n            balance[balancePrev] = sourceLength;\n        }\n\n        this.source = source;\n        this.firstCharOffset = firstCharOffset === -1 ? 0 : firstCharOffset;\n        this.tokenCount = tokenCount;\n        this.offsetAndType = offsetAndType;\n        this.balance = balance;\n\n        this.reset();\n        this.next();\n    }\n\n    lookupType(offset) {\n        offset += this.tokenIndex;\n\n        if (offset < this.tokenCount) {\n            return this.offsetAndType[offset] >> TYPE_SHIFT;\n        }\n\n        return EOF;\n    }\n    lookupTypeNonSC(idx) {\n        for (let offset = this.tokenIndex; offset < this.tokenCount; offset++) {\n            const tokenType = this.offsetAndType[offset] >> TYPE_SHIFT;\n\n            if (tokenType !== WhiteSpace && tokenType !== Comment) {\n                if (idx-- === 0) {\n                    return tokenType;\n                }\n            }\n        }\n\n        return EOF;\n    }\n    lookupOffset(offset) {\n        offset += this.tokenIndex;\n\n        if (offset < this.tokenCount) {\n            return this.offsetAndType[offset - 1] & OFFSET_MASK;\n        }\n\n        return this.source.length;\n    }\n    lookupOffsetNonSC(idx) {\n        for (let offset = this.tokenIndex; offset < this.tokenCount; offset++) {\n            const tokenType = this.offsetAndType[offset] >> TYPE_SHIFT;\n\n            if (tokenType !== WhiteSpace && tokenType !== Comment) {\n                if (idx-- === 0) {\n                    return offset - this.tokenIndex;\n                }\n            }\n        }\n\n        return EOF;\n    }\n    lookupValue(offset, referenceStr) {\n        offset += this.tokenIndex;\n\n        if (offset < this.tokenCount) {\n            return cmpStr(\n                this.source,\n                this.offsetAndType[offset - 1] & OFFSET_MASK,\n                this.offsetAndType[offset] & OFFSET_MASK,\n                referenceStr\n            );\n        }\n\n        return false;\n    }\n    getTokenStart(tokenIndex) {\n        if (tokenIndex === this.tokenIndex) {\n            return this.tokenStart;\n        }\n\n        if (tokenIndex > 0) {\n            return tokenIndex < this.tokenCount\n                ? this.offsetAndType[tokenIndex - 1] & OFFSET_MASK\n                : this.offsetAndType[this.tokenCount] & OFFSET_MASK;\n        }\n\n        return this.firstCharOffset;\n    }\n    substrToCursor(start) {\n        return this.source.substring(start, this.tokenStart);\n    }\n\n    isBalanceEdge(pos) {\n        return this.balance[this.tokenIndex] < pos;\n    }\n    isDelim(code, offset) {\n        if (offset) {\n            return (\n                this.lookupType(offset) === Delim &&\n                this.source.charCodeAt(this.lookupOffset(offset)) === code\n            );\n        }\n\n        return (\n            this.tokenType === Delim &&\n            this.source.charCodeAt(this.tokenStart) === code\n        );\n    }\n\n    skip(tokenCount) {\n        let next = this.tokenIndex + tokenCount;\n\n        if (next < this.tokenCount) {\n            this.tokenIndex = next;\n            this.tokenStart = this.offsetAndType[next - 1] & OFFSET_MASK;\n            next = this.offsetAndType[next];\n            this.tokenType = next >> TYPE_SHIFT;\n            this.tokenEnd = next & OFFSET_MASK;\n        } else {\n            this.tokenIndex = this.tokenCount;\n            this.next();\n        }\n    }\n    next() {\n        let next = this.tokenIndex + 1;\n\n        if (next < this.tokenCount) {\n            this.tokenIndex = next;\n            this.tokenStart = this.tokenEnd;\n            next = this.offsetAndType[next];\n            this.tokenType = next >> TYPE_SHIFT;\n            this.tokenEnd = next & OFFSET_MASK;\n        } else {\n            this.eof = true;\n            this.tokenIndex = this.tokenCount;\n            this.tokenType = EOF;\n            this.tokenStart = this.tokenEnd = this.source.length;\n        }\n    }\n    skipSC() {\n        while (this.tokenType === WhiteSpace || this.tokenType === Comment) {\n            this.next();\n        }\n    }\n    skipUntilBalanced(startToken, stopConsume) {\n        let cursor = startToken;\n        let balanceEnd;\n        let offset;\n\n        loop:\n        for (; cursor < this.tokenCount; cursor++) {\n            balanceEnd = this.balance[cursor];\n\n            // stop scanning on balance edge that points to offset before start token\n            if (balanceEnd < startToken) {\n                break loop;\n            }\n\n            offset = cursor > 0 ? this.offsetAndType[cursor - 1] & OFFSET_MASK : this.firstCharOffset;\n\n            // check stop condition\n            switch (stopConsume(this.source.charCodeAt(offset))) {\n                case 1: // just stop\n                    break loop;\n\n                case 2: // stop & included\n                    cursor++;\n                    break loop;\n\n                default:\n                    // fast forward to the end of balanced block\n                    if (this.balance[balanceEnd] === cursor) {\n                        cursor = balanceEnd;\n                    }\n            }\n        }\n\n        this.skip(cursor - this.tokenIndex);\n    }\n\n    forEachToken(fn) {\n        for (let i = 0, offset = this.firstCharOffset; i < this.tokenCount; i++) {\n            const start = offset;\n            const item = this.offsetAndType[i];\n            const end = item & OFFSET_MASK;\n            const type = item >> TYPE_SHIFT;\n\n            offset = end;\n\n            fn(type, start, end, i);\n        }\n    }\n    dump() {\n        const tokens = new Array(this.tokenCount);\n\n        this.forEachToken((type, start, end, index) => {\n            tokens[index] = {\n                idx: index,\n                type: tokenNames[type],\n                chunk: this.source.substring(start, end),\n                balance: this.balance[index]\n            };\n        });\n\n        return tokens;\n    }\n};\n","import * as TYPE from './types.js';\nimport {\n    isNewline,\n    isName,\n    isValidEscape,\n    isNumberStart,\n    isIdentifierStart,\n    isBOM,\n    charCodeCategory,\n    WhiteSpaceCategory,\n    DigitCategory,\n    NameStartCategory,\n    NonPrintableCategory\n} from './char-code-definitions.js';\nimport {\n    cmpStr,\n    getNewlineLength,\n    findWhiteSpaceEnd,\n    consumeEscaped,\n    consumeName,\n    consumeNumber,\n    consumeBadUrlRemnants\n} from './utils.js';\n\nexport function tokenize(source, onToken) {\n    function getCharCode(offset) {\n        return offset < sourceLength ? source.charCodeAt(offset) : 0;\n    }\n\n    // § 4.3.3. Consume a numeric token\n    function consumeNumericToken() {\n        // Consume a number and let number be the result.\n        offset = consumeNumber(source, offset);\n\n        // If the next 3 input code points would start an identifier, then:\n        if (isIdentifierStart(getCharCode(offset), getCharCode(offset + 1), getCharCode(offset + 2))) {\n            // Create a <dimension-token> with the same value and type flag as number, and a unit set initially to the empty string.\n            // Consume a name. Set the <dimension-token>’s unit to the returned value.\n            // Return the <dimension-token>.\n            type = TYPE.Dimension;\n            offset = consumeName(source, offset);\n            return;\n        }\n\n        // Otherwise, if the next input code point is U+0025 PERCENTAGE SIGN (%), consume it.\n        if (getCharCode(offset) === 0x0025) {\n            // Create a <percentage-token> with the same value as number, and return it.\n            type = TYPE.Percentage;\n            offset++;\n            return;\n        }\n\n        // Otherwise, create a <number-token> with the same value and type flag as number, and return it.\n        type = TYPE.Number;\n    }\n\n    // § 4.3.4. Consume an ident-like token\n    function consumeIdentLikeToken() {\n        const nameStartOffset = offset;\n\n        // Consume a name, and let string be the result.\n        offset = consumeName(source, offset);\n\n        // If string’s value is an ASCII case-insensitive match for \"url\",\n        // and the next input code point is U+0028 LEFT PARENTHESIS ((), consume it.\n        if (cmpStr(source, nameStartOffset, offset, 'url') && getCharCode(offset) === 0x0028) {\n            // While the next two input code points are whitespace, consume the next input code point.\n            offset = findWhiteSpaceEnd(source, offset + 1);\n\n            // If the next one or two input code points are U+0022 QUOTATION MARK (\"), U+0027 APOSTROPHE ('),\n            // or whitespace followed by U+0022 QUOTATION MARK (\") or U+0027 APOSTROPHE ('),\n            // then create a <function-token> with its value set to string and return it.\n            if (getCharCode(offset) === 0x0022 ||\n                getCharCode(offset) === 0x0027) {\n                type = TYPE.Function;\n                offset = nameStartOffset + 4;\n                return;\n            }\n\n            // Otherwise, consume a url token, and return it.\n            consumeUrlToken();\n            return;\n        }\n\n        // Otherwise, if the next input code point is U+0028 LEFT PARENTHESIS ((), consume it.\n        // Create a <function-token> with its value set to string and return it.\n        if (getCharCode(offset) === 0x0028) {\n            type = TYPE.Function;\n            offset++;\n            return;\n        }\n\n        // Otherwise, create an <ident-token> with its value set to string and return it.\n        type = TYPE.Ident;\n    }\n\n    // § 4.3.5. Consume a string token\n    function consumeStringToken(endingCodePoint) {\n        // This algorithm may be called with an ending code point, which denotes the code point\n        // that ends the string. If an ending code point is not specified,\n        // the current input code point is used.\n        if (!endingCodePoint) {\n            endingCodePoint = getCharCode(offset++);\n        }\n\n        // Initially create a <string-token> with its value set to the empty string.\n        type = TYPE.String;\n\n        // Repeatedly consume the next input code point from the stream:\n        for (; offset < source.length; offset++) {\n            const code = source.charCodeAt(offset);\n\n            switch (charCodeCategory(code)) {\n                // ending code point\n                case endingCodePoint:\n                    // Return the <string-token>.\n                    offset++;\n                    return;\n\n                    // EOF\n                    // case EofCategory:\n                    // This is a parse error. Return the <string-token>.\n                    // return;\n\n                // newline\n                case WhiteSpaceCategory:\n                    if (isNewline(code)) {\n                        // This is a parse error. Reconsume the current input code point,\n                        // create a <bad-string-token>, and return it.\n                        offset += getNewlineLength(source, offset, code);\n                        type = TYPE.BadString;\n                        return;\n                    }\n                    break;\n\n                // U+005C REVERSE SOLIDUS (\\)\n                case 0x005C:\n                    // If the next input code point is EOF, do nothing.\n                    if (offset === source.length - 1) {\n                        break;\n                    }\n\n                    const nextCode = getCharCode(offset + 1);\n\n                    // Otherwise, if the next input code point is a newline, consume it.\n                    if (isNewline(nextCode)) {\n                        offset += getNewlineLength(source, offset + 1, nextCode);\n                    } else if (isValidEscape(code, nextCode)) {\n                        // Otherwise, (the stream starts with a valid escape) consume\n                        // an escaped code point and append the returned code point to\n                        // the <string-token>’s value.\n                        offset = consumeEscaped(source, offset) - 1;\n                    }\n                    break;\n\n                // anything else\n                // Append the current input code point to the <string-token>’s value.\n            }\n        }\n    }\n\n    // § 4.3.6. Consume a url token\n    // Note: This algorithm assumes that the initial \"url(\" has already been consumed.\n    // This algorithm also assumes that it’s being called to consume an \"unquoted\" value, like url(foo).\n    // A quoted value, like url(\"foo\"), is parsed as a <function-token>. Consume an ident-like token\n    // automatically handles this distinction; this algorithm shouldn’t be called directly otherwise.\n    function consumeUrlToken() {\n        // Initially create a <url-token> with its value set to the empty string.\n        type = TYPE.Url;\n\n        // Consume as much whitespace as possible.\n        offset = findWhiteSpaceEnd(source, offset);\n\n        // Repeatedly consume the next input code point from the stream:\n        for (; offset < source.length; offset++) {\n            const code = source.charCodeAt(offset);\n\n            switch (charCodeCategory(code)) {\n                // U+0029 RIGHT PARENTHESIS ())\n                case 0x0029:\n                    // Return the <url-token>.\n                    offset++;\n                    return;\n\n                    // EOF\n                    // case EofCategory:\n                    // This is a parse error. Return the <url-token>.\n                    // return;\n\n                // whitespace\n                case WhiteSpaceCategory:\n                    // Consume as much whitespace as possible.\n                    offset = findWhiteSpaceEnd(source, offset);\n\n                    // If the next input code point is U+0029 RIGHT PARENTHESIS ()) or EOF,\n                    // consume it and return the <url-token>\n                    // (if EOF was encountered, this is a parse error);\n                    if (getCharCode(offset) === 0x0029 || offset >= source.length) {\n                        if (offset < source.length) {\n                            offset++;\n                        }\n                        return;\n                    }\n\n                    // otherwise, consume the remnants of a bad url, create a <bad-url-token>,\n                    // and return it.\n                    offset = consumeBadUrlRemnants(source, offset);\n                    type = TYPE.BadUrl;\n                    return;\n\n                // U+0022 QUOTATION MARK (\")\n                // U+0027 APOSTROPHE (')\n                // U+0028 LEFT PARENTHESIS (()\n                // non-printable code point\n                case 0x0022:\n                case 0x0027:\n                case 0x0028:\n                case NonPrintableCategory:\n                    // This is a parse error. Consume the remnants of a bad url,\n                    // create a <bad-url-token>, and return it.\n                    offset = consumeBadUrlRemnants(source, offset);\n                    type = TYPE.BadUrl;\n                    return;\n\n                // U+005C REVERSE SOLIDUS (\\)\n                case 0x005C:\n                    // If the stream starts with a valid escape, consume an escaped code point and\n                    // append the returned code point to the <url-token>’s value.\n                    if (isValidEscape(code, getCharCode(offset + 1))) {\n                        offset = consumeEscaped(source, offset) - 1;\n                        break;\n                    }\n\n                    // Otherwise, this is a parse error. Consume the remnants of a bad url,\n                    // create a <bad-url-token>, and return it.\n                    offset = consumeBadUrlRemnants(source, offset);\n                    type = TYPE.BadUrl;\n                    return;\n\n                // anything else\n                // Append the current input code point to the <url-token>’s value.\n            }\n        }\n    }\n\n    // ensure source is a string\n    source = String(source || '');\n\n    const sourceLength = source.length;\n    let start = isBOM(getCharCode(0));\n    let offset = start;\n    let type;\n\n    // https://drafts.csswg.org/css-syntax-3/#consume-token\n    // § 4.3.1. Consume a token\n    while (offset < sourceLength) {\n        const code = source.charCodeAt(offset);\n\n        switch (charCodeCategory(code)) {\n            // whitespace\n            case WhiteSpaceCategory:\n                // Consume as much whitespace as possible. Return a <whitespace-token>.\n                type = TYPE.WhiteSpace;\n                offset = findWhiteSpaceEnd(source, offset + 1);\n                break;\n\n            // U+0022 QUOTATION MARK (\")\n            case 0x0022:\n                // Consume a string token and return it.\n                consumeStringToken();\n                break;\n\n            // U+0023 NUMBER SIGN (#)\n            case 0x0023:\n                // If the next input code point is a name code point or the next two input code points are a valid escape, then:\n                if (isName(getCharCode(offset + 1)) || isValidEscape(getCharCode(offset + 1), getCharCode(offset + 2))) {\n                    // Create a <hash-token>.\n                    type = TYPE.Hash;\n\n                    // If the next 3 input code points would start an identifier, set the <hash-token>’s type flag to \"id\".\n                    // if (isIdentifierStart(getCharCode(offset + 1), getCharCode(offset + 2), getCharCode(offset + 3))) {\n                    //     // TODO: set id flag\n                    // }\n\n                    // Consume a name, and set the <hash-token>’s value to the returned string.\n                    offset = consumeName(source, offset + 1);\n\n                    // Return the <hash-token>.\n                } else {\n                    // Otherwise, return a <delim-token> with its value set to the current input code point.\n                    type = TYPE.Delim;\n                    offset++;\n                }\n\n                break;\n\n            // U+0027 APOSTROPHE (')\n            case 0x0027:\n                // Consume a string token and return it.\n                consumeStringToken();\n                break;\n\n            // U+0028 LEFT PARENTHESIS (()\n            case 0x0028:\n                // Return a <(-token>.\n                type = TYPE.LeftParenthesis;\n                offset++;\n                break;\n\n            // U+0029 RIGHT PARENTHESIS ())\n            case 0x0029:\n                // Return a <)-token>.\n                type = TYPE.RightParenthesis;\n                offset++;\n                break;\n\n            // U+002B PLUS SIGN (+)\n            case 0x002B:\n                // If the input stream starts with a number, ...\n                if (isNumberStart(code, getCharCode(offset + 1), getCharCode(offset + 2))) {\n                    // ... reconsume the current input code point, consume a numeric token, and return it.\n                    consumeNumericToken();\n                } else {\n                    // Otherwise, return a <delim-token> with its value set to the current input code point.\n                    type = TYPE.Delim;\n                    offset++;\n                }\n                break;\n\n            // U+002C COMMA (,)\n            case 0x002C:\n                // Return a <comma-token>.\n                type = TYPE.Comma;\n                offset++;\n                break;\n\n            // U+002D HYPHEN-MINUS (-)\n            case 0x002D:\n                // If the input stream starts with a number, reconsume the current input code point, consume a numeric token, and return it.\n                if (isNumberStart(code, getCharCode(offset + 1), getCharCode(offset + 2))) {\n                    consumeNumericToken();\n                } else {\n                    // Otherwise, if the next 2 input code points are U+002D HYPHEN-MINUS U+003E GREATER-THAN SIGN (->), consume them and return a <CDC-token>.\n                    if (getCharCode(offset + 1) === 0x002D &&\n                        getCharCode(offset + 2) === 0x003E) {\n                        type = TYPE.CDC;\n                        offset = offset + 3;\n                    } else {\n                        // Otherwise, if the input stream starts with an identifier, ...\n                        if (isIdentifierStart(code, getCharCode(offset + 1), getCharCode(offset + 2))) {\n                            // ... reconsume the current input code point, consume an ident-like token, and return it.\n                            consumeIdentLikeToken();\n                        } else {\n                            // Otherwise, return a <delim-token> with its value set to the current input code point.\n                            type = TYPE.Delim;\n                            offset++;\n                        }\n                    }\n                }\n                break;\n\n            // U+002E FULL STOP (.)\n            case 0x002E:\n                // If the input stream starts with a number, ...\n                if (isNumberStart(code, getCharCode(offset + 1), getCharCode(offset + 2))) {\n                    // ... reconsume the current input code point, consume a numeric token, and return it.\n                    consumeNumericToken();\n                } else {\n                    // Otherwise, return a <delim-token> with its value set to the current input code point.\n                    type = TYPE.Delim;\n                    offset++;\n                }\n\n                break;\n\n            // U+002F SOLIDUS (/)\n            case 0x002F:\n                // If the next two input code point are U+002F SOLIDUS (/) followed by a U+002A ASTERISK (*),\n                if (getCharCode(offset + 1) === 0x002A) {\n                    // ... consume them and all following code points up to and including the first U+002A ASTERISK (*)\n                    // followed by a U+002F SOLIDUS (/), or up to an EOF code point.\n                    type = TYPE.Comment;\n                    offset = source.indexOf('*/', offset + 2);\n                    offset = offset === -1 ? source.length : offset + 2;\n                } else {\n                    type = TYPE.Delim;\n                    offset++;\n                }\n                break;\n\n            // U+003A COLON (:)\n            case 0x003A:\n                // Return a <colon-token>.\n                type = TYPE.Colon;\n                offset++;\n                break;\n\n            // U+003B SEMICOLON (;)\n            case 0x003B:\n                // Return a <semicolon-token>.\n                type = TYPE.Semicolon;\n                offset++;\n                break;\n\n            // U+003C LESS-THAN SIGN (<)\n            case 0x003C:\n                // If the next 3 input code points are U+0021 EXCLAMATION MARK U+002D HYPHEN-MINUS U+002D HYPHEN-MINUS (!--), ...\n                if (getCharCode(offset + 1) === 0x0021 &&\n                    getCharCode(offset + 2) === 0x002D &&\n                    getCharCode(offset + 3) === 0x002D) {\n                    // ... consume them and return a <CDO-token>.\n                    type = TYPE.CDO;\n                    offset = offset + 4;\n                } else {\n                    // Otherwise, return a <delim-token> with its value set to the current input code point.\n                    type = TYPE.Delim;\n                    offset++;\n                }\n\n                break;\n\n            // U+0040 COMMERCIAL AT (@)\n            case 0x0040:\n                // If the next 3 input code points would start an identifier, ...\n                if (isIdentifierStart(getCharCode(offset + 1), getCharCode(offset + 2), getCharCode(offset + 3))) {\n                    // ... consume a name, create an <at-keyword-token> with its value set to the returned value, and return it.\n                    type = TYPE.AtKeyword;\n                    offset = consumeName(source, offset + 1);\n                } else {\n                    // Otherwise, return a <delim-token> with its value set to the current input code point.\n                    type = TYPE.Delim;\n                    offset++;\n                }\n\n                break;\n\n            // U+005B LEFT SQUARE BRACKET ([)\n            case 0x005B:\n                // Return a <[-token>.\n                type = TYPE.LeftSquareBracket;\n                offset++;\n                break;\n\n            // U+005C REVERSE SOLIDUS (\\)\n            case 0x005C:\n                // If the input stream starts with a valid escape, ...\n                if (isValidEscape(code, getCharCode(offset + 1))) {\n                    // ... reconsume the current input code point, consume an ident-like token, and return it.\n                    consumeIdentLikeToken();\n                } else {\n                    // Otherwise, this is a parse error. Return a <delim-token> with its value set to the current input code point.\n                    type = TYPE.Delim;\n                    offset++;\n                }\n                break;\n\n            // U+005D RIGHT SQUARE BRACKET (])\n            case 0x005D:\n                // Return a <]-token>.\n                type = TYPE.RightSquareBracket;\n                offset++;\n                break;\n\n            // U+007B LEFT CURLY BRACKET ({)\n            case 0x007B:\n                // Return a <{-token>.\n                type = TYPE.LeftCurlyBracket;\n                offset++;\n                break;\n\n            // U+007D RIGHT CURLY BRACKET (})\n            case 0x007D:\n                // Return a <}-token>.\n                type = TYPE.RightCurlyBracket;\n                offset++;\n                break;\n\n            // digit\n            case DigitCategory:\n                // Reconsume the current input code point, consume a numeric token, and return it.\n                consumeNumericToken();\n                break;\n\n            // name-start code point\n            case NameStartCategory:\n                // Reconsume the current input code point, consume an ident-like token, and return it.\n                consumeIdentLikeToken();\n                break;\n\n                // EOF\n                // case EofCategory:\n                // Return an <EOF-token>.\n                // break;\n\n            // anything else\n            default:\n                // Return a <delim-token> with its value set to the current input code point.\n                type = TYPE.Delim;\n                offset++;\n        }\n\n        // put token to stream\n        onToken(type, start, start = offset);\n    }\n}\n\nexport * from './types.js';\nexport * as tokenTypes from './types.js';\nexport { default as tokenNames } from './names.js';\nexport * from './char-code-definitions.js';\nexport * from './utils.js';\nexport * from './OffsetToLocation.js';\nexport * from './TokenStream.js';\n","//\n//                              list\n//                            ┌──────┐\n//             ┌──────────────┼─head │\n//             │              │ tail─┼──────────────┐\n//             │              └──────┘              │\n//             ▼                                    ▼\n//            item        item        item        item\n//          ┌──────┐    ┌──────┐    ┌──────┐    ┌──────┐\n//  null ◀──┼─prev │◀───┼─prev │◀───┼─prev │◀───┼─prev │\n//          │ next─┼───▶│ next─┼───▶│ next─┼───▶│ next─┼──▶ null\n//          ├──────┤    ├──────┤    ├──────┤    ├──────┤\n//          │ data │    │ data │    │ data │    │ data │\n//          └──────┘    └──────┘    └──────┘    └──────┘\n//\n\nlet releasedCursors = null;\n\nexport class List {\n    static createItem(data) {\n        return {\n            prev: null,\n            next: null,\n            data\n        };\n    }\n\n    constructor() {\n        this.head = null;\n        this.tail = null;\n        this.cursor = null;\n    }\n    createItem(data) {\n        return List.createItem(data);\n    }\n\n    // cursor helpers\n    allocateCursor(prev, next) {\n        let cursor;\n\n        if (releasedCursors !== null) {\n            cursor = releasedCursors;\n            releasedCursors = releasedCursors.cursor;\n            cursor.prev = prev;\n            cursor.next = next;\n            cursor.cursor = this.cursor;\n        } else {\n            cursor = {\n                prev,\n                next,\n                cursor: this.cursor\n            };\n        }\n\n        this.cursor = cursor;\n\n        return cursor;\n    }\n    releaseCursor() {\n        const { cursor } = this;\n\n        this.cursor = cursor.cursor;\n        cursor.prev = null;\n        cursor.next = null;\n        cursor.cursor = releasedCursors;\n        releasedCursors = cursor;\n    }\n    updateCursors(prevOld, prevNew, nextOld, nextNew) {\n        let { cursor } = this;\n\n        while (cursor !== null) {\n            if (cursor.prev === prevOld) {\n                cursor.prev = prevNew;\n            }\n\n            if (cursor.next === nextOld) {\n                cursor.next = nextNew;\n            }\n\n            cursor = cursor.cursor;\n        }\n    }\n    *[Symbol.iterator]() {\n        for (let cursor = this.head; cursor !== null; cursor = cursor.next) {\n            yield cursor.data;\n        }\n    }\n\n    // getters\n    get size() {\n        let size = 0;\n\n        for (let cursor = this.head; cursor !== null; cursor = cursor.next) {\n            size++;\n        }\n\n        return size;\n    }\n    get isEmpty() {\n        return this.head === null;\n    }\n    get first() {\n        return this.head && this.head.data;\n    }\n    get last() {\n        return this.tail && this.tail.data;\n    }\n\n    // convertors\n    fromArray(array) {\n        let cursor = null;\n        this.head = null;\n\n        for (let data of array) {\n            const item = List.createItem(data);\n\n            if (cursor !== null) {\n                cursor.next = item;\n            } else {\n                this.head = item;\n            }\n\n            item.prev = cursor;\n            cursor = item;\n        }\n\n        this.tail = cursor;\n        return this;\n    }\n    toArray() {\n        return [...this];\n    }\n    toJSON() {\n        return [...this];\n    }\n\n    // array-like methods\n    forEach(fn, thisArg = this) {\n        // push cursor\n        const cursor = this.allocateCursor(null, this.head);\n\n        while (cursor.next !== null) {\n            const item = cursor.next;\n            cursor.next = item.next;\n            fn.call(thisArg, item.data, item, this);\n        }\n\n        // pop cursor\n        this.releaseCursor();\n    }\n    forEachRight(fn, thisArg = this) {\n        // push cursor\n        const cursor = this.allocateCursor(this.tail, null);\n\n        while (cursor.prev !== null) {\n            const item = cursor.prev;\n            cursor.prev = item.prev;\n            fn.call(thisArg, item.data, item, this);\n        }\n\n        // pop cursor\n        this.releaseCursor();\n    }\n    reduce(fn, initialValue, thisArg = this) {\n        // push cursor\n        let cursor = this.allocateCursor(null, this.head);\n        let acc = initialValue;\n        let item;\n\n        while (cursor.next !== null) {\n            item = cursor.next;\n            cursor.next = item.next;\n\n            acc = fn.call(thisArg, acc, item.data, item, this);\n        }\n\n        // pop cursor\n        this.releaseCursor();\n\n        return acc;\n    }\n    reduceRight(fn, initialValue, thisArg = this) {\n        // push cursor\n        let cursor = this.allocateCursor(this.tail, null);\n        let acc = initialValue;\n        let item;\n\n        while (cursor.prev !== null) {\n            item = cursor.prev;\n            cursor.prev = item.prev;\n\n            acc = fn.call(thisArg, acc, item.data, item, this);\n        }\n\n        // pop cursor\n        this.releaseCursor();\n\n        return acc;\n    }\n    some(fn, thisArg = this) {\n        for (let cursor = this.head; cursor !== null; cursor = cursor.next) {\n            if (fn.call(thisArg, cursor.data, cursor, this)) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n    map(fn, thisArg = this) {\n        const result = new List();\n\n        for (let cursor = this.head; cursor !== null; cursor = cursor.next) {\n            result.appendData(fn.call(thisArg, cursor.data, cursor, this));\n        }\n\n        return result;\n    }\n    filter(fn, thisArg = this) {\n        const result = new List();\n\n        for (let cursor = this.head; cursor !== null; cursor = cursor.next) {\n            if (fn.call(thisArg, cursor.data, cursor, this)) {\n                result.appendData(cursor.data);\n            }\n        }\n\n        return result;\n    }\n\n    nextUntil(start, fn, thisArg = this) {\n        if (start === null) {\n            return;\n        }\n\n        // push cursor\n        const cursor = this.allocateCursor(null, start);\n\n        while (cursor.next !== null) {\n            const item = cursor.next;\n            cursor.next = item.next;\n            if (fn.call(thisArg, item.data, item, this)) {\n                break;\n            }\n        }\n\n        // pop cursor\n        this.releaseCursor();\n    }\n    prevUntil(start, fn, thisArg = this) {\n        if (start === null) {\n            return;\n        }\n\n        // push cursor\n        const cursor = this.allocateCursor(start, null);\n\n        while (cursor.prev !== null) {\n            const item = cursor.prev;\n            cursor.prev = item.prev;\n            if (fn.call(thisArg, item.data, item, this)) {\n                break;\n            }\n        }\n\n        // pop cursor\n        this.releaseCursor();\n    }\n\n    // mutation\n    clear() {\n        this.head = null;\n        this.tail = null;\n    }\n    copy() {\n        const result = new List();\n\n        for (let data of this) {\n            result.appendData(data);\n        }\n\n        return result;\n    }\n    prepend(item) {\n        //      head\n        //    ^\n        // item\n        this.updateCursors(null, item, this.head, item);\n\n        // insert to the beginning of the list\n        if (this.head !== null) {\n            // new item <- first item\n            this.head.prev = item;\n            // new item -> first item\n            item.next = this.head;\n        } else {\n            // if list has no head, then it also has no tail\n            // in this case tail points to the new item\n            this.tail = item;\n        }\n\n        // head always points to new item\n        this.head = item;\n        return this;\n    }\n    prependData(data) {\n        return this.prepend(List.createItem(data));\n    }\n    append(item) {\n        return this.insert(item);\n    }\n    appendData(data) {\n        return this.insert(List.createItem(data));\n    }\n    insert(item, before = null) {\n        if (before !== null) {\n            // prev   before\n            //      ^\n            //     item\n            this.updateCursors(before.prev, item, before, item);\n\n            if (before.prev === null) {\n                // insert to the beginning of list\n                if (this.head !== before) {\n                    throw new Error('before doesn\\'t belong to list');\n                }\n                // since head points to before therefore list doesn't empty\n                // no need to check tail\n                this.head = item;\n                before.prev = item;\n                item.next = before;\n                this.updateCursors(null, item);\n            } else {\n                // insert between two items\n                before.prev.next = item;\n                item.prev = before.prev;\n                before.prev = item;\n                item.next = before;\n            }\n        } else {\n            // tail\n            //      ^\n            //      item\n            this.updateCursors(this.tail, item, null, item);\n\n            // insert to the ending of the list\n            if (this.tail !== null) {\n                // last item -> new item\n                this.tail.next = item;\n                // last item <- new item\n                item.prev = this.tail;\n            } else {\n                // if list has no tail, then it also has no head\n                // in this case head points to new item\n                this.head = item;\n            }\n\n            // tail always points to new item\n            this.tail = item;\n        }\n\n        return this;\n    }\n    insertData(data, before) {\n        return this.insert(List.createItem(data), before);\n    }\n    remove(item) {\n        //      item\n        //       ^\n        // prev     next\n        this.updateCursors(item, item.prev, item, item.next);\n\n        if (item.prev !== null) {\n            item.prev.next = item.next;\n        } else {\n            if (this.head !== item) {\n                throw new Error('item doesn\\'t belong to list');\n            }\n\n            this.head = item.next;\n        }\n\n        if (item.next !== null) {\n            item.next.prev = item.prev;\n        } else {\n            if (this.tail !== item) {\n                throw new Error('item doesn\\'t belong to list');\n            }\n\n            this.tail = item.prev;\n        }\n\n        item.prev = null;\n        item.next = null;\n\n        return item;\n    }\n    push(data) {\n        this.insert(List.createItem(data));\n    }\n    pop() {\n        return this.tail !== null ? this.remove(this.tail) : null;\n    }\n    unshift(data) {\n        this.prepend(List.createItem(data));\n    }\n    shift() {\n        return this.head !== null ? this.remove(this.head) : null;\n    }\n    prependList(list) {\n        return this.insertList(list, this.head);\n    }\n    appendList(list) {\n        return this.insertList(list);\n    }\n    insertList(list, before) {\n        // ignore empty lists\n        if (list.head === null) {\n            return this;\n        }\n\n        if (before !== undefined && before !== null) {\n            this.updateCursors(before.prev, list.tail, before, list.head);\n\n            // insert in the middle of dist list\n            if (before.prev !== null) {\n                // before.prev <-> list.head\n                before.prev.next = list.head;\n                list.head.prev = before.prev;\n            } else {\n                this.head = list.head;\n            }\n\n            before.prev = list.tail;\n            list.tail.next = before;\n        } else {\n            this.updateCursors(this.tail, list.tail, null, list.head);\n\n            // insert to end of the list\n            if (this.tail !== null) {\n                // if destination list has a tail, then it also has a head,\n                // but head doesn't change\n                // dest tail -> source head\n                this.tail.next = list.head;\n                // dest tail <- source head\n                list.head.prev = this.tail;\n            } else {\n                // if list has no a tail, then it also has no a head\n                // in this case points head to new item\n                this.head = list.head;\n            }\n\n            // tail always start point to new item\n            this.tail = list.tail;\n        }\n\n        list.head = null;\n        list.tail = null;\n        return this;\n    }\n    replace(oldItem, newItemOrList) {\n        if ('head' in newItemOrList) {\n            this.insertList(newItemOrList, oldItem);\n        } else {\n            this.insert(newItemOrList, oldItem);\n        }\n\n        this.remove(oldItem);\n    }\n}\n","export function createCustomError(name, message) {\n    // use Object.create(), because some VMs prevent setting line/column otherwise\n    // (iOS Safari 10 even throws an exception)\n    const error = Object.create(SyntaxError.prototype);\n    const errorStack = new Error();\n\n    return Object.assign(error, {\n        name,\n        message,\n        get stack() {\n            return (errorStack.stack || '').replace(/^(.+\\n){1,3}/, `${name}: ${message}\\n`);\n        }\n    });\n};\n","import { createCustomError } from '../utils/create-custom-error.js';\n\nconst MAX_LINE_LENGTH = 100;\nconst OFFSET_CORRECTION = 60;\nconst TAB_REPLACEMENT = '    ';\n\nfunction sourceFragment({ source, line, column, baseLine, baseColumn }, extraLines) {\n    function processLines(start, end) {\n        return lines\n            .slice(start, end)\n            .map((line, idx) =>\n                String(start + idx + 1).padStart(maxNumLength) + ' |' + line\n            ).join('\\n');\n    }\n\n    const prelines = '\\n'.repeat(Math.max(baseLine - 1, 0));\n    const precolumns = ' '.repeat(Math.max(baseColumn - 1, 0));\n    const lines = (prelines + precolumns + source).split(/\\r\\n?|\\n|\\f/);\n    const startLine = Math.max(1, line - extraLines) - 1;\n    const endLine = Math.min(line + extraLines, lines.length + 1);\n    const maxNumLength = Math.max(4, String(endLine).length) + 1;\n    let cutLeft = 0;\n\n    // column correction according to replaced tab before column\n    column += (TAB_REPLACEMENT.length - 1) * (lines[line - 1].substr(0, column - 1).match(/\\t/g) || []).length;\n\n    if (column > MAX_LINE_LENGTH) {\n        cutLeft = column - OFFSET_CORRECTION + 3;\n        column = OFFSET_CORRECTION - 2;\n    }\n\n    for (let i = startLine; i <= endLine; i++) {\n        if (i >= 0 && i < lines.length) {\n            lines[i] = lines[i].replace(/\\t/g, TAB_REPLACEMENT);\n            lines[i] =\n                (cutLeft > 0 && lines[i].length > cutLeft ? '\\u2026' : '') +\n                lines[i].substr(cutLeft, MAX_LINE_LENGTH - 2) +\n                (lines[i].length > cutLeft + MAX_LINE_LENGTH - 1 ? '\\u2026' : '');\n        }\n    }\n\n    return [\n        processLines(startLine, line),\n        new Array(column + maxNumLength + 2).join('-') + '^',\n        processLines(line, endLine)\n    ].filter(Boolean)\n        .join('\\n')\n        .replace(/^(\\s+\\d+\\s+\\|\\n)+/, '')\n        .replace(/\\n(\\s+\\d+\\s+\\|)+$/, '');\n}\n\nexport function SyntaxError(message, source, offset, line, column, baseLine = 1, baseColumn = 1) {\n    const error = Object.assign(createCustomError('SyntaxError', message), {\n        source,\n        offset,\n        line,\n        column,\n        sourceFragment(extraLines) {\n            return sourceFragment({ source, line, column, baseLine, baseColumn }, isNaN(extraLines) ? 0 : extraLines);\n        },\n        get formattedMessage() {\n            return (\n                `Parse error: ${message}\\n` +\n                sourceFragment({ source, line, column, baseLine, baseColumn }, 2)\n            );\n        }\n    });\n\n    return error;\n}\n","import { WhiteSpace, Comment } from '../tokenizer/index.js';\n\nexport function readSequence(recognizer) {\n    const children = this.createList();\n    let space = false;\n    const context = {\n        recognizer\n    };\n\n    while (!this.eof) {\n        switch (this.tokenType) {\n            case Comment:\n                this.next();\n                continue;\n\n            case WhiteSpace:\n                space = true;\n                this.next();\n                continue;\n        }\n\n        let child = recognizer.getNode.call(this, context);\n\n        if (child === undefined) {\n            break;\n        }\n\n        if (space) {\n            if (recognizer.onWhiteSpace) {\n                recognizer.onWhiteSpace.call(this, child, children, context);\n            }\n            space = false;\n        }\n\n        children.push(child);\n    }\n\n    if (space && recognizer.onWhiteSpace) {\n        recognizer.onWhiteSpace.call(this, null, children, context);\n    }\n\n    return children;\n};\n","import { List } from '../utils/List.js';\nimport { SyntaxError } from './SyntaxError.js';\nimport {\n    tokenize,\n    OffsetToLocation,\n    TokenStream,\n    tokenNames,\n\n    consumeNumber,\n    findWhiteSpaceStart,\n    cmpChar,\n    cmpStr,\n\n    WhiteSpace,\n    Comment,\n    Ident,\n    Function as FunctionToken,\n    Url,\n    Hash,\n    Percentage,\n    Number as NumberToken\n} from '../tokenizer/index.js';\nimport { readSequence } from './sequence.js';\n\nconst NOOP = () => {};\nconst EXCLAMATIONMARK = 0x0021;  // U+0021 EXCLAMATION MARK (!)\nconst NUMBERSIGN = 0x0023;       // U+0023 NUMBER SIGN (#)\nconst SEMICOLON = 0x003B;        // U+003B SEMICOLON (;)\nconst LEFTCURLYBRACKET = 0x007B; // U+007B LEFT CURLY BRACKET ({)\nconst NULL = 0;\n\nfunction createParseContext(name) {\n    return function() {\n        return this[name]();\n    };\n}\n\nfunction fetchParseValues(dict) {\n    const result = Object.create(null);\n\n    for (const name of Object.keys(dict)) {\n        const item = dict[name];\n        const fn = item.parse || item;\n\n        if (fn) {\n            result[name] = fn;\n        }\n    }\n\n    return result;\n}\n\nfunction processConfig(config) {\n    const parseConfig = {\n        context: Object.create(null),\n        features: Object.assign(Object.create(null), config.features),\n        scope: Object.assign(Object.create(null), config.scope),\n        atrule: fetchParseValues(config.atrule),\n        pseudo: fetchParseValues(config.pseudo),\n        node: fetchParseValues(config.node)\n    };\n\n    for (const [name, context] of Object.entries(config.parseContext)) {\n        switch (typeof context) {\n            case 'function':\n                parseConfig.context[name] = context;\n                break;\n\n            case 'string':\n                parseConfig.context[name] = createParseContext(context);\n                break;\n        }\n    }\n\n    return {\n        config: parseConfig,\n        ...parseConfig,\n        ...parseConfig.node\n    };\n}\n\nexport function createParser(config) {\n    let source = '';\n    let filename = '<unknown>';\n    let needPositions = false;\n    let onParseError = NOOP;\n    let onParseErrorThrow = false;\n\n    const locationMap = new OffsetToLocation();\n    const parser = Object.assign(new TokenStream(), processConfig(config || {}), {\n        parseAtrulePrelude: true,\n        parseRulePrelude: true,\n        parseValue: true,\n        parseCustomProperty: false,\n\n        readSequence,\n\n        consumeUntilBalanceEnd: () => 0,\n        consumeUntilLeftCurlyBracket(code) {\n            return code === LEFTCURLYBRACKET ? 1 : 0;\n        },\n        consumeUntilLeftCurlyBracketOrSemicolon(code) {\n            return code === LEFTCURLYBRACKET || code === SEMICOLON ? 1 : 0;\n        },\n        consumeUntilExclamationMarkOrSemicolon(code) {\n            return code === EXCLAMATIONMARK || code === SEMICOLON ? 1 : 0;\n        },\n        consumeUntilSemicolonIncluded(code) {\n            return code === SEMICOLON ? 2 : 0;\n        },\n\n        createList() {\n            return new List();\n        },\n        createSingleNodeList(node) {\n            return new List().appendData(node);\n        },\n        getFirstListNode(list) {\n            return list && list.first;\n        },\n        getLastListNode(list) {\n            return list && list.last;\n        },\n\n        parseWithFallback(consumer, fallback) {\n            const startIndex = this.tokenIndex;\n\n            try {\n                return consumer.call(this);\n            } catch (e) {\n                if (onParseErrorThrow) {\n                    throw e;\n                }\n\n                this.skip(startIndex - this.tokenIndex);\n                const fallbackNode = fallback.call(this);\n\n                onParseErrorThrow = true;\n                onParseError(e, fallbackNode);\n                onParseErrorThrow = false;\n\n                return fallbackNode;\n            }\n        },\n\n        lookupNonWSType(offset) {\n            let type;\n\n            do {\n                type = this.lookupType(offset++);\n                if (type !== WhiteSpace && type !== Comment) {\n                    return type;\n                }\n            } while (type !== NULL);\n\n            return NULL;\n        },\n\n        charCodeAt(offset) {\n            return offset >= 0 && offset < source.length ? source.charCodeAt(offset) : 0;\n        },\n        substring(offsetStart, offsetEnd) {\n            return source.substring(offsetStart, offsetEnd);\n        },\n        substrToCursor(start) {\n            return this.source.substring(start, this.tokenStart);\n        },\n\n        cmpChar(offset, charCode) {\n            return cmpChar(source, offset, charCode);\n        },\n        cmpStr(offsetStart, offsetEnd, str) {\n            return cmpStr(source, offsetStart, offsetEnd, str);\n        },\n\n        consume(tokenType) {\n            const start = this.tokenStart;\n\n            this.eat(tokenType);\n\n            return this.substrToCursor(start);\n        },\n        consumeFunctionName() {\n            const name = source.substring(this.tokenStart, this.tokenEnd - 1);\n\n            this.eat(FunctionToken);\n\n            return name;\n        },\n        consumeNumber(type) {\n            const number = source.substring(this.tokenStart, consumeNumber(source, this.tokenStart));\n\n            this.eat(type);\n\n            return number;\n        },\n\n        eat(tokenType) {\n            if (this.tokenType !== tokenType) {\n                const tokenName = tokenNames[tokenType].slice(0, -6).replace(/-/g, ' ').replace(/^./, m => m.toUpperCase());\n                let message = `${/[[\\](){}]/.test(tokenName) ? `\"${tokenName}\"` : tokenName} is expected`;\n                let offset = this.tokenStart;\n\n                // tweak message and offset\n                switch (tokenType) {\n                    case Ident:\n                        // when identifier is expected but there is a function or url\n                        if (this.tokenType === FunctionToken || this.tokenType === Url) {\n                            offset = this.tokenEnd - 1;\n                            message = 'Identifier is expected but function found';\n                        } else {\n                            message = 'Identifier is expected';\n                        }\n                        break;\n\n                    case Hash:\n                        if (this.isDelim(NUMBERSIGN)) {\n                            this.next();\n                            offset++;\n                            message = 'Name is expected';\n                        }\n                        break;\n\n                    case Percentage:\n                        if (this.tokenType === NumberToken) {\n                            offset = this.tokenEnd;\n                            message = 'Percent sign is expected';\n                        }\n                        break;\n                }\n\n                this.error(message, offset);\n            }\n\n            this.next();\n        },\n        eatIdent(name) {\n            if (this.tokenType !== Ident || this.lookupValue(0, name) === false) {\n                this.error(`Identifier \"${name}\" is expected`);\n            }\n\n            this.next();\n        },\n        eatDelim(code) {\n            if (!this.isDelim(code)) {\n                this.error(`Delim \"${String.fromCharCode(code)}\" is expected`);\n            }\n\n            this.next();\n        },\n\n        getLocation(start, end) {\n            if (needPositions) {\n                return locationMap.getLocationRange(\n                    start,\n                    end,\n                    filename\n                );\n            }\n\n            return null;\n        },\n        getLocationFromList(list) {\n            if (needPositions) {\n                const head = this.getFirstListNode(list);\n                const tail = this.getLastListNode(list);\n                return locationMap.getLocationRange(\n                    head !== null ? head.loc.start.offset - locationMap.startOffset : this.tokenStart,\n                    tail !== null ? tail.loc.end.offset - locationMap.startOffset : this.tokenStart,\n                    filename\n                );\n            }\n\n            return null;\n        },\n\n        error(message, offset) {\n            const location = typeof offset !== 'undefined' && offset < source.length\n                ? locationMap.getLocation(offset)\n                : this.eof\n                    ? locationMap.getLocation(findWhiteSpaceStart(source, source.length - 1))\n                    : locationMap.getLocation(this.tokenStart);\n\n            throw new SyntaxError(\n                message || 'Unexpected input',\n                source,\n                location.offset,\n                location.line,\n                location.column,\n                locationMap.startLine,\n                locationMap.startColumn\n            );\n        }\n    });\n\n    const parse = function(source_, options) {\n        source = source_;\n        options = options || {};\n\n        parser.setSource(source, tokenize);\n        locationMap.setSource(\n            source,\n            options.offset,\n            options.line,\n            options.column\n        );\n\n        filename = options.filename || '<unknown>';\n        needPositions = Boolean(options.positions);\n        onParseError = typeof options.onParseError === 'function' ? options.onParseError : NOOP;\n        onParseErrorThrow = false;\n\n        parser.parseAtrulePrelude = 'parseAtrulePrelude' in options ? Boolean(options.parseAtrulePrelude) : true;\n        parser.parseRulePrelude = 'parseRulePrelude' in options ? Boolean(options.parseRulePrelude) : true;\n        parser.parseValue = 'parseValue' in options ? Boolean(options.parseValue) : true;\n        parser.parseCustomProperty = 'parseCustomProperty' in options ? Boolean(options.parseCustomProperty) : false;\n\n        const { context = 'default', onComment } = options;\n\n        if (context in parser.context === false) {\n            throw new Error('Unknown context `' + context + '`');\n        }\n\n        if (typeof onComment === 'function') {\n            parser.forEachToken((type, start, end) => {\n                if (type === Comment) {\n                    const loc = parser.getLocation(start, end);\n                    const value = cmpStr(source, end - 2, end, '*/')\n                        ? source.slice(start + 2, end - 2)\n                        : source.slice(start + 2, end);\n\n                    onComment(value, loc);\n                }\n            });\n        }\n\n        const ast = parser.context[context].call(parser, options);\n\n        if (!parser.eof) {\n            parser.error();\n        }\n\n        return ast;\n    };\n\n    return Object.assign(parse, {\n        SyntaxError,\n        config: parser.config\n    });\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar intToCharMap = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\n\n/**\n * Encode an integer in the range of 0 to 63 to a single base 64 digit.\n */\nexports.encode = function (number) {\n  if (0 <= number && number < intToCharMap.length) {\n    return intToCharMap[number];\n  }\n  throw new TypeError(\"Must be between 0 and 63: \" + number);\n};\n\n/**\n * Decode a single base 64 character code digit to an integer. Returns -1 on\n * failure.\n */\nexports.decode = function (charCode) {\n  var bigA = 65;     // 'A'\n  var bigZ = 90;     // 'Z'\n\n  var littleA = 97;  // 'a'\n  var littleZ = 122; // 'z'\n\n  var zero = 48;     // '0'\n  var nine = 57;     // '9'\n\n  var plus = 43;     // '+'\n  var slash = 47;    // '/'\n\n  var littleOffset = 26;\n  var numberOffset = 52;\n\n  // 0 - 25: ABCDEFGHIJKLMNOPQRSTUVWXYZ\n  if (bigA <= charCode && charCode <= bigZ) {\n    return (charCode - bigA);\n  }\n\n  // 26 - 51: abcdefghijklmnopqrstuvwxyz\n  if (littleA <= charCode && charCode <= littleZ) {\n    return (charCode - littleA + littleOffset);\n  }\n\n  // 52 - 61: 0123456789\n  if (zero <= charCode && charCode <= nine) {\n    return (charCode - zero + numberOffset);\n  }\n\n  // 62: +\n  if (charCode == plus) {\n    return 62;\n  }\n\n  // 63: /\n  if (charCode == slash) {\n    return 63;\n  }\n\n  // Invalid base64 digit.\n  return -1;\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n *\n * Based on the Base 64 VLQ implementation in Closure Compiler:\n * https://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/debugging/sourcemap/Base64VLQ.java\n *\n * Copyright 2011 The Closure Compiler Authors. All rights reserved.\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *  * Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above\n *    copyright notice, this list of conditions and the following\n *    disclaimer in the documentation and/or other materials provided\n *    with the distribution.\n *  * Neither the name of Google Inc. nor the names of its\n *    contributors may be used to endorse or promote products derived\n *    from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nvar base64 = require('./base64');\n\n// A single base 64 digit can contain 6 bits of data. For the base 64 variable\n// length quantities we use in the source map spec, the first bit is the sign,\n// the next four bits are the actual value, and the 6th bit is the\n// continuation bit. The continuation bit tells us whether there are more\n// digits in this value following this digit.\n//\n//   Continuation\n//   |    Sign\n//   |    |\n//   V    V\n//   101011\n\nvar VLQ_BASE_SHIFT = 5;\n\n// binary: 100000\nvar VLQ_BASE = 1 << VLQ_BASE_SHIFT;\n\n// binary: 011111\nvar VLQ_BASE_MASK = VLQ_BASE - 1;\n\n// binary: 100000\nvar VLQ_CONTINUATION_BIT = VLQ_BASE;\n\n/**\n * Converts from a two-complement value to a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   1 becomes 2 (10 binary), -1 becomes 3 (11 binary)\n *   2 becomes 4 (100 binary), -2 becomes 5 (101 binary)\n */\nfunction toVLQSigned(aValue) {\n  return aValue < 0\n    ? ((-aValue) << 1) + 1\n    : (aValue << 1) + 0;\n}\n\n/**\n * Converts to a two-complement value from a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   2 (10 binary) becomes 1, 3 (11 binary) becomes -1\n *   4 (100 binary) becomes 2, 5 (101 binary) becomes -2\n */\nfunction fromVLQSigned(aValue) {\n  var isNegative = (aValue & 1) === 1;\n  var shifted = aValue >> 1;\n  return isNegative\n    ? -shifted\n    : shifted;\n}\n\n/**\n * Returns the base 64 VLQ encoded value.\n */\nexports.encode = function base64VLQ_encode(aValue) {\n  var encoded = \"\";\n  var digit;\n\n  var vlq = toVLQSigned(aValue);\n\n  do {\n    digit = vlq & VLQ_BASE_MASK;\n    vlq >>>= VLQ_BASE_SHIFT;\n    if (vlq > 0) {\n      // There are still more digits in this value, so we must make sure the\n      // continuation bit is marked.\n      digit |= VLQ_CONTINUATION_BIT;\n    }\n    encoded += base64.encode(digit);\n  } while (vlq > 0);\n\n  return encoded;\n};\n\n/**\n * Decodes the next base 64 VLQ value from the given string and returns the\n * value and the rest of the string via the out parameter.\n */\nexports.decode = function base64VLQ_decode(aStr, aIndex, aOutParam) {\n  var strLen = aStr.length;\n  var result = 0;\n  var shift = 0;\n  var continuation, digit;\n\n  do {\n    if (aIndex >= strLen) {\n      throw new Error(\"Expected more digits in base 64 VLQ value.\");\n    }\n\n    digit = base64.decode(aStr.charCodeAt(aIndex++));\n    if (digit === -1) {\n      throw new Error(\"Invalid base64 digit: \" + aStr.charAt(aIndex - 1));\n    }\n\n    continuation = !!(digit & VLQ_CONTINUATION_BIT);\n    digit &= VLQ_BASE_MASK;\n    result = result + (digit << shift);\n    shift += VLQ_BASE_SHIFT;\n  } while (continuation);\n\n  aOutParam.value = fromVLQSigned(result);\n  aOutParam.rest = aIndex;\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\n/**\n * This is a helper function for getting values from parameter/options\n * objects.\n *\n * @param args The object we are extracting values from\n * @param name The name of the property we are getting.\n * @param defaultValue An optional value to return if the property is missing\n * from the object. If this is not specified and the property is missing, an\n * error will be thrown.\n */\nfunction getArg(aArgs, aName, aDefaultValue) {\n  if (aName in aArgs) {\n    return aArgs[aName];\n  } else if (arguments.length === 3) {\n    return aDefaultValue;\n  } else {\n    throw new Error('\"' + aName + '\" is a required argument.');\n  }\n}\nexports.getArg = getArg;\n\nvar urlRegexp = /^(?:([\\w+\\-.]+):)?\\/\\/(?:(\\w+:\\w+)@)?([\\w.-]*)(?::(\\d+))?(.*)$/;\nvar dataUrlRegexp = /^data:.+\\,.+$/;\n\nfunction urlParse(aUrl) {\n  var match = aUrl.match(urlRegexp);\n  if (!match) {\n    return null;\n  }\n  return {\n    scheme: match[1],\n    auth: match[2],\n    host: match[3],\n    port: match[4],\n    path: match[5]\n  };\n}\nexports.urlParse = urlParse;\n\nfunction urlGenerate(aParsedUrl) {\n  var url = '';\n  if (aParsedUrl.scheme) {\n    url += aParsedUrl.scheme + ':';\n  }\n  url += '//';\n  if (aParsedUrl.auth) {\n    url += aParsedUrl.auth + '@';\n  }\n  if (aParsedUrl.host) {\n    url += aParsedUrl.host;\n  }\n  if (aParsedUrl.port) {\n    url += \":\" + aParsedUrl.port\n  }\n  if (aParsedUrl.path) {\n    url += aParsedUrl.path;\n  }\n  return url;\n}\nexports.urlGenerate = urlGenerate;\n\nvar MAX_CACHED_INPUTS = 32;\n\n/**\n * Takes some function `f(input) -> result` and returns a memoized version of\n * `f`.\n *\n * We keep at most `MAX_CACHED_INPUTS` memoized results of `f` alive. The\n * memoization is a dumb-simple, linear least-recently-used cache.\n */\nfunction lruMemoize(f) {\n  var cache = [];\n\n  return function(input) {\n    for (var i = 0; i < cache.length; i++) {\n      if (cache[i].input === input) {\n        var temp = cache[0];\n        cache[0] = cache[i];\n        cache[i] = temp;\n        return cache[0].result;\n      }\n    }\n\n    var result = f(input);\n\n    cache.unshift({\n      input,\n      result,\n    });\n\n    if (cache.length > MAX_CACHED_INPUTS) {\n      cache.pop();\n    }\n\n    return result;\n  };\n}\n\n/**\n * Normalizes a path, or the path portion of a URL:\n *\n * - Replaces consecutive slashes with one slash.\n * - Removes unnecessary '.' parts.\n * - Removes unnecessary '<dir>/..' parts.\n *\n * Based on code in the Node.js 'path' core module.\n *\n * @param aPath The path or url to normalize.\n */\nvar normalize = lruMemoize(function normalize(aPath) {\n  var path = aPath;\n  var url = urlParse(aPath);\n  if (url) {\n    if (!url.path) {\n      return aPath;\n    }\n    path = url.path;\n  }\n  var isAbsolute = exports.isAbsolute(path);\n  // Split the path into parts between `/` characters. This is much faster than\n  // using `.split(/\\/+/g)`.\n  var parts = [];\n  var start = 0;\n  var i = 0;\n  while (true) {\n    start = i;\n    i = path.indexOf(\"/\", start);\n    if (i === -1) {\n      parts.push(path.slice(start));\n      break;\n    } else {\n      parts.push(path.slice(start, i));\n      while (i < path.length && path[i] === \"/\") {\n        i++;\n      }\n    }\n  }\n\n  for (var part, up = 0, i = parts.length - 1; i >= 0; i--) {\n    part = parts[i];\n    if (part === '.') {\n      parts.splice(i, 1);\n    } else if (part === '..') {\n      up++;\n    } else if (up > 0) {\n      if (part === '') {\n        // The first part is blank if the path is absolute. Trying to go\n        // above the root is a no-op. Therefore we can remove all '..' parts\n        // directly after the root.\n        parts.splice(i + 1, up);\n        up = 0;\n      } else {\n        parts.splice(i, 2);\n        up--;\n      }\n    }\n  }\n  path = parts.join('/');\n\n  if (path === '') {\n    path = isAbsolute ? '/' : '.';\n  }\n\n  if (url) {\n    url.path = path;\n    return urlGenerate(url);\n  }\n  return path;\n});\nexports.normalize = normalize;\n\n/**\n * Joins two paths/URLs.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be joined with the root.\n *\n * - If aPath is a URL or a data URI, aPath is returned, unless aPath is a\n *   scheme-relative URL: Then the scheme of aRoot, if any, is prepended\n *   first.\n * - Otherwise aPath is a path. If aRoot is a URL, then its path portion\n *   is updated with the result and aRoot is returned. Otherwise the result\n *   is returned.\n *   - If aPath is absolute, the result is aPath.\n *   - Otherwise the two paths are joined with a slash.\n * - Joining for example 'http://' and 'www.example.com' is also supported.\n */\nfunction join(aRoot, aPath) {\n  if (aRoot === \"\") {\n    aRoot = \".\";\n  }\n  if (aPath === \"\") {\n    aPath = \".\";\n  }\n  var aPathUrl = urlParse(aPath);\n  var aRootUrl = urlParse(aRoot);\n  if (aRootUrl) {\n    aRoot = aRootUrl.path || '/';\n  }\n\n  // `join(foo, '//www.example.org')`\n  if (aPathUrl && !aPathUrl.scheme) {\n    if (aRootUrl) {\n      aPathUrl.scheme = aRootUrl.scheme;\n    }\n    return urlGenerate(aPathUrl);\n  }\n\n  if (aPathUrl || aPath.match(dataUrlRegexp)) {\n    return aPath;\n  }\n\n  // `join('http://', 'www.example.com')`\n  if (aRootUrl && !aRootUrl.host && !aRootUrl.path) {\n    aRootUrl.host = aPath;\n    return urlGenerate(aRootUrl);\n  }\n\n  var joined = aPath.charAt(0) === '/'\n    ? aPath\n    : normalize(aRoot.replace(/\\/+$/, '') + '/' + aPath);\n\n  if (aRootUrl) {\n    aRootUrl.path = joined;\n    return urlGenerate(aRootUrl);\n  }\n  return joined;\n}\nexports.join = join;\n\nexports.isAbsolute = function (aPath) {\n  return aPath.charAt(0) === '/' || urlRegexp.test(aPath);\n};\n\n/**\n * Make a path relative to a URL or another path.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be made relative to aRoot.\n */\nfunction relative(aRoot, aPath) {\n  if (aRoot === \"\") {\n    aRoot = \".\";\n  }\n\n  aRoot = aRoot.replace(/\\/$/, '');\n\n  // It is possible for the path to be above the root. In this case, simply\n  // checking whether the root is a prefix of the path won't work. Instead, we\n  // need to remove components from the root one by one, until either we find\n  // a prefix that fits, or we run out of components to remove.\n  var level = 0;\n  while (aPath.indexOf(aRoot + '/') !== 0) {\n    var index = aRoot.lastIndexOf(\"/\");\n    if (index < 0) {\n      return aPath;\n    }\n\n    // If the only part of the root that is left is the scheme (i.e. http://,\n    // file:///, etc.), one or more slashes (/), or simply nothing at all, we\n    // have exhausted all components, so the path is not relative to the root.\n    aRoot = aRoot.slice(0, index);\n    if (aRoot.match(/^([^\\/]+:\\/)?\\/*$/)) {\n      return aPath;\n    }\n\n    ++level;\n  }\n\n  // Make sure we add a \"../\" for each component we removed from the root.\n  return Array(level + 1).join(\"../\") + aPath.substr(aRoot.length + 1);\n}\nexports.relative = relative;\n\nvar supportsNullProto = (function () {\n  var obj = Object.create(null);\n  return !('__proto__' in obj);\n}());\n\nfunction identity (s) {\n  return s;\n}\n\n/**\n * Because behavior goes wacky when you set `__proto__` on objects, we\n * have to prefix all the strings in our set with an arbitrary character.\n *\n * See https://github.com/mozilla/source-map/pull/31 and\n * https://github.com/mozilla/source-map/issues/30\n *\n * @param String aStr\n */\nfunction toSetString(aStr) {\n  if (isProtoString(aStr)) {\n    return '$' + aStr;\n  }\n\n  return aStr;\n}\nexports.toSetString = supportsNullProto ? identity : toSetString;\n\nfunction fromSetString(aStr) {\n  if (isProtoString(aStr)) {\n    return aStr.slice(1);\n  }\n\n  return aStr;\n}\nexports.fromSetString = supportsNullProto ? identity : fromSetString;\n\nfunction isProtoString(s) {\n  if (!s) {\n    return false;\n  }\n\n  var length = s.length;\n\n  if (length < 9 /* \"__proto__\".length */) {\n    return false;\n  }\n\n  if (s.charCodeAt(length - 1) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 2) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 3) !== 111 /* 'o' */ ||\n      s.charCodeAt(length - 4) !== 116 /* 't' */ ||\n      s.charCodeAt(length - 5) !== 111 /* 'o' */ ||\n      s.charCodeAt(length - 6) !== 114 /* 'r' */ ||\n      s.charCodeAt(length - 7) !== 112 /* 'p' */ ||\n      s.charCodeAt(length - 8) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 9) !== 95  /* '_' */) {\n    return false;\n  }\n\n  for (var i = length - 10; i >= 0; i--) {\n    if (s.charCodeAt(i) !== 36 /* '$' */) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Comparator between two mappings where the original positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same original source/line/column, but different generated\n * line and column the same. Useful when searching for a mapping with a\n * stubbed out mapping.\n */\nfunction compareByOriginalPositions(mappingA, mappingB, onlyCompareOriginal) {\n  var cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0 || onlyCompareOriginal) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByOriginalPositions = compareByOriginalPositions;\n\nfunction compareByOriginalPositionsNoSource(mappingA, mappingB, onlyCompareOriginal) {\n  var cmp\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0 || onlyCompareOriginal) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByOriginalPositionsNoSource = compareByOriginalPositionsNoSource;\n\n/**\n * Comparator between two mappings with deflated source and name indices where\n * the generated positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same generated line and column, but different\n * source/name/original line and column the same. Useful when searching for a\n * mapping with a stubbed out mapping.\n */\nfunction compareByGeneratedPositionsDeflated(mappingA, mappingB, onlyCompareGenerated) {\n  var cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0 || onlyCompareGenerated) {\n    return cmp;\n  }\n\n  cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByGeneratedPositionsDeflated = compareByGeneratedPositionsDeflated;\n\nfunction compareByGeneratedPositionsDeflatedNoLine(mappingA, mappingB, onlyCompareGenerated) {\n  var cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0 || onlyCompareGenerated) {\n    return cmp;\n  }\n\n  cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByGeneratedPositionsDeflatedNoLine = compareByGeneratedPositionsDeflatedNoLine;\n\nfunction strcmp(aStr1, aStr2) {\n  if (aStr1 === aStr2) {\n    return 0;\n  }\n\n  if (aStr1 === null) {\n    return 1; // aStr2 !== null\n  }\n\n  if (aStr2 === null) {\n    return -1; // aStr1 !== null\n  }\n\n  if (aStr1 > aStr2) {\n    return 1;\n  }\n\n  return -1;\n}\n\n/**\n * Comparator between two mappings with inflated source and name strings where\n * the generated positions are compared.\n */\nfunction compareByGeneratedPositionsInflated(mappingA, mappingB) {\n  var cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByGeneratedPositionsInflated = compareByGeneratedPositionsInflated;\n\n/**\n * Strip any JSON XSSI avoidance prefix from the string (as documented\n * in the source maps specification), and then parse the string as\n * JSON.\n */\nfunction parseSourceMapInput(str) {\n  return JSON.parse(str.replace(/^\\)]}'[^\\n]*\\n/, ''));\n}\nexports.parseSourceMapInput = parseSourceMapInput;\n\n/**\n * Compute the URL of a source given the the source root, the source's\n * URL, and the source map's URL.\n */\nfunction computeSourceURL(sourceRoot, sourceURL, sourceMapURL) {\n  sourceURL = sourceURL || '';\n\n  if (sourceRoot) {\n    // This follows what Chrome does.\n    if (sourceRoot[sourceRoot.length - 1] !== '/' && sourceURL[0] !== '/') {\n      sourceRoot += '/';\n    }\n    // The spec says:\n    //   Line 4: An optional source root, useful for relocating source\n    //   files on a server or removing repeated values in the\n    //   “sources” entry.  This value is prepended to the individual\n    //   entries in the “source” field.\n    sourceURL = sourceRoot + sourceURL;\n  }\n\n  // Historically, SourceMapConsumer did not take the sourceMapURL as\n  // a parameter.  This mode is still somewhat supported, which is why\n  // this code block is conditional.  However, it's preferable to pass\n  // the source map URL to SourceMapConsumer, so that this function\n  // can implement the source URL resolution algorithm as outlined in\n  // the spec.  This block is basically the equivalent of:\n  //    new URL(sourceURL, sourceMapURL).toString()\n  // ... except it avoids using URL, which wasn't available in the\n  // older releases of node still supported by this library.\n  //\n  // The spec says:\n  //   If the sources are not absolute URLs after prepending of the\n  //   “sourceRoot”, the sources are resolved relative to the\n  //   SourceMap (like resolving script src in a html document).\n  if (sourceMapURL) {\n    var parsed = urlParse(sourceMapURL);\n    if (!parsed) {\n      throw new Error(\"sourceMapURL could not be parsed\");\n    }\n    if (parsed.path) {\n      // Strip the last path component, but keep the \"/\".\n      var index = parsed.path.lastIndexOf('/');\n      if (index >= 0) {\n        parsed.path = parsed.path.substring(0, index + 1);\n      }\n    }\n    sourceURL = join(urlGenerate(parsed), sourceURL);\n  }\n\n  return normalize(sourceURL);\n}\nexports.computeSourceURL = computeSourceURL;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\nvar has = Object.prototype.hasOwnProperty;\nvar hasNativeMap = typeof Map !== \"undefined\";\n\n/**\n * A data structure which is a combination of an array and a set. Adding a new\n * member is O(1), testing for membership is O(1), and finding the index of an\n * element is O(1). Removing elements from the set is not supported. Only\n * strings are supported for membership.\n */\nfunction ArraySet() {\n  this._array = [];\n  this._set = hasNativeMap ? new Map() : Object.create(null);\n}\n\n/**\n * Static method for creating ArraySet instances from an existing array.\n */\nArraySet.fromArray = function ArraySet_fromArray(aArray, aAllowDuplicates) {\n  var set = new ArraySet();\n  for (var i = 0, len = aArray.length; i < len; i++) {\n    set.add(aArray[i], aAllowDuplicates);\n  }\n  return set;\n};\n\n/**\n * Return how many unique items are in this ArraySet. If duplicates have been\n * added, than those do not count towards the size.\n *\n * @returns Number\n */\nArraySet.prototype.size = function ArraySet_size() {\n  return hasNativeMap ? this._set.size : Object.getOwnPropertyNames(this._set).length;\n};\n\n/**\n * Add the given string to this set.\n *\n * @param String aStr\n */\nArraySet.prototype.add = function ArraySet_add(aStr, aAllowDuplicates) {\n  var sStr = hasNativeMap ? aStr : util.toSetString(aStr);\n  var isDuplicate = hasNativeMap ? this.has(aStr) : has.call(this._set, sStr);\n  var idx = this._array.length;\n  if (!isDuplicate || aAllowDuplicates) {\n    this._array.push(aStr);\n  }\n  if (!isDuplicate) {\n    if (hasNativeMap) {\n      this._set.set(aStr, idx);\n    } else {\n      this._set[sStr] = idx;\n    }\n  }\n};\n\n/**\n * Is the given string a member of this set?\n *\n * @param String aStr\n */\nArraySet.prototype.has = function ArraySet_has(aStr) {\n  if (hasNativeMap) {\n    return this._set.has(aStr);\n  } else {\n    var sStr = util.toSetString(aStr);\n    return has.call(this._set, sStr);\n  }\n};\n\n/**\n * What is the index of the given string in the array?\n *\n * @param String aStr\n */\nArraySet.prototype.indexOf = function ArraySet_indexOf(aStr) {\n  if (hasNativeMap) {\n    var idx = this._set.get(aStr);\n    if (idx >= 0) {\n        return idx;\n    }\n  } else {\n    var sStr = util.toSetString(aStr);\n    if (has.call(this._set, sStr)) {\n      return this._set[sStr];\n    }\n  }\n\n  throw new Error('\"' + aStr + '\" is not in the set.');\n};\n\n/**\n * What is the element at the given index?\n *\n * @param Number aIdx\n */\nArraySet.prototype.at = function ArraySet_at(aIdx) {\n  if (aIdx >= 0 && aIdx < this._array.length) {\n    return this._array[aIdx];\n  }\n  throw new Error('No element indexed by ' + aIdx);\n};\n\n/**\n * Returns the array representation of this set (which has the proper indices\n * indicated by indexOf). Note that this is a copy of the internal array used\n * for storing the members so that no one can mess with internal state.\n */\nArraySet.prototype.toArray = function ArraySet_toArray() {\n  return this._array.slice();\n};\n\nexports.ArraySet = ArraySet;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2014 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\n\n/**\n * Determine whether mappingB is after mappingA with respect to generated\n * position.\n */\nfunction generatedPositionAfter(mappingA, mappingB) {\n  // Optimized for most common case\n  var lineA = mappingA.generatedLine;\n  var lineB = mappingB.generatedLine;\n  var columnA = mappingA.generatedColumn;\n  var columnB = mappingB.generatedColumn;\n  return lineB > lineA || lineB == lineA && columnB >= columnA ||\n         util.compareByGeneratedPositionsInflated(mappingA, mappingB) <= 0;\n}\n\n/**\n * A data structure to provide a sorted view of accumulated mappings in a\n * performance conscious manner. It trades a neglibable overhead in general\n * case for a large speedup in case of mappings being added in order.\n */\nfunction MappingList() {\n  this._array = [];\n  this._sorted = true;\n  // Serves as infimum\n  this._last = {generatedLine: -1, generatedColumn: 0};\n}\n\n/**\n * Iterate through internal items. This method takes the same arguments that\n * `Array.prototype.forEach` takes.\n *\n * NOTE: The order of the mappings is NOT guaranteed.\n */\nMappingList.prototype.unsortedForEach =\n  function MappingList_forEach(aCallback, aThisArg) {\n    this._array.forEach(aCallback, aThisArg);\n  };\n\n/**\n * Add the given source mapping.\n *\n * @param Object aMapping\n */\nMappingList.prototype.add = function MappingList_add(aMapping) {\n  if (generatedPositionAfter(this._last, aMapping)) {\n    this._last = aMapping;\n    this._array.push(aMapping);\n  } else {\n    this._sorted = false;\n    this._array.push(aMapping);\n  }\n};\n\n/**\n * Returns the flat, sorted array of mappings. The mappings are sorted by\n * generated position.\n *\n * WARNING: This method returns internal data without copying, for\n * performance. The return value must NOT be mutated, and should be treated as\n * an immutable borrow. If you want to take ownership, you must make your own\n * copy.\n */\nMappingList.prototype.toArray = function MappingList_toArray() {\n  if (!this._sorted) {\n    this._array.sort(util.compareByGeneratedPositionsInflated);\n    this._sorted = true;\n  }\n  return this._array;\n};\n\nexports.MappingList = MappingList;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar base64VLQ = require('./base64-vlq');\nvar util = require('./util');\nvar ArraySet = require('./array-set').ArraySet;\nvar MappingList = require('./mapping-list').MappingList;\n\n/**\n * An instance of the SourceMapGenerator represents a source map which is\n * being built incrementally. You may pass an object with the following\n * properties:\n *\n *   - file: The filename of the generated source.\n *   - sourceRoot: A root for all relative URLs in this source map.\n */\nfunction SourceMapGenerator(aArgs) {\n  if (!aArgs) {\n    aArgs = {};\n  }\n  this._file = util.getArg(aArgs, 'file', null);\n  this._sourceRoot = util.getArg(aArgs, 'sourceRoot', null);\n  this._skipValidation = util.getArg(aArgs, 'skipValidation', false);\n  this._ignoreInvalidMapping = util.getArg(aArgs, 'ignoreInvalidMapping', false);\n  this._sources = new ArraySet();\n  this._names = new ArraySet();\n  this._mappings = new MappingList();\n  this._sourcesContents = null;\n}\n\nSourceMapGenerator.prototype._version = 3;\n\n/**\n * Creates a new SourceMapGenerator based on a SourceMapConsumer\n *\n * @param aSourceMapConsumer The SourceMap.\n */\nSourceMapGenerator.fromSourceMap =\n  function SourceMapGenerator_fromSourceMap(aSourceMapConsumer, generatorOps) {\n    var sourceRoot = aSourceMapConsumer.sourceRoot;\n    var generator = new SourceMapGenerator(Object.assign(generatorOps || {}, {\n      file: aSourceMapConsumer.file,\n      sourceRoot: sourceRoot\n    }));\n    aSourceMapConsumer.eachMapping(function (mapping) {\n      var newMapping = {\n        generated: {\n          line: mapping.generatedLine,\n          column: mapping.generatedColumn\n        }\n      };\n\n      if (mapping.source != null) {\n        newMapping.source = mapping.source;\n        if (sourceRoot != null) {\n          newMapping.source = util.relative(sourceRoot, newMapping.source);\n        }\n\n        newMapping.original = {\n          line: mapping.originalLine,\n          column: mapping.originalColumn\n        };\n\n        if (mapping.name != null) {\n          newMapping.name = mapping.name;\n        }\n      }\n\n      generator.addMapping(newMapping);\n    });\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var sourceRelative = sourceFile;\n      if (sourceRoot !== null) {\n        sourceRelative = util.relative(sourceRoot, sourceFile);\n      }\n\n      if (!generator._sources.has(sourceRelative)) {\n        generator._sources.add(sourceRelative);\n      }\n\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        generator.setSourceContent(sourceFile, content);\n      }\n    });\n    return generator;\n  };\n\n/**\n * Add a single mapping from original source line and column to the generated\n * source's line and column for this source map being created. The mapping\n * object should have the following properties:\n *\n *   - generated: An object with the generated line and column positions.\n *   - original: An object with the original line and column positions.\n *   - source: The original source file (relative to the sourceRoot).\n *   - name: An optional original token name for this mapping.\n */\nSourceMapGenerator.prototype.addMapping =\n  function SourceMapGenerator_addMapping(aArgs) {\n    var generated = util.getArg(aArgs, 'generated');\n    var original = util.getArg(aArgs, 'original', null);\n    var source = util.getArg(aArgs, 'source', null);\n    var name = util.getArg(aArgs, 'name', null);\n\n    if (!this._skipValidation) {\n      if (this._validateMapping(generated, original, source, name) === false) {\n        return;\n      }\n    }\n\n    if (source != null) {\n      source = String(source);\n      if (!this._sources.has(source)) {\n        this._sources.add(source);\n      }\n    }\n\n    if (name != null) {\n      name = String(name);\n      if (!this._names.has(name)) {\n        this._names.add(name);\n      }\n    }\n\n    this._mappings.add({\n      generatedLine: generated.line,\n      generatedColumn: generated.column,\n      originalLine: original != null && original.line,\n      originalColumn: original != null && original.column,\n      source: source,\n      name: name\n    });\n  };\n\n/**\n * Set the source content for a source file.\n */\nSourceMapGenerator.prototype.setSourceContent =\n  function SourceMapGenerator_setSourceContent(aSourceFile, aSourceContent) {\n    var source = aSourceFile;\n    if (this._sourceRoot != null) {\n      source = util.relative(this._sourceRoot, source);\n    }\n\n    if (aSourceContent != null) {\n      // Add the source content to the _sourcesContents map.\n      // Create a new _sourcesContents map if the property is null.\n      if (!this._sourcesContents) {\n        this._sourcesContents = Object.create(null);\n      }\n      this._sourcesContents[util.toSetString(source)] = aSourceContent;\n    } else if (this._sourcesContents) {\n      // Remove the source file from the _sourcesContents map.\n      // If the _sourcesContents map is empty, set the property to null.\n      delete this._sourcesContents[util.toSetString(source)];\n      if (Object.keys(this._sourcesContents).length === 0) {\n        this._sourcesContents = null;\n      }\n    }\n  };\n\n/**\n * Applies the mappings of a sub-source-map for a specific source file to the\n * source map being generated. Each mapping to the supplied source file is\n * rewritten using the supplied source map. Note: The resolution for the\n * resulting mappings is the minimium of this map and the supplied map.\n *\n * @param aSourceMapConsumer The source map to be applied.\n * @param aSourceFile Optional. The filename of the source file.\n *        If omitted, SourceMapConsumer's file property will be used.\n * @param aSourceMapPath Optional. The dirname of the path to the source map\n *        to be applied. If relative, it is relative to the SourceMapConsumer.\n *        This parameter is needed when the two source maps aren't in the same\n *        directory, and the source map to be applied contains relative source\n *        paths. If so, those relative source paths need to be rewritten\n *        relative to the SourceMapGenerator.\n */\nSourceMapGenerator.prototype.applySourceMap =\n  function SourceMapGenerator_applySourceMap(aSourceMapConsumer, aSourceFile, aSourceMapPath) {\n    var sourceFile = aSourceFile;\n    // If aSourceFile is omitted, we will use the file property of the SourceMap\n    if (aSourceFile == null) {\n      if (aSourceMapConsumer.file == null) {\n        throw new Error(\n          'SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, ' +\n          'or the source map\\'s \"file\" property. Both were omitted.'\n        );\n      }\n      sourceFile = aSourceMapConsumer.file;\n    }\n    var sourceRoot = this._sourceRoot;\n    // Make \"sourceFile\" relative if an absolute Url is passed.\n    if (sourceRoot != null) {\n      sourceFile = util.relative(sourceRoot, sourceFile);\n    }\n    // Applying the SourceMap can add and remove items from the sources and\n    // the names array.\n    var newSources = new ArraySet();\n    var newNames = new ArraySet();\n\n    // Find mappings for the \"sourceFile\"\n    this._mappings.unsortedForEach(function (mapping) {\n      if (mapping.source === sourceFile && mapping.originalLine != null) {\n        // Check if it can be mapped by the source map, then update the mapping.\n        var original = aSourceMapConsumer.originalPositionFor({\n          line: mapping.originalLine,\n          column: mapping.originalColumn\n        });\n        if (original.source != null) {\n          // Copy mapping\n          mapping.source = original.source;\n          if (aSourceMapPath != null) {\n            mapping.source = util.join(aSourceMapPath, mapping.source)\n          }\n          if (sourceRoot != null) {\n            mapping.source = util.relative(sourceRoot, mapping.source);\n          }\n          mapping.originalLine = original.line;\n          mapping.originalColumn = original.column;\n          if (original.name != null) {\n            mapping.name = original.name;\n          }\n        }\n      }\n\n      var source = mapping.source;\n      if (source != null && !newSources.has(source)) {\n        newSources.add(source);\n      }\n\n      var name = mapping.name;\n      if (name != null && !newNames.has(name)) {\n        newNames.add(name);\n      }\n\n    }, this);\n    this._sources = newSources;\n    this._names = newNames;\n\n    // Copy sourcesContents of applied map.\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        if (aSourceMapPath != null) {\n          sourceFile = util.join(aSourceMapPath, sourceFile);\n        }\n        if (sourceRoot != null) {\n          sourceFile = util.relative(sourceRoot, sourceFile);\n        }\n        this.setSourceContent(sourceFile, content);\n      }\n    }, this);\n  };\n\n/**\n * A mapping can have one of the three levels of data:\n *\n *   1. Just the generated position.\n *   2. The Generated position, original position, and original source.\n *   3. Generated and original position, original source, as well as a name\n *      token.\n *\n * To maintain consistency, we validate that any new mapping being added falls\n * in to one of these categories.\n */\nSourceMapGenerator.prototype._validateMapping =\n  function SourceMapGenerator_validateMapping(aGenerated, aOriginal, aSource,\n                                              aName) {\n    // When aOriginal is truthy but has empty values for .line and .column,\n    // it is most likely a programmer error. In this case we throw a very\n    // specific error message to try to guide them the right way.\n    // For example: https://github.com/Polymer/polymer-bundler/pull/519\n    if (aOriginal && typeof aOriginal.line !== 'number' && typeof aOriginal.column !== 'number') {\n      var message = 'original.line and original.column are not numbers -- you probably meant to omit ' +\n      'the original mapping entirely and only map the generated position. If so, pass ' +\n      'null for the original mapping instead of an object with empty or null values.'\n\n      if (this._ignoreInvalidMapping) {\n        if (typeof console !== 'undefined' && console.warn) {\n          console.warn(message);\n        }\n        return false;\n      } else {\n        throw new Error(message);\n      }\n    }\n\n    if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\n        && aGenerated.line > 0 && aGenerated.column >= 0\n        && !aOriginal && !aSource && !aName) {\n      // Case 1.\n      return;\n    }\n    else if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\n             && aOriginal && 'line' in aOriginal && 'column' in aOriginal\n             && aGenerated.line > 0 && aGenerated.column >= 0\n             && aOriginal.line > 0 && aOriginal.column >= 0\n             && aSource) {\n      // Cases 2 and 3.\n      return;\n    }\n    else {\n      var message = 'Invalid mapping: ' + JSON.stringify({\n        generated: aGenerated,\n        source: aSource,\n        original: aOriginal,\n        name: aName\n      });\n\n      if (this._ignoreInvalidMapping) {\n        if (typeof console !== 'undefined' && console.warn) {\n          console.warn(message);\n        }\n        return false;\n      } else {\n        throw new Error(message)\n      }\n    }\n  };\n\n/**\n * Serialize the accumulated mappings in to the stream of base 64 VLQs\n * specified by the source map format.\n */\nSourceMapGenerator.prototype._serializeMappings =\n  function SourceMapGenerator_serializeMappings() {\n    var previousGeneratedColumn = 0;\n    var previousGeneratedLine = 1;\n    var previousOriginalColumn = 0;\n    var previousOriginalLine = 0;\n    var previousName = 0;\n    var previousSource = 0;\n    var result = '';\n    var next;\n    var mapping;\n    var nameIdx;\n    var sourceIdx;\n\n    var mappings = this._mappings.toArray();\n    for (var i = 0, len = mappings.length; i < len; i++) {\n      mapping = mappings[i];\n      next = ''\n\n      if (mapping.generatedLine !== previousGeneratedLine) {\n        previousGeneratedColumn = 0;\n        while (mapping.generatedLine !== previousGeneratedLine) {\n          next += ';';\n          previousGeneratedLine++;\n        }\n      }\n      else {\n        if (i > 0) {\n          if (!util.compareByGeneratedPositionsInflated(mapping, mappings[i - 1])) {\n            continue;\n          }\n          next += ',';\n        }\n      }\n\n      next += base64VLQ.encode(mapping.generatedColumn\n                                 - previousGeneratedColumn);\n      previousGeneratedColumn = mapping.generatedColumn;\n\n      if (mapping.source != null) {\n        sourceIdx = this._sources.indexOf(mapping.source);\n        next += base64VLQ.encode(sourceIdx - previousSource);\n        previousSource = sourceIdx;\n\n        // lines are stored 0-based in SourceMap spec version 3\n        next += base64VLQ.encode(mapping.originalLine - 1\n                                   - previousOriginalLine);\n        previousOriginalLine = mapping.originalLine - 1;\n\n        next += base64VLQ.encode(mapping.originalColumn\n                                   - previousOriginalColumn);\n        previousOriginalColumn = mapping.originalColumn;\n\n        if (mapping.name != null) {\n          nameIdx = this._names.indexOf(mapping.name);\n          next += base64VLQ.encode(nameIdx - previousName);\n          previousName = nameIdx;\n        }\n      }\n\n      result += next;\n    }\n\n    return result;\n  };\n\nSourceMapGenerator.prototype._generateSourcesContent =\n  function SourceMapGenerator_generateSourcesContent(aSources, aSourceRoot) {\n    return aSources.map(function (source) {\n      if (!this._sourcesContents) {\n        return null;\n      }\n      if (aSourceRoot != null) {\n        source = util.relative(aSourceRoot, source);\n      }\n      var key = util.toSetString(source);\n      return Object.prototype.hasOwnProperty.call(this._sourcesContents, key)\n        ? this._sourcesContents[key]\n        : null;\n    }, this);\n  };\n\n/**\n * Externalize the source map.\n */\nSourceMapGenerator.prototype.toJSON =\n  function SourceMapGenerator_toJSON() {\n    var map = {\n      version: this._version,\n      sources: this._sources.toArray(),\n      names: this._names.toArray(),\n      mappings: this._serializeMappings()\n    };\n    if (this._file != null) {\n      map.file = this._file;\n    }\n    if (this._sourceRoot != null) {\n      map.sourceRoot = this._sourceRoot;\n    }\n    if (this._sourcesContents) {\n      map.sourcesContent = this._generateSourcesContent(map.sources, map.sourceRoot);\n    }\n\n    return map;\n  };\n\n/**\n * Render the source map being generated to a string.\n */\nSourceMapGenerator.prototype.toString =\n  function SourceMapGenerator_toString() {\n    return JSON.stringify(this.toJSON());\n  };\n\nexports.SourceMapGenerator = SourceMapGenerator;\n","import { SourceMapGenerator } from 'source-map-js/lib/source-map-generator.js';\n\nconst trackNodes = new Set(['Atrule', 'Selector', 'Declaration']);\n\nexport function generateSourceMap(handlers) {\n    const map = new SourceMapGenerator();\n    const generated = {\n        line: 1,\n        column: 0\n    };\n    const original = {\n        line: 0, // should be zero to add first mapping\n        column: 0\n    };\n    const activatedGenerated = {\n        line: 1,\n        column: 0\n    };\n    const activatedMapping = {\n        generated: activatedGenerated\n    };\n    let line = 1;\n    let column = 0;\n    let sourceMappingActive = false;\n\n    const origHandlersNode = handlers.node;\n    handlers.node = function(node) {\n        if (node.loc && node.loc.start && trackNodes.has(node.type)) {\n            const nodeLine = node.loc.start.line;\n            const nodeColumn = node.loc.start.column - 1;\n\n            if (original.line !== nodeLine ||\n                original.column !== nodeColumn) {\n                original.line = nodeLine;\n                original.column = nodeColumn;\n\n                generated.line = line;\n                generated.column = column;\n\n                if (sourceMappingActive) {\n                    sourceMappingActive = false;\n                    if (generated.line !== activatedGenerated.line ||\n                        generated.column !== activatedGenerated.column) {\n                        map.addMapping(activatedMapping);\n                    }\n                }\n\n                sourceMappingActive = true;\n                map.addMapping({\n                    source: node.loc.source,\n                    original,\n                    generated\n                });\n            }\n        }\n\n        origHandlersNode.call(this, node);\n\n        if (sourceMappingActive && trackNodes.has(node.type)) {\n            activatedGenerated.line = line;\n            activatedGenerated.column = column;\n        }\n    };\n\n    const origHandlersEmit = handlers.emit;\n    handlers.emit = function(value, type, auto) {\n        for (let i = 0; i < value.length; i++) {\n            if (value.charCodeAt(i) === 10) { // \\n\n                line++;\n                column = 0;\n            } else {\n                column++;\n            }\n        }\n\n        origHandlersEmit(value, type, auto);\n    };\n\n    const origHandlersResult = handlers.result;\n    handlers.result = function() {\n        if (sourceMappingActive) {\n            map.addMapping(activatedMapping);\n        }\n\n        return {\n            css: origHandlersResult(),\n            map\n        };\n    };\n\n    return handlers;\n};\n","import {\n    WhiteSpace,\n    Delim,\n    Ident,\n    Function as FunctionToken,\n    Url,\n    BadUrl,\n    AtKeyword,\n    Hash,\n    Percentage,\n    Dimension,\n    Number as NumberToken,\n    String as StringToken,\n    Colon,\n    LeftParenthesis,\n    RightParenthesis,\n    CDC\n} from '../tokenizer/index.js';\n\nconst PLUSSIGN = 0x002B;    // U+002B PLUS SIGN (+)\nconst HYPHENMINUS = 0x002D; // U+002D HYPHEN-MINUS (-)\n\nconst code = (type, value) => {\n    if (type === Delim) {\n        type = value;\n    }\n\n    if (typeof type === 'string') {\n        const charCode = type.charCodeAt(0);\n        return charCode > 0x7F ? 0x8000 : charCode << 8;\n    }\n\n    return type;\n};\n\n// https://www.w3.org/TR/css-syntax-3/#serialization\n// The only requirement for serialization is that it must \"round-trip\" with parsing,\n// that is, parsing the stylesheet must produce the same data structures as parsing,\n// serializing, and parsing again, except for consecutive <whitespace-token>s,\n// which may be collapsed into a single token.\n\nconst specPairs = [\n    [Ident, Ident],\n    [Ident, FunctionToken],\n    [Ident, Url],\n    [Ident, BadUrl],\n    [Ident, '-'],\n    [Ident, NumberToken],\n    [Ident, Percentage],\n    [Ident, Dimension],\n    [Ident, CDC],\n    [Ident, LeftParenthesis],\n\n    [AtKeyword, Ident],\n    [AtKeyword, FunctionToken],\n    [AtKeyword, Url],\n    [AtKeyword, BadUrl],\n    [AtKeyword, '-'],\n    [AtKeyword, NumberToken],\n    [AtKeyword, Percentage],\n    [AtKeyword, Dimension],\n    [AtKeyword, CDC],\n\n    [Hash, Ident],\n    [Hash, FunctionToken],\n    [Hash, Url],\n    [Hash, BadUrl],\n    [Hash, '-'],\n    [Hash, NumberToken],\n    [Hash, Percentage],\n    [Hash, Dimension],\n    [Hash, CDC],\n\n    [Dimension, Ident],\n    [Dimension, FunctionToken],\n    [Dimension, Url],\n    [Dimension, BadUrl],\n    [Dimension, '-'],\n    [Dimension, NumberToken],\n    [Dimension, Percentage],\n    [Dimension, Dimension],\n    [Dimension, CDC],\n\n    ['#', Ident],\n    ['#', FunctionToken],\n    ['#', Url],\n    ['#', BadUrl],\n    ['#', '-'],\n    ['#', NumberToken],\n    ['#', Percentage],\n    ['#', Dimension],\n    ['#', CDC], // https://github.com/w3c/csswg-drafts/pull/6874\n\n    ['-', Ident],\n    ['-', FunctionToken],\n    ['-', Url],\n    ['-', BadUrl],\n    ['-', '-'],\n    ['-', NumberToken],\n    ['-', Percentage],\n    ['-', Dimension],\n    ['-', CDC], // https://github.com/w3c/csswg-drafts/pull/6874\n\n    [NumberToken, Ident],\n    [NumberToken, FunctionToken],\n    [NumberToken, Url],\n    [NumberToken, BadUrl],\n    [NumberToken, NumberToken],\n    [NumberToken, Percentage],\n    [NumberToken, Dimension],\n    [NumberToken, '%'],\n    [NumberToken, CDC], // https://github.com/w3c/csswg-drafts/pull/6874\n\n    ['@', Ident],\n    ['@', FunctionToken],\n    ['@', Url],\n    ['@', BadUrl],\n    ['@', '-'],\n    ['@', CDC], // https://github.com/w3c/csswg-drafts/pull/6874\n\n    ['.', NumberToken],\n    ['.', Percentage],\n    ['.', Dimension],\n\n    ['+', NumberToken],\n    ['+', Percentage],\n    ['+', Dimension],\n\n    ['/', '*']\n];\n// validate with scripts/generate-safe\nconst safePairs = specPairs.concat([\n    [Ident, Hash],\n\n    [Dimension, Hash],\n\n    [Hash, Hash],\n\n    [AtKeyword, LeftParenthesis],\n    [AtKeyword, StringToken],\n    [AtKeyword, Colon],\n\n    [Percentage, Percentage],\n    [Percentage, Dimension],\n    [Percentage, FunctionToken],\n    [Percentage, '-'],\n\n    [RightParenthesis, Ident],\n    [RightParenthesis, FunctionToken],\n    [RightParenthesis, Percentage],\n    [RightParenthesis, Dimension],\n    [RightParenthesis, Hash],\n    [RightParenthesis, '-']\n]);\n\nfunction createMap(pairs) {\n    const isWhiteSpaceRequired = new Set(\n        pairs.map(([prev, next]) => (code(prev) << 16 | code(next)))\n    );\n\n    return function(prevCode, type, value) {\n        const nextCode = code(type, value);\n        const nextCharCode = value.charCodeAt(0);\n        const emitWs =\n            (nextCharCode === HYPHENMINUS &&\n                type !== Ident &&\n                type !== FunctionToken &&\n                type !== CDC) ||\n            (nextCharCode === PLUSSIGN)\n                ? isWhiteSpaceRequired.has(prevCode << 16 | nextCharCode << 8)\n                : isWhiteSpaceRequired.has(prevCode << 16 | nextCode);\n\n        if (emitWs) {\n            this.emit(' ', WhiteSpace, true);\n        }\n\n        return nextCode;\n    };\n}\n\nexport const spec = createMap(specPairs);\nexport const safe = createMap(safePairs);\n","import { tokenize, Delim, WhiteSpace } from '../tokenizer/index.js';\nimport { generateSourceMap } from './sourceMap.js';\nimport * as tokenBefore from './token-before.js';\n\nconst REVERSESOLIDUS = 0x005c; // U+005C REVERSE SOLIDUS (\\)\n\nfunction processChildren(node, delimeter) {\n    if (typeof delimeter === 'function') {\n        let prev = null;\n\n        node.children.forEach(node => {\n            if (prev !== null) {\n                delimeter.call(this, prev);\n            }\n\n            this.node(node);\n            prev = node;\n        });\n\n        return;\n    }\n\n    node.children.forEach(this.node, this);\n}\n\nfunction processChunk(chunk) {\n    tokenize(chunk, (type, start, end) => {\n        this.token(type, chunk.slice(start, end));\n    });\n}\n\nexport function createGenerator(config) {\n    const types = new Map();\n\n    for (let [name, item] of Object.entries(config.node)) {\n        const fn = item.generate || item;\n\n        if (typeof fn === 'function') {\n            types.set(name, item.generate || item);\n        }\n    }\n\n    return function(node, options) {\n        let buffer = '';\n        let prevCode = 0;\n        let handlers = {\n            node(node) {\n                if (types.has(node.type)) {\n                    types.get(node.type).call(publicApi, node);\n                } else {\n                    throw new Error('Unknown node type: ' + node.type);\n                }\n            },\n            tokenBefore: tokenBefore.safe,\n            token(type, value) {\n                prevCode = this.tokenBefore(prevCode, type, value);\n\n                this.emit(value, type, false);\n\n                if (type === Delim && value.charCodeAt(0) === REVERSESOLIDUS) {\n                    this.emit('\\n', WhiteSpace, true);\n                }\n            },\n            emit(value) {\n                buffer += value;\n            },\n            result() {\n                return buffer;\n            }\n        };\n\n        if (options) {\n            if (typeof options.decorator === 'function') {\n                handlers = options.decorator(handlers);\n            }\n\n            if (options.sourceMap) {\n                handlers = generateSourceMap(handlers);\n            }\n\n            if (options.mode in tokenBefore) {\n                handlers.tokenBefore = tokenBefore[options.mode];\n            }\n        }\n\n        const publicApi = {\n            node: (node) => handlers.node(node),\n            children: processChildren,\n            token: (type, value) => handlers.token(type, value),\n            tokenize: processChunk\n        };\n\n        handlers.node(node);\n\n        return handlers.result();\n    };\n};\n","import { List } from '../utils/List.js';\n\nexport function createConvertor(walk) {\n    return {\n        fromPlainObject(ast) {\n            walk(ast, {\n                enter(node) {\n                    if (node.children && node.children instanceof List === false) {\n                        node.children = new List().fromArray(node.children);\n                    }\n                }\n            });\n\n            return ast;\n        },\n        toPlainObject(ast) {\n            walk(ast, {\n                leave(node) {\n                    if (node.children && node.children instanceof List) {\n                        node.children = node.children.toArray();\n                    }\n                }\n            });\n\n            return ast;\n        }\n    };\n};\n","const { hasOwnProperty } = Object.prototype;\nconst noop = function() {};\n\nfunction ensureFunction(value) {\n    return typeof value === 'function' ? value : noop;\n}\n\nfunction invokeForType(fn, type) {\n    return function(node, item, list) {\n        if (node.type === type) {\n            fn.call(this, node, item, list);\n        }\n    };\n}\n\nfunction getWalkersFromStructure(name, nodeType) {\n    const structure = nodeType.structure;\n    const walkers = [];\n\n    for (const key in structure) {\n        if (hasOwnProperty.call(structure, key) === false) {\n            continue;\n        }\n\n        let fieldTypes = structure[key];\n        const walker = {\n            name: key,\n            type: false,\n            nullable: false\n        };\n\n        if (!Array.isArray(fieldTypes)) {\n            fieldTypes = [fieldTypes];\n        }\n\n        for (const fieldType of fieldTypes) {\n            if (fieldType === null) {\n                walker.nullable = true;\n            } else if (typeof fieldType === 'string') {\n                walker.type = 'node';\n            } else if (Array.isArray(fieldType)) {\n                walker.type = 'list';\n            }\n        }\n\n        if (walker.type) {\n            walkers.push(walker);\n        }\n    }\n\n    if (walkers.length) {\n        return {\n            context: nodeType.walkContext,\n            fields: walkers\n        };\n    }\n\n    return null;\n}\n\nfunction getTypesFromConfig(config) {\n    const types = {};\n\n    for (const name in config.node) {\n        if (hasOwnProperty.call(config.node, name)) {\n            const nodeType = config.node[name];\n\n            if (!nodeType.structure) {\n                throw new Error('Missed `structure` field in `' + name + '` node type definition');\n            }\n\n            types[name] = getWalkersFromStructure(name, nodeType);\n        }\n    }\n\n    return types;\n}\n\nfunction createTypeIterator(config, reverse) {\n    const fields = config.fields.slice();\n    const contextName = config.context;\n    const useContext = typeof contextName === 'string';\n\n    if (reverse) {\n        fields.reverse();\n    }\n\n    return function(node, context, walk, walkReducer) {\n        let prevContextValue;\n\n        if (useContext) {\n            prevContextValue = context[contextName];\n            context[contextName] = node;\n        }\n\n        for (const field of fields) {\n            const ref = node[field.name];\n\n            if (!field.nullable || ref) {\n                if (field.type === 'list') {\n                    const breakWalk = reverse\n                        ? ref.reduceRight(walkReducer, false)\n                        : ref.reduce(walkReducer, false);\n\n                    if (breakWalk) {\n                        return true;\n                    }\n                } else if (walk(ref)) {\n                    return true;\n                }\n            }\n        }\n\n        if (useContext) {\n            context[contextName] = prevContextValue;\n        }\n    };\n}\n\nfunction createFastTraveralMap({\n    StyleSheet,\n    Atrule,\n    Rule,\n    Block,\n    DeclarationList\n}) {\n    return {\n        Atrule: {\n            StyleSheet,\n            Atrule,\n            Rule,\n            Block\n        },\n        Rule: {\n            StyleSheet,\n            Atrule,\n            Rule,\n            Block\n        },\n        Declaration: {\n            StyleSheet,\n            Atrule,\n            Rule,\n            Block,\n            DeclarationList\n        }\n    };\n}\n\nexport function createWalker(config) {\n    const types = getTypesFromConfig(config);\n    const iteratorsNatural = {};\n    const iteratorsReverse = {};\n    const breakWalk = Symbol('break-walk');\n    const skipNode = Symbol('skip-node');\n\n    for (const name in types) {\n        if (hasOwnProperty.call(types, name) && types[name] !== null) {\n            iteratorsNatural[name] = createTypeIterator(types[name], false);\n            iteratorsReverse[name] = createTypeIterator(types[name], true);\n        }\n    }\n\n    const fastTraversalIteratorsNatural = createFastTraveralMap(iteratorsNatural);\n    const fastTraversalIteratorsReverse = createFastTraveralMap(iteratorsReverse);\n\n    const walk = function(root, options) {\n        function walkNode(node, item, list) {\n            const enterRet = enter.call(context, node, item, list);\n\n            if (enterRet === breakWalk) {\n                return true;\n            }\n\n            if (enterRet === skipNode) {\n                return false;\n            }\n\n            if (iterators.hasOwnProperty(node.type)) {\n                if (iterators[node.type](node, context, walkNode, walkReducer)) {\n                    return true;\n                }\n            }\n\n            if (leave.call(context, node, item, list) === breakWalk) {\n                return true;\n            }\n\n            return false;\n        }\n\n        let enter = noop;\n        let leave = noop;\n        let iterators = iteratorsNatural;\n        let walkReducer = (ret, data, item, list) => ret || walkNode(data, item, list);\n        const context = {\n            break: breakWalk,\n            skip: skipNode,\n\n            root,\n            stylesheet: null,\n            atrule: null,\n            atrulePrelude: null,\n            rule: null,\n            selector: null,\n            block: null,\n            declaration: null,\n            function: null\n        };\n\n        if (typeof options === 'function') {\n            enter = options;\n        } else if (options) {\n            enter = ensureFunction(options.enter);\n            leave = ensureFunction(options.leave);\n\n            if (options.reverse) {\n                iterators = iteratorsReverse;\n            }\n\n            if (options.visit) {\n                if (fastTraversalIteratorsNatural.hasOwnProperty(options.visit)) {\n                    iterators = options.reverse\n                        ? fastTraversalIteratorsReverse[options.visit]\n                        : fastTraversalIteratorsNatural[options.visit];\n                } else if (!types.hasOwnProperty(options.visit)) {\n                    throw new Error('Bad value `' + options.visit + '` for `visit` option (should be: ' + Object.keys(types).sort().join(', ') + ')');\n                }\n\n                enter = invokeForType(enter, options.visit);\n                leave = invokeForType(leave, options.visit);\n            }\n        }\n\n        if (enter === noop && leave === noop) {\n            throw new Error('Neither `enter` nor `leave` walker handler is set or both aren\\'t a function');\n        }\n\n        walkNode(root);\n    };\n\n    walk.break = breakWalk;\n    walk.skip = skipNode;\n\n    walk.find = function(ast, fn) {\n        let found = null;\n\n        walk(ast, function(node, item, list) {\n            if (fn.call(this, node, item, list)) {\n                found = node;\n                return breakWalk;\n            }\n        });\n\n        return found;\n    };\n\n    walk.findLast = function(ast, fn) {\n        let found = null;\n\n        walk(ast, {\n            reverse: true,\n            enter(node, item, list) {\n                if (fn.call(this, node, item, list)) {\n                    found = node;\n                    return breakWalk;\n                }\n            }\n        });\n\n        return found;\n    };\n\n    walk.findAll = function(ast, fn) {\n        const found = [];\n\n        walk(ast, function(node, item, list) {\n            if (fn.call(this, node, item, list)) {\n                found.push(node);\n            }\n        });\n\n        return found;\n    };\n\n    return walk;\n};\n","function noop(value) {\n    return value;\n}\n\nfunction generateMultiplier(multiplier) {\n    const { min, max, comma } = multiplier;\n\n    if (min === 0 && max === 0) {\n        return comma ? '#?' : '*';\n    }\n\n    if (min === 0 && max === 1) {\n        return '?';\n    }\n\n    if (min === 1 && max === 0) {\n        return comma ? '#' : '+';\n    }\n\n    if (min === 1 && max === 1) {\n        return '';\n    }\n\n    return (\n        (comma ? '#' : '') +\n        (min === max\n            ? '{' + min + '}'\n            : '{' + min + ',' + (max !== 0 ? max : '') + '}'\n        )\n    );\n}\n\nfunction generateTypeOpts(node) {\n    switch (node.type) {\n        case 'Range':\n            return (\n                ' [' +\n                (node.min === null ? '-∞' : node.min) +\n                ',' +\n                (node.max === null ? '∞' : node.max) +\n                ']'\n            );\n\n        default:\n            throw new Error('Unknown node type `' + node.type + '`');\n    }\n}\n\nfunction generateSequence(node, decorate, forceBraces, compact) {\n    const combinator = node.combinator === ' ' || compact ? node.combinator : ' ' + node.combinator + ' ';\n    const result = node.terms\n        .map(term => internalGenerate(term, decorate, forceBraces, compact))\n        .join(combinator);\n\n    if (node.explicit || forceBraces) {\n        return (compact || result[0] === ',' ? '[' : '[ ') + result + (compact ? ']' : ' ]');\n    }\n\n    return result;\n}\n\nfunction internalGenerate(node, decorate, forceBraces, compact) {\n    let result;\n\n    switch (node.type) {\n        case 'Group':\n            result =\n                generateSequence(node, decorate, forceBraces, compact) +\n                (node.disallowEmpty ? '!' : '');\n            break;\n\n        case 'Multiplier':\n            // return since node is a composition\n            return (\n                internalGenerate(node.term, decorate, forceBraces, compact) +\n                decorate(generateMultiplier(node), node)\n            );\n\n        case 'Type':\n            result = '<' + node.name + (node.opts ? decorate(generateTypeOpts(node.opts), node.opts) : '') + '>';\n            break;\n\n        case 'Property':\n            result = '<\\'' + node.name + '\\'>';\n            break;\n\n        case 'Keyword':\n            result = node.name;\n            break;\n\n        case 'AtKeyword':\n            result = '@' + node.name;\n            break;\n\n        case 'Function':\n            result = node.name + '(';\n            break;\n\n        case 'String':\n        case 'Token':\n            result = node.value;\n            break;\n\n        case 'Comma':\n            result = ',';\n            break;\n\n        default:\n            throw new Error('Unknown node type `' + node.type + '`');\n    }\n\n    return decorate(result, node);\n}\n\nexport function generate(node, options) {\n    let decorate = noop;\n    let forceBraces = false;\n    let compact = false;\n\n    if (typeof options === 'function') {\n        decorate = options;\n    } else if (options) {\n        forceBraces = Boolean(options.forceBraces);\n        compact = Boolean(options.compact);\n        if (typeof options.decorate === 'function') {\n            decorate = options.decorate;\n        }\n    }\n\n    return internalGenerate(node, decorate, forceBraces, compact);\n};\n","import { createCustomError } from '../utils/create-custom-error.js';\nimport { generate } from '../definition-syntax/generate.js';\n\nconst defaultLoc = { offset: 0, line: 1, column: 1 };\n\nfunction locateMismatch(matchResult, node) {\n    const tokens = matchResult.tokens;\n    const longestMatch = matchResult.longestMatch;\n    const mismatchNode = longestMatch < tokens.length ? tokens[longestMatch].node || null : null;\n    const badNode = mismatchNode !== node ? mismatchNode : null;\n    let mismatchOffset = 0;\n    let mismatchLength = 0;\n    let entries = 0;\n    let css = '';\n    let start;\n    let end;\n\n    for (let i = 0; i < tokens.length; i++) {\n        const token = tokens[i].value;\n\n        if (i === longestMatch) {\n            mismatchLength = token.length;\n            mismatchOffset = css.length;\n        }\n\n        if (badNode !== null && tokens[i].node === badNode) {\n            if (i <= longestMatch) {\n                entries++;\n            } else {\n                entries = 0;\n            }\n        }\n\n        css += token;\n    }\n\n    if (longestMatch === tokens.length || entries > 1) { // last\n        start = fromLoc(badNode || node, 'end') || buildLoc(defaultLoc, css);\n        end = buildLoc(start);\n    } else {\n        start = fromLoc(badNode, 'start') ||\n            buildLoc(fromLoc(node, 'start') || defaultLoc, css.slice(0, mismatchOffset));\n        end = fromLoc(badNode, 'end') ||\n            buildLoc(start, css.substr(mismatchOffset, mismatchLength));\n    }\n\n    return {\n        css,\n        mismatchOffset,\n        mismatchLength,\n        start,\n        end\n    };\n}\n\nfunction fromLoc(node, point) {\n    const value = node && node.loc && node.loc[point];\n\n    if (value) {\n        return 'line' in value ? buildLoc(value) : value;\n    }\n\n    return null;\n}\n\nfunction buildLoc({ offset, line, column }, extra) {\n    const loc = {\n        offset,\n        line,\n        column\n    };\n\n    if (extra) {\n        const lines = extra.split(/\\n|\\r\\n?|\\f/);\n\n        loc.offset += extra.length;\n        loc.line += lines.length - 1;\n        loc.column = lines.length === 1 ? loc.column + extra.length : lines.pop().length + 1;\n    }\n\n    return loc;\n}\n\nexport const SyntaxReferenceError = function(type, referenceName) {\n    const error = createCustomError(\n        'SyntaxReferenceError',\n        type + (referenceName ? ' `' + referenceName + '`' : '')\n    );\n\n    error.reference = referenceName;\n\n    return error;\n};\n\nexport const SyntaxMatchError = function(message, syntax, node, matchResult) {\n    const error = createCustomError('SyntaxMatchError', message);\n    const {\n        css,\n        mismatchOffset,\n        mismatchLength,\n        start,\n        end\n    } = locateMismatch(matchResult, node);\n\n    error.rawMessage = message;\n    error.syntax = syntax ? generate(syntax) : '<generic>';\n    error.css = css;\n    error.mismatchOffset = mismatchOffset;\n    error.mismatchLength = mismatchLength;\n    error.message = message + '\\n' +\n        '  syntax: ' + error.syntax + '\\n' +\n        '   value: ' + (css || '<empty string>') + '\\n' +\n        '  --------' + new Array(error.mismatchOffset + 1).join('-') + '^';\n\n    Object.assign(error, start);\n    error.loc = {\n        source: (node && node.loc && node.loc.source) || '<unknown>',\n        start,\n        end\n    };\n\n    return error;\n};\n","const keywords = new Map();\nconst properties = new Map();\nconst HYPHENMINUS = 45; // '-'.charCodeAt()\n\nexport const keyword = getKeywordDescriptor;\nexport const property = getPropertyDescriptor;\nexport const vendorPrefix = getVendorPrefix;\nexport function isCustomProperty(str, offset) {\n    offset = offset || 0;\n\n    return str.length - offset >= 2 &&\n           str.charCodeAt(offset) === HYPHENMINUS &&\n           str.charCodeAt(offset + 1) === HYPHENMINUS;\n}\n\nfunction getVendorPrefix(str, offset) {\n    offset = offset || 0;\n\n    // verdor prefix should be at least 3 chars length\n    if (str.length - offset >= 3) {\n        // vendor prefix starts with hyper minus following non-hyper minus\n        if (str.charCodeAt(offset) === HYPHENMINUS &&\n            str.charCodeAt(offset + 1) !== HYPHENMINUS) {\n            // vendor prefix should contain a hyper minus at the ending\n            const secondDashIndex = str.indexOf('-', offset + 2);\n\n            if (secondDashIndex !== -1) {\n                return str.substring(offset, secondDashIndex + 1);\n            }\n        }\n    }\n\n    return '';\n}\n\nfunction getKeywordDescriptor(keyword) {\n    if (keywords.has(keyword)) {\n        return keywords.get(keyword);\n    }\n\n    const name = keyword.toLowerCase();\n    let descriptor = keywords.get(name);\n\n    if (descriptor === undefined) {\n        const custom = isCustomProperty(name, 0);\n        const vendor = !custom ? getVendorPrefix(name, 0) : '';\n        descriptor = Object.freeze({\n            basename: name.substr(vendor.length),\n            name,\n            prefix: vendor,\n            vendor,\n            custom\n        });\n    }\n\n    keywords.set(keyword, descriptor);\n\n    return descriptor;\n}\n\nfunction getPropertyDescriptor(property) {\n    if (properties.has(property)) {\n        return properties.get(property);\n    }\n\n    let name = property;\n    let hack = property[0];\n\n    if (hack === '/') {\n        hack = property[1] === '/' ? '//' : '/';\n    } else if (hack !== '_' &&\n               hack !== '*' &&\n               hack !== '$' &&\n               hack !== '#' &&\n               hack !== '+' &&\n               hack !== '&') {\n        hack = '';\n    }\n\n    const custom = isCustomProperty(name, hack.length);\n\n    // re-use result when possible (the same as for lower case)\n    if (!custom) {\n        name = name.toLowerCase();\n        if (properties.has(name)) {\n            const descriptor = properties.get(name);\n            properties.set(property, descriptor);\n            return descriptor;\n        }\n    }\n\n    const vendor = !custom ? getVendorPrefix(name, hack.length) : '';\n    const prefix = name.substr(0, hack.length + vendor.length);\n    const descriptor = Object.freeze({\n        basename: name.substr(prefix.length),\n        name: name.substr(hack.length),\n        hack,\n        vendor,\n        prefix,\n        custom\n    });\n\n    properties.set(property, descriptor);\n\n    return descriptor;\n}\n","// https://drafts.csswg.org/css-cascade-5/\nexport const cssWideKeywords = [\n    'initial',\n    'inherit',\n    'unset',\n    'revert',\n    'revert-layer'\n];\n","import {\n    isDigit,\n    cmpChar,\n    Delim,\n    WhiteSpace,\n    Comment,\n    Ident,\n    Number as NumberToken,\n    Dimension\n} from '../tokenizer/index.js';\n\nconst PLUSSIGN = 0x002B;    // U+002B PLUS SIGN (+)\nconst HYPHENMINUS = 0x002D; // U+002D HYPHEN-MINUS (-)\nconst N = 0x006E;           // U+006E LATIN SMALL LETTER N (n)\nconst DISALLOW_SIGN = true;\nconst ALLOW_SIGN = false;\n\nfunction isDelim(token, code) {\n    return token !== null && token.type === Delim && token.value.charCodeAt(0) === code;\n}\n\nfunction skipSC(token, offset, getNextToken) {\n    while (token !== null && (token.type === WhiteSpace || token.type === Comment)) {\n        token = getNextToken(++offset);\n    }\n\n    return offset;\n}\n\nfunction checkInteger(token, valueOffset, disallowSign, offset) {\n    if (!token) {\n        return 0;\n    }\n\n    const code = token.value.charCodeAt(valueOffset);\n\n    if (code === PLUSSIGN || code === HYPHENMINUS) {\n        if (disallowSign) {\n            // Number sign is not allowed\n            return 0;\n        }\n        valueOffset++;\n    }\n\n    for (; valueOffset < token.value.length; valueOffset++) {\n        if (!isDigit(token.value.charCodeAt(valueOffset))) {\n            // Integer is expected\n            return 0;\n        }\n    }\n\n    return offset + 1;\n}\n\n// ... <signed-integer>\n// ... ['+' | '-'] <signless-integer>\nfunction consumeB(token, offset_, getNextToken) {\n    let sign = false;\n    let offset = skipSC(token, offset_, getNextToken);\n\n    token = getNextToken(offset);\n\n    if (token === null) {\n        return offset_;\n    }\n\n    if (token.type !== NumberToken) {\n        if (isDelim(token, PLUSSIGN) || isDelim(token, HYPHENMINUS)) {\n            sign = true;\n            offset = skipSC(getNextToken(++offset), offset, getNextToken);\n            token = getNextToken(offset);\n\n            if (token === null || token.type !== NumberToken) {\n                return 0;\n            }\n        } else {\n            return offset_;\n        }\n    }\n\n    if (!sign) {\n        const code = token.value.charCodeAt(0);\n        if (code !== PLUSSIGN && code !== HYPHENMINUS) {\n            // Number sign is expected\n            return 0;\n        }\n    }\n\n    return checkInteger(token, sign ? 0 : 1, sign, offset);\n}\n\n// An+B microsyntax https://www.w3.org/TR/css-syntax-3/#anb\nexport default function anPlusB(token, getNextToken) {\n    /* eslint-disable brace-style*/\n    let offset = 0;\n\n    if (!token) {\n        return 0;\n    }\n\n    // <integer>\n    if (token.type === NumberToken) {\n        return checkInteger(token, 0, ALLOW_SIGN, offset); // b\n    }\n\n    // -n\n    // -n <signed-integer>\n    // -n ['+' | '-'] <signless-integer>\n    // -n- <signless-integer>\n    // <dashndashdigit-ident>\n    else if (token.type === Ident && token.value.charCodeAt(0) === HYPHENMINUS) {\n        // expect 1st char is N\n        if (!cmpChar(token.value, 1, N)) {\n            return 0;\n        }\n\n        switch (token.value.length) {\n            // -n\n            // -n <signed-integer>\n            // -n ['+' | '-'] <signless-integer>\n            case 2:\n                return consumeB(getNextToken(++offset), offset, getNextToken);\n\n            // -n- <signless-integer>\n            case 3:\n                if (token.value.charCodeAt(2) !== HYPHENMINUS) {\n                    return 0;\n                }\n\n                offset = skipSC(getNextToken(++offset), offset, getNextToken);\n                token = getNextToken(offset);\n\n                return checkInteger(token, 0, DISALLOW_SIGN, offset);\n\n            // <dashndashdigit-ident>\n            default:\n                if (token.value.charCodeAt(2) !== HYPHENMINUS) {\n                    return 0;\n                }\n\n                return checkInteger(token, 3, DISALLOW_SIGN, offset);\n        }\n    }\n\n    // '+'? n\n    // '+'? n <signed-integer>\n    // '+'? n ['+' | '-'] <signless-integer>\n    // '+'? n- <signless-integer>\n    // '+'? <ndashdigit-ident>\n    else if (token.type === Ident || (isDelim(token, PLUSSIGN) && getNextToken(offset + 1).type === Ident)) {\n        // just ignore a plus\n        if (token.type !== Ident) {\n            token = getNextToken(++offset);\n        }\n\n        if (token === null || !cmpChar(token.value, 0, N)) {\n            return 0;\n        }\n\n        switch (token.value.length) {\n            // '+'? n\n            // '+'? n <signed-integer>\n            // '+'? n ['+' | '-'] <signless-integer>\n            case 1:\n                return consumeB(getNextToken(++offset), offset, getNextToken);\n\n            // '+'? n- <signless-integer>\n            case 2:\n                if (token.value.charCodeAt(1) !== HYPHENMINUS) {\n                    return 0;\n                }\n\n                offset = skipSC(getNextToken(++offset), offset, getNextToken);\n                token = getNextToken(offset);\n\n                return checkInteger(token, 0, DISALLOW_SIGN, offset);\n\n            // '+'? <ndashdigit-ident>\n            default:\n                if (token.value.charCodeAt(1) !== HYPHENMINUS) {\n                    return 0;\n                }\n\n                return checkInteger(token, 2, DISALLOW_SIGN, offset);\n        }\n    }\n\n    // <ndashdigit-dimension>\n    // <ndash-dimension> <signless-integer>\n    // <n-dimension>\n    // <n-dimension> <signed-integer>\n    // <n-dimension> ['+' | '-'] <signless-integer>\n    else if (token.type === Dimension) {\n        let code = token.value.charCodeAt(0);\n        let sign = code === PLUSSIGN || code === HYPHENMINUS ? 1 : 0;\n        let i = sign;\n\n        for (; i < token.value.length; i++) {\n            if (!isDigit(token.value.charCodeAt(i))) {\n                break;\n            }\n        }\n\n        if (i === sign) {\n            // Integer is expected\n            return 0;\n        }\n\n        if (!cmpChar(token.value, i, N)) {\n            return 0;\n        }\n\n        // <n-dimension>\n        // <n-dimension> <signed-integer>\n        // <n-dimension> ['+' | '-'] <signless-integer>\n        if (i + 1 === token.value.length) {\n            return consumeB(getNextToken(++offset), offset, getNextToken);\n        } else {\n            if (token.value.charCodeAt(i + 1) !== HYPHENMINUS) {\n                return 0;\n            }\n\n            // <ndash-dimension> <signless-integer>\n            if (i + 2 === token.value.length) {\n                offset = skipSC(getNextToken(++offset), offset, getNextToken);\n                token = getNextToken(offset);\n\n                return checkInteger(token, 0, DISALLOW_SIGN, offset);\n            }\n            // <ndashdigit-dimension>\n            else {\n                return checkInteger(token, i + 2, DISALLOW_SIGN, offset);\n            }\n        }\n    }\n\n    return 0;\n};\n","import {\n    isHexDigit,\n    cmpChar,\n    Ident,\n    Delim,\n    Number as NumberToken,\n    Dimension\n} from '../tokenizer/index.js';\n\nconst PLUSSIGN = 0x002B;     // U+002B PLUS SIGN (+)\nconst HYPHENMINUS = 0x002D;  // U+002D HYPHEN-MINUS (-)\nconst QUESTIONMARK = 0x003F; // U+003F QUESTION MARK (?)\nconst U = 0x0075;            // U+0075 LATIN SMALL LETTER U (u)\n\nfunction isDelim(token, code) {\n    return token !== null && token.type === Delim && token.value.charCodeAt(0) === code;\n}\n\nfunction startsWith(token, code) {\n    return token.value.charCodeAt(0) === code;\n}\n\nfunction hexSequence(token, offset, allowDash) {\n    let hexlen = 0;\n\n    for (let pos = offset; pos < token.value.length; pos++) {\n        const code = token.value.charCodeAt(pos);\n\n        if (code === HYPHENMINUS && allowDash && hexlen !== 0) {\n            hexSequence(token, offset + hexlen + 1, false);\n            return 6; // dissallow following question marks\n        }\n\n        if (!isHexDigit(code)) {\n            return 0; // not a hex digit\n        }\n\n        if (++hexlen > 6) {\n            return 0; // too many hex digits\n        };\n    }\n\n    return hexlen;\n}\n\nfunction withQuestionMarkSequence(consumed, length, getNextToken) {\n    if (!consumed) {\n        return 0; // nothing consumed\n    }\n\n    while (isDelim(getNextToken(length), QUESTIONMARK)) {\n        if (++consumed > 6) {\n            return 0; // too many question marks\n        }\n\n        length++;\n    }\n\n    return length;\n}\n\n// https://drafts.csswg.org/css-syntax/#urange\n// Informally, the <urange> production has three forms:\n// U+0001\n//      Defines a range consisting of a single code point, in this case the code point \"1\".\n// U+0001-00ff\n//      Defines a range of codepoints between the first and the second value, in this case\n//      the range between \"1\" and \"ff\" (255 in decimal) inclusive.\n// U+00??\n//      Defines a range of codepoints where the \"?\" characters range over all hex digits,\n//      in this case defining the same as the value U+0000-00ff.\n// In each form, a maximum of 6 digits is allowed for each hexadecimal number (if you treat \"?\" as a hexadecimal digit).\n//\n// <urange> =\n//   u '+' <ident-token> '?'* |\n//   u <dimension-token> '?'* |\n//   u <number-token> '?'* |\n//   u <number-token> <dimension-token> |\n//   u <number-token> <number-token> |\n//   u '+' '?'+\nexport default function urange(token, getNextToken) {\n    let length = 0;\n\n    // should start with `u` or `U`\n    if (token === null || token.type !== Ident || !cmpChar(token.value, 0, U)) {\n        return 0;\n    }\n\n    token = getNextToken(++length);\n    if (token === null) {\n        return 0;\n    }\n\n    // u '+' <ident-token> '?'*\n    // u '+' '?'+\n    if (isDelim(token, PLUSSIGN)) {\n        token = getNextToken(++length);\n        if (token === null) {\n            return 0;\n        }\n\n        if (token.type === Ident) {\n            // u '+' <ident-token> '?'*\n            return withQuestionMarkSequence(hexSequence(token, 0, true), ++length, getNextToken);\n        }\n\n        if (isDelim(token, QUESTIONMARK)) {\n            // u '+' '?'+\n            return withQuestionMarkSequence(1, ++length, getNextToken);\n        }\n\n        // Hex digit or question mark is expected\n        return 0;\n    }\n\n    // u <number-token> '?'*\n    // u <number-token> <dimension-token>\n    // u <number-token> <number-token>\n    if (token.type === NumberToken) {\n        const consumedHexLength = hexSequence(token, 1, true);\n        if (consumedHexLength === 0) {\n            return 0;\n        }\n\n        token = getNextToken(++length);\n        if (token === null) {\n            // u <number-token> <eof>\n            return length;\n        }\n\n        if (token.type === Dimension || token.type === NumberToken) {\n            // u <number-token> <dimension-token>\n            // u <number-token> <number-token>\n            if (!startsWith(token, HYPHENMINUS) || !hexSequence(token, 1, false)) {\n                return 0;\n            }\n\n            return length + 1;\n        }\n\n        // u <number-token> '?'*\n        return withQuestionMarkSequence(consumedHexLength, length, getNextToken);\n    }\n\n    // u <dimension-token> '?'*\n    if (token.type === Dimension) {\n        return withQuestionMarkSequence(hexSequence(token, 1, true), ++length, getNextToken);\n    }\n\n    return 0;\n};\n","import { cssWideKeywords } from './generic-const.js';\nimport anPlusB from './generic-an-plus-b.js';\nimport urange from './generic-urange.js';\nimport {\n    isIdentifierStart,\n    isHexDigit,\n    isDigit,\n    cmpStr,\n    consumeNumber,\n\n    Ident,\n    Function as FunctionToken,\n    AtKeyword,\n    Hash,\n    String as StringToken,\n    BadString,\n    Url,\n    BadUrl,\n    Delim,\n    Number as NumberToken,\n    Percentage,\n    Dimension,\n    WhiteSpace,\n    CDO,\n    CDC,\n    Colon,\n    Semicolon,\n    Comma,\n    LeftSquareBracket,\n    RightSquareBracket,\n    LeftParenthesis,\n    RightParenthesis,\n    LeftCurlyBracket,\n    RightCurlyBracket\n} from '../tokenizer/index.js';\n\nconst calcFunctionNames = ['calc(', '-moz-calc(', '-webkit-calc('];\nconst balancePair = new Map([\n    [FunctionToken, RightParenthesis],\n    [LeftParenthesis, RightParenthesis],\n    [LeftSquareBracket, RightSquareBracket],\n    [LeftCurlyBracket, RightCurlyBracket]\n]);\n\n// safe char code getter\nfunction charCodeAt(str, index) {\n    return index < str.length ? str.charCodeAt(index) : 0;\n}\n\nfunction eqStr(actual, expected) {\n    return cmpStr(actual, 0, actual.length, expected);\n}\n\nfunction eqStrAny(actual, expected) {\n    for (let i = 0; i < expected.length; i++) {\n        if (eqStr(actual, expected[i])) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\n// IE postfix hack, i.e. 123\\0 or 123px\\9\nfunction isPostfixIeHack(str, offset) {\n    if (offset !== str.length - 2) {\n        return false;\n    }\n\n    return (\n        charCodeAt(str, offset) === 0x005C &&  // U+005C REVERSE SOLIDUS (\\)\n        isDigit(charCodeAt(str, offset + 1))\n    );\n}\n\nfunction outOfRange(opts, value, numEnd) {\n    if (opts && opts.type === 'Range') {\n        const num = Number(\n            numEnd !== undefined && numEnd !== value.length\n                ? value.substr(0, numEnd)\n                : value\n        );\n\n        if (isNaN(num)) {\n            return true;\n        }\n\n        // FIXME: when opts.min is a string it's a dimension, skip a range validation\n        // for now since it requires a type covertation which is not implmented yet\n        if (opts.min !== null && num < opts.min && typeof opts.min !== 'string') {\n            return true;\n        }\n\n        // FIXME: when opts.max is a string it's a dimension, skip a range validation\n        // for now since it requires a type covertation which is not implmented yet\n        if (opts.max !== null && num > opts.max && typeof opts.max !== 'string') {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction consumeFunction(token, getNextToken) {\n    let balanceCloseType = 0;\n    let balanceStash = [];\n    let length = 0;\n\n    // balanced token consuming\n    scan:\n    do {\n        switch (token.type) {\n            case RightCurlyBracket:\n            case RightParenthesis:\n            case RightSquareBracket:\n                if (token.type !== balanceCloseType) {\n                    break scan;\n                }\n\n                balanceCloseType = balanceStash.pop();\n\n                if (balanceStash.length === 0) {\n                    length++;\n                    break scan;\n                }\n\n                break;\n\n            case FunctionToken:\n            case LeftParenthesis:\n            case LeftSquareBracket:\n            case LeftCurlyBracket:\n                balanceStash.push(balanceCloseType);\n                balanceCloseType = balancePair.get(token.type);\n                break;\n        }\n\n        length++;\n    } while (token = getNextToken(length));\n\n    return length;\n}\n\n// TODO: implement\n// can be used wherever <length>, <frequency>, <angle>, <time>, <percentage>, <number>, or <integer> values are allowed\n// https://drafts.csswg.org/css-values/#calc-notation\nfunction calc(next) {\n    return function(token, getNextToken, opts) {\n        if (token === null) {\n            return 0;\n        }\n\n        if (token.type === FunctionToken && eqStrAny(token.value, calcFunctionNames)) {\n            return consumeFunction(token, getNextToken);\n        }\n\n        return next(token, getNextToken, opts);\n    };\n}\n\nfunction tokenType(expectedTokenType) {\n    return function(token) {\n        if (token === null || token.type !== expectedTokenType) {\n            return 0;\n        }\n\n        return 1;\n    };\n}\n\n// =========================\n// Complex types\n//\n\n// https://drafts.csswg.org/css-values-4/#custom-idents\n// 4.2. Author-defined Identifiers: the <custom-ident> type\n// Some properties accept arbitrary author-defined identifiers as a component value.\n// This generic data type is denoted by <custom-ident>, and represents any valid CSS identifier\n// that would not be misinterpreted as a pre-defined keyword in that property’s value definition.\n//\n// See also: https://developer.mozilla.org/en-US/docs/Web/CSS/custom-ident\nfunction customIdent(token) {\n    if (token === null || token.type !== Ident) {\n        return 0;\n    }\n\n    const name = token.value.toLowerCase();\n\n    // The CSS-wide keywords are not valid <custom-ident>s\n    if (eqStrAny(name, cssWideKeywords)) {\n        return 0;\n    }\n\n    // The default keyword is reserved and is also not a valid <custom-ident>\n    if (eqStr(name, 'default')) {\n        return 0;\n    }\n\n    // TODO: ignore property specific keywords (as described https://developer.mozilla.org/en-US/docs/Web/CSS/custom-ident)\n    // Specifications using <custom-ident> must specify clearly what other keywords\n    // are excluded from <custom-ident>, if any—for example by saying that any pre-defined keywords\n    // in that property’s value definition are excluded. Excluded keywords are excluded\n    // in all ASCII case permutations.\n\n    return 1;\n}\n\n// https://drafts.csswg.org/css-values-4/#dashed-idents\n// The <dashed-ident> production is a <custom-ident>, with all the case-sensitivity that implies,\n// with the additional restriction that it must start with two dashes (U+002D HYPHEN-MINUS).\nfunction dashedIdent(token) {\n    if (token === null || token.type !== Ident) {\n        return 0;\n    }\n\n    // ... must start with two dashes (U+002D HYPHEN-MINUS)\n    if (charCodeAt(token.value, 0) !== 0x002D || charCodeAt(token.value, 1) !== 0x002D) {\n        return 0;\n    }\n\n    return 1;\n}\n\n// https://drafts.csswg.org/css-variables/#typedef-custom-property-name\n// A custom property is any property whose name starts with two dashes (U+002D HYPHEN-MINUS), like --foo.\n// The <custom-property-name> production corresponds to this: it’s defined as any <dashed-ident>\n// (a valid identifier that starts with two dashes), except -- itself, which is reserved for future use by CSS.\nfunction customPropertyName(token) {\n    // ... it’s defined as any <dashed-ident>\n    if (!dashedIdent(token)) {\n        return 0;\n    }\n\n    // ... except -- itself, which is reserved for future use by CSS\n    if (token.value === '--') {\n        return 0;\n    }\n\n    return 1;\n}\n\n// https://drafts.csswg.org/css-color-4/#hex-notation\n// The syntax of a <hex-color> is a <hash-token> token whose value consists of 3, 4, 6, or 8 hexadecimal digits.\n// In other words, a hex color is written as a hash character, \"#\", followed by some number of digits 0-9 or\n// letters a-f (the case of the letters doesn’t matter - #00ff00 is identical to #00FF00).\nfunction hexColor(token) {\n    if (token === null || token.type !== Hash) {\n        return 0;\n    }\n\n    const length = token.value.length;\n\n    // valid values (length): #rgb (4), #rgba (5), #rrggbb (7), #rrggbbaa (9)\n    if (length !== 4 && length !== 5 && length !== 7 && length !== 9) {\n        return 0;\n    }\n\n    for (let i = 1; i < length; i++) {\n        if (!isHexDigit(charCodeAt(token.value, i))) {\n            return 0;\n        }\n    }\n\n    return 1;\n}\n\nfunction idSelector(token) {\n    if (token === null || token.type !== Hash) {\n        return 0;\n    }\n\n    if (!isIdentifierStart(charCodeAt(token.value, 1), charCodeAt(token.value, 2), charCodeAt(token.value, 3))) {\n        return 0;\n    }\n\n    return 1;\n}\n\n// https://drafts.csswg.org/css-syntax/#any-value\n// It represents the entirety of what a valid declaration can have as its value.\nfunction declarationValue(token, getNextToken) {\n    if (!token) {\n        return 0;\n    }\n\n    let balanceCloseType = 0;\n    let balanceStash = [];\n    let length = 0;\n\n    // The <declaration-value> production matches any sequence of one or more tokens,\n    // so long as the sequence does not contain ...\n    scan:\n    do {\n        switch (token.type) {\n            // ... <bad-string-token>, <bad-url-token>,\n            case BadString:\n            case BadUrl:\n                break scan;\n\n            // ... unmatched <)-token>, <]-token>, or <}-token>,\n            case RightCurlyBracket:\n            case RightParenthesis:\n            case RightSquareBracket:\n                if (token.type !== balanceCloseType) {\n                    break scan;\n                }\n\n                balanceCloseType = balanceStash.pop();\n                break;\n\n            // ... or top-level <semicolon-token> tokens\n            case Semicolon:\n                if (balanceCloseType === 0) {\n                    break scan;\n                }\n\n                break;\n\n            // ... or <delim-token> tokens with a value of \"!\"\n            case Delim:\n                if (balanceCloseType === 0 && token.value === '!') {\n                    break scan;\n                }\n\n                break;\n\n            case FunctionToken:\n            case LeftParenthesis:\n            case LeftSquareBracket:\n            case LeftCurlyBracket:\n                balanceStash.push(balanceCloseType);\n                balanceCloseType = balancePair.get(token.type);\n                break;\n        }\n\n        length++;\n    } while (token = getNextToken(length));\n\n    return length;\n}\n\n// https://drafts.csswg.org/css-syntax/#any-value\n// The <any-value> production is identical to <declaration-value>, but also\n// allows top-level <semicolon-token> tokens and <delim-token> tokens\n// with a value of \"!\". It represents the entirety of what valid CSS can be in any context.\nfunction anyValue(token, getNextToken) {\n    if (!token) {\n        return 0;\n    }\n\n    let balanceCloseType = 0;\n    let balanceStash = [];\n    let length = 0;\n\n    // The <any-value> production matches any sequence of one or more tokens,\n    // so long as the sequence ...\n    scan:\n    do {\n        switch (token.type) {\n            // ... does not contain <bad-string-token>, <bad-url-token>,\n            case BadString:\n            case BadUrl:\n                break scan;\n\n            // ... unmatched <)-token>, <]-token>, or <}-token>,\n            case RightCurlyBracket:\n            case RightParenthesis:\n            case RightSquareBracket:\n                if (token.type !== balanceCloseType) {\n                    break scan;\n                }\n\n                balanceCloseType = balanceStash.pop();\n                break;\n\n            case FunctionToken:\n            case LeftParenthesis:\n            case LeftSquareBracket:\n            case LeftCurlyBracket:\n                balanceStash.push(balanceCloseType);\n                balanceCloseType = balancePair.get(token.type);\n                break;\n        }\n\n        length++;\n    } while (token = getNextToken(length));\n\n    return length;\n}\n\n// =========================\n// Dimensions\n//\n\nfunction dimension(type) {\n    if (type) {\n        type = new Set(type);\n    }\n\n    return function(token, getNextToken, opts) {\n        if (token === null || token.type !== Dimension) {\n            return 0;\n        }\n\n        const numberEnd = consumeNumber(token.value, 0);\n\n        // check unit\n        if (type !== null) {\n            // check for IE postfix hack, i.e. 123px\\0 or 123px\\9\n            const reverseSolidusOffset = token.value.indexOf('\\\\', numberEnd);\n            const unit = reverseSolidusOffset === -1 || !isPostfixIeHack(token.value, reverseSolidusOffset)\n                ? token.value.substr(numberEnd)\n                : token.value.substring(numberEnd, reverseSolidusOffset);\n\n            if (type.has(unit.toLowerCase()) === false) {\n                return 0;\n            }\n        }\n\n        // check range if specified\n        if (outOfRange(opts, token.value, numberEnd)) {\n            return 0;\n        }\n\n        return 1;\n    };\n}\n\n// =========================\n// Percentage\n//\n\n// §5.5. Percentages: the <percentage> type\n// https://drafts.csswg.org/css-values-4/#percentages\nfunction percentage(token, getNextToken, opts) {\n    // ... corresponds to the <percentage-token> production\n    if (token === null || token.type !== Percentage) {\n        return 0;\n    }\n\n    // check range if specified\n    if (outOfRange(opts, token.value, token.value.length - 1)) {\n        return 0;\n    }\n\n    return 1;\n}\n\n// =========================\n// Numeric\n//\n\n// https://drafts.csswg.org/css-values-4/#numbers\n// The value <zero> represents a literal number with the value 0. Expressions that merely\n// evaluate to a <number> with the value 0 (for example, calc(0)) do not match <zero>;\n// only literal <number-token>s do.\nfunction zero(next) {\n    if (typeof next !== 'function') {\n        next = function() {\n            return 0;\n        };\n    }\n\n    return function(token, getNextToken, opts) {\n        if (token !== null && token.type === NumberToken) {\n            if (Number(token.value) === 0) {\n                return 1;\n            }\n        }\n\n        return next(token, getNextToken, opts);\n    };\n}\n\n// § 5.3. Real Numbers: the <number> type\n// https://drafts.csswg.org/css-values-4/#numbers\n// Number values are denoted by <number>, and represent real numbers, possibly with a fractional component.\n// ... It corresponds to the <number-token> production\nfunction number(token, getNextToken, opts) {\n    if (token === null) {\n        return 0;\n    }\n\n    const numberEnd = consumeNumber(token.value, 0);\n    const isNumber = numberEnd === token.value.length;\n    if (!isNumber && !isPostfixIeHack(token.value, numberEnd)) {\n        return 0;\n    }\n\n    // check range if specified\n    if (outOfRange(opts, token.value, numberEnd)) {\n        return 0;\n    }\n\n    return 1;\n}\n\n// §5.2. Integers: the <integer> type\n// https://drafts.csswg.org/css-values-4/#integers\nfunction integer(token, getNextToken, opts) {\n    // ... corresponds to a subset of the <number-token> production\n    if (token === null || token.type !== NumberToken) {\n        return 0;\n    }\n\n    // The first digit of an integer may be immediately preceded by `-` or `+` to indicate the integer’s sign.\n    let i = charCodeAt(token.value, 0) === 0x002B ||       // U+002B PLUS SIGN (+)\n            charCodeAt(token.value, 0) === 0x002D ? 1 : 0; // U+002D HYPHEN-MINUS (-)\n\n    // When written literally, an integer is one or more decimal digits 0 through 9 ...\n    for (; i < token.value.length; i++) {\n        if (!isDigit(charCodeAt(token.value, i))) {\n            return 0;\n        }\n    }\n\n    // check range if specified\n    if (outOfRange(opts, token.value, i)) {\n        return 0;\n    }\n\n    return 1;\n}\n\n// token types\nexport const tokenTypes = {\n    'ident-token': tokenType(Ident),\n    'function-token': tokenType(FunctionToken),\n    'at-keyword-token': tokenType(AtKeyword),\n    'hash-token': tokenType(Hash),\n    'string-token': tokenType(StringToken),\n    'bad-string-token': tokenType(BadString),\n    'url-token': tokenType(Url),\n    'bad-url-token': tokenType(BadUrl),\n    'delim-token': tokenType(Delim),\n    'number-token': tokenType(NumberToken),\n    'percentage-token': tokenType(Percentage),\n    'dimension-token': tokenType(Dimension),\n    'whitespace-token': tokenType(WhiteSpace),\n    'CDO-token': tokenType(CDO),\n    'CDC-token': tokenType(CDC),\n    'colon-token': tokenType(Colon),\n    'semicolon-token': tokenType(Semicolon),\n    'comma-token': tokenType(Comma),\n    '[-token': tokenType(LeftSquareBracket),\n    ']-token': tokenType(RightSquareBracket),\n    '(-token': tokenType(LeftParenthesis),\n    ')-token': tokenType(RightParenthesis),\n    '{-token': tokenType(LeftCurlyBracket),\n    '}-token': tokenType(RightCurlyBracket)\n};\n\n// token production types\nexport const productionTypes = {\n    // token type aliases\n    'string': tokenType(StringToken),\n    'ident': tokenType(Ident),\n\n    // percentage\n    'percentage': calc(percentage),\n\n    // numeric\n    'zero': zero(),\n    'number': calc(number),\n    'integer': calc(integer),\n\n    // complex types\n    'custom-ident': customIdent,\n    'dashed-ident': dashedIdent,\n    'custom-property-name': customPropertyName,\n    'hex-color': hexColor,\n    'id-selector': idSelector, // element( <id-selector> )\n    'an-plus-b': anPlusB,\n    'urange': urange,\n    'declaration-value': declarationValue,\n    'any-value': anyValue\n};\n\nexport const unitGroups = [\n    'length',\n    'angle',\n    'time',\n    'frequency',\n    'resolution',\n    'flex',\n    'decibel',\n    'semitones'\n];\n\n// dimensions types depend on units set\nexport function createDemensionTypes(units) {\n    const {\n        angle,\n        decibel,\n        frequency,\n        flex,\n        length,\n        resolution,\n        semitones,\n        time\n    } = units || {};\n\n    return {\n        'dimension': calc(dimension(null)),\n        'angle': calc(dimension(angle)),\n        'decibel': calc(dimension(decibel)),\n        'frequency': calc(dimension(frequency)),\n        'flex': calc(dimension(flex)),\n        'length': calc(zero(dimension(length))),\n        'resolution': calc(dimension(resolution)),\n        'semitones': calc(dimension(semitones)),\n        'time': calc(dimension(time))\n    };\n}\n\nexport function createGenericTypes(units) {\n    return {\n        ...tokenTypes,\n        ...productionTypes,\n        ...createDemensionTypes(units)\n    };\n};\n","export const length = [\n    // absolute length units https://www.w3.org/TR/css-values-3/#lengths\n    'cm', 'mm', 'q', 'in', 'pt', 'pc', 'px',\n    // font-relative length units https://drafts.csswg.org/css-values-4/#font-relative-lengths\n    'em', 'rem',\n    'ex', 'rex',\n    'cap', 'rcap',\n    'ch', 'rch',\n    'ic', 'ric',\n    'lh', 'rlh',\n    // viewport-percentage lengths https://drafts.csswg.org/css-values-4/#viewport-relative-lengths\n    'vw', 'svw', 'lvw', 'dvw',\n    'vh', 'svh', 'lvh', 'dvh',\n    'vi', 'svi', 'lvi', 'dvi',\n    'vb', 'svb', 'lvb', 'dvb',\n    'vmin', 'svmin', 'lvmin', 'dvmin',\n    'vmax', 'svmax', 'lvmax', 'dvmax',\n    // container relative lengths https://drafts.csswg.org/css-contain-3/#container-lengths\n    'cqw', 'cqh', 'cqi', 'cqb', 'cqmin', 'cqmax'\n];\nexport const angle = ['deg', 'grad', 'rad', 'turn'];    // https://www.w3.org/TR/css-values-3/#angles\nexport const time = ['s', 'ms'];                        // https://www.w3.org/TR/css-values-3/#time\nexport const frequency = ['hz', 'khz'];                 // https://www.w3.org/TR/css-values-3/#frequency\nexport const resolution = ['dpi', 'dpcm', 'dppx', 'x']; // https://www.w3.org/TR/css-values-3/#resolution\nexport const flex = ['fr'];                             // https://drafts.csswg.org/css-grid/#fr-unit\nexport const decibel = ['db'];                          // https://www.w3.org/TR/css3-speech/#mixing-props-voice-volume\nexport const semitones = ['st'];                        // https://www.w3.org/TR/css3-speech/#voice-props-voice-pitch\n","import { createCustomError } from '../utils/create-custom-error.js';\n\nexport function SyntaxError(message, input, offset) {\n    return Object.assign(createCustomError('SyntaxError', message), {\n        input,\n        offset,\n        rawMessage: message,\n        message: message + '\\n' +\n            '  ' + input + '\\n' +\n            '--' + new Array((offset || input.length) + 1).join('-') + '^'\n    });\n};\n","import { SyntaxError } from './SyntaxError.js';\n\nconst TAB = 9;\nconst N = 10;\nconst F = 12;\nconst R = 13;\nconst SPACE = 32;\n\nexport class Tokenizer {\n    constructor(str) {\n        this.str = str;\n        this.pos = 0;\n    }\n    charCodeAt(pos) {\n        return pos < this.str.length ? this.str.charCodeAt(pos) : 0;\n    }\n    charCode() {\n        return this.charCodeAt(this.pos);\n    }\n    nextCharCode() {\n        return this.charCodeAt(this.pos + 1);\n    }\n    nextNonWsCode(pos) {\n        return this.charCodeAt(this.findWsEnd(pos));\n    }\n    skipWs() {\n        this.pos = this.findWsEnd(this.pos);\n    }\n    findWsEnd(pos) {\n        for (; pos < this.str.length; pos++) {\n            const code = this.str.charCodeAt(pos);\n            if (code !== R && code !== N && code !== F && code !== SPACE && code !== TAB) {\n                break;\n            }\n        }\n\n        return pos;\n    }\n    substringToPos(end) {\n        return this.str.substring(this.pos, this.pos = end);\n    }\n    eat(code) {\n        if (this.charCode() !== code) {\n            this.error('Expect `' + String.fromCharCode(code) + '`');\n        }\n\n        this.pos++;\n    }\n    peek() {\n        return this.pos < this.str.length ? this.str.charAt(this.pos++) : '';\n    }\n    error(message) {\n        throw new SyntaxError(message, this.str, this.pos);\n    }\n};\n","import { Tokenizer } from './tokenizer.js';\n\nconst TAB = 9;\nconst N = 10;\nconst F = 12;\nconst R = 13;\nconst SPACE = 32;\nconst EXCLAMATIONMARK = 33;    // !\nconst NUMBERSIGN = 35;         // #\nconst AMPERSAND = 38;          // &\nconst APOSTROPHE = 39;         // '\nconst LEFTPARENTHESIS = 40;    // (\nconst RIGHTPARENTHESIS = 41;   // )\nconst ASTERISK = 42;           // *\nconst PLUSSIGN = 43;           // +\nconst COMMA = 44;              // ,\nconst HYPERMINUS = 45;         // -\nconst LESSTHANSIGN = 60;       // <\nconst GREATERTHANSIGN = 62;    // >\nconst QUESTIONMARK = 63;       // ?\nconst COMMERCIALAT = 64;       // @\nconst LEFTSQUAREBRACKET = 91;  // [\nconst RIGHTSQUAREBRACKET = 93; // ]\nconst LEFTCURLYBRACKET = 123;  // {\nconst VERTICALLINE = 124;      // |\nconst RIGHTCURLYBRACKET = 125; // }\nconst INFINITY = 8734;         // ∞\nconst NAME_CHAR = new Uint8Array(128).map((_, idx) =>\n    /[a-zA-Z0-9\\-]/.test(String.fromCharCode(idx)) ? 1 : 0\n);\nconst COMBINATOR_PRECEDENCE = {\n    ' ': 1,\n    '&&': 2,\n    '||': 3,\n    '|': 4\n};\n\nfunction scanSpaces(tokenizer) {\n    return tokenizer.substringToPos(\n        tokenizer.findWsEnd(tokenizer.pos)\n    );\n}\n\nfunction scanWord(tokenizer) {\n    let end = tokenizer.pos;\n\n    for (; end < tokenizer.str.length; end++) {\n        const code = tokenizer.str.charCodeAt(end);\n        if (code >= 128 || NAME_CHAR[code] === 0) {\n            break;\n        }\n    }\n\n    if (tokenizer.pos === end) {\n        tokenizer.error('Expect a keyword');\n    }\n\n    return tokenizer.substringToPos(end);\n}\n\nfunction scanNumber(tokenizer) {\n    let end = tokenizer.pos;\n\n    for (; end < tokenizer.str.length; end++) {\n        const code = tokenizer.str.charCodeAt(end);\n        if (code < 48 || code > 57) {\n            break;\n        }\n    }\n\n    if (tokenizer.pos === end) {\n        tokenizer.error('Expect a number');\n    }\n\n    return tokenizer.substringToPos(end);\n}\n\nfunction scanString(tokenizer) {\n    const end = tokenizer.str.indexOf('\\'', tokenizer.pos + 1);\n\n    if (end === -1) {\n        tokenizer.pos = tokenizer.str.length;\n        tokenizer.error('Expect an apostrophe');\n    }\n\n    return tokenizer.substringToPos(end + 1);\n}\n\nfunction readMultiplierRange(tokenizer) {\n    let min = null;\n    let max = null;\n\n    tokenizer.eat(LEFTCURLYBRACKET);\n    tokenizer.skipWs();\n\n    min = scanNumber(tokenizer);\n    tokenizer.skipWs();\n\n    if (tokenizer.charCode() === COMMA) {\n        tokenizer.pos++;\n        tokenizer.skipWs();\n\n        if (tokenizer.charCode() !== RIGHTCURLYBRACKET) {\n            max = scanNumber(tokenizer);\n            tokenizer.skipWs();\n        }\n    } else {\n        max = min;\n    }\n\n    tokenizer.eat(RIGHTCURLYBRACKET);\n\n    return {\n        min: Number(min),\n        max: max ? Number(max) : 0\n    };\n}\n\nfunction readMultiplier(tokenizer) {\n    let range = null;\n    let comma = false;\n\n    switch (tokenizer.charCode()) {\n        case ASTERISK:\n            tokenizer.pos++;\n\n            range = {\n                min: 0,\n                max: 0\n            };\n\n            break;\n\n        case PLUSSIGN:\n            tokenizer.pos++;\n\n            range = {\n                min: 1,\n                max: 0\n            };\n\n            break;\n\n        case QUESTIONMARK:\n            tokenizer.pos++;\n\n            range = {\n                min: 0,\n                max: 1\n            };\n\n            break;\n\n        case NUMBERSIGN:\n            tokenizer.pos++;\n\n            comma = true;\n\n            if (tokenizer.charCode() === LEFTCURLYBRACKET) {\n                range = readMultiplierRange(tokenizer);\n            } else if (tokenizer.charCode() === QUESTIONMARK) {\n                // https://www.w3.org/TR/css-values-4/#component-multipliers\n                // > the # and ? multipliers may be stacked as #?\n                // In this case just treat \"#?\" as a single multiplier\n                // { min: 0, max: 0, comma: true }\n                tokenizer.pos++;\n                range = {\n                    min: 0,\n                    max: 0\n                };\n            } else {\n                range = {\n                    min: 1,\n                    max: 0\n                };\n            }\n\n            break;\n\n        case LEFTCURLYBRACKET:\n            range = readMultiplierRange(tokenizer);\n            break;\n\n        default:\n            return null;\n    }\n\n    return {\n        type: 'Multiplier',\n        comma,\n        min: range.min,\n        max: range.max,\n        term: null\n    };\n}\n\nfunction maybeMultiplied(tokenizer, node) {\n    const multiplier = readMultiplier(tokenizer);\n\n    if (multiplier !== null) {\n        multiplier.term = node;\n\n        // https://www.w3.org/TR/css-values-4/#component-multipliers\n        // > The + and # multipliers may be stacked as +#;\n        // Represent \"+#\" as nested multipliers:\n        // { ...<multiplier #>,\n        //   term: {\n        //     ...<multipler +>,\n        //     term: node\n        //   }\n        // }\n        if (tokenizer.charCode() === NUMBERSIGN &&\n            tokenizer.charCodeAt(tokenizer.pos - 1) === PLUSSIGN) {\n            return maybeMultiplied(tokenizer, multiplier);\n        }\n\n        return multiplier;\n    }\n\n    return node;\n}\n\nfunction maybeToken(tokenizer) {\n    const ch = tokenizer.peek();\n\n    if (ch === '') {\n        return null;\n    }\n\n    return {\n        type: 'Token',\n        value: ch\n    };\n}\n\nfunction readProperty(tokenizer) {\n    let name;\n\n    tokenizer.eat(LESSTHANSIGN);\n    tokenizer.eat(APOSTROPHE);\n\n    name = scanWord(tokenizer);\n\n    tokenizer.eat(APOSTROPHE);\n    tokenizer.eat(GREATERTHANSIGN);\n\n    return maybeMultiplied(tokenizer, {\n        type: 'Property',\n        name\n    });\n}\n\n// https://drafts.csswg.org/css-values-3/#numeric-ranges\n// 4.1. Range Restrictions and Range Definition Notation\n//\n// Range restrictions can be annotated in the numeric type notation using CSS bracketed\n// range notation—[min,max]—within the angle brackets, after the identifying keyword,\n// indicating a closed range between (and including) min and max.\n// For example, <integer [0, 10]> indicates an integer between 0 and 10, inclusive.\nfunction readTypeRange(tokenizer) {\n    // use null for Infinity to make AST format JSON serializable/deserializable\n    let min = null; // -Infinity\n    let max = null; // Infinity\n    let sign = 1;\n\n    tokenizer.eat(LEFTSQUAREBRACKET);\n\n    if (tokenizer.charCode() === HYPERMINUS) {\n        tokenizer.peek();\n        sign = -1;\n    }\n\n    if (sign == -1 && tokenizer.charCode() === INFINITY) {\n        tokenizer.peek();\n    } else {\n        min = sign * Number(scanNumber(tokenizer));\n\n        if (NAME_CHAR[tokenizer.charCode()] !== 0) {\n            min += scanWord(tokenizer);\n        }\n    }\n\n    scanSpaces(tokenizer);\n    tokenizer.eat(COMMA);\n    scanSpaces(tokenizer);\n\n    if (tokenizer.charCode() === INFINITY) {\n        tokenizer.peek();\n    } else {\n        sign = 1;\n\n        if (tokenizer.charCode() === HYPERMINUS) {\n            tokenizer.peek();\n            sign = -1;\n        }\n\n        max = sign * Number(scanNumber(tokenizer));\n\n        if (NAME_CHAR[tokenizer.charCode()] !== 0) {\n            max += scanWord(tokenizer);\n        }\n    }\n\n    tokenizer.eat(RIGHTSQUAREBRACKET);\n\n    return {\n        type: 'Range',\n        min,\n        max\n    };\n}\n\nfunction readType(tokenizer) {\n    let name;\n    let opts = null;\n\n    tokenizer.eat(LESSTHANSIGN);\n    name = scanWord(tokenizer);\n\n    if (tokenizer.charCode() === LEFTPARENTHESIS &&\n        tokenizer.nextCharCode() === RIGHTPARENTHESIS) {\n        tokenizer.pos += 2;\n        name += '()';\n    }\n\n    if (tokenizer.charCodeAt(tokenizer.findWsEnd(tokenizer.pos)) === LEFTSQUAREBRACKET) {\n        scanSpaces(tokenizer);\n        opts = readTypeRange(tokenizer);\n    }\n\n    tokenizer.eat(GREATERTHANSIGN);\n\n    return maybeMultiplied(tokenizer, {\n        type: 'Type',\n        name,\n        opts\n    });\n}\n\nfunction readKeywordOrFunction(tokenizer) {\n    const name = scanWord(tokenizer);\n\n    if (tokenizer.charCode() === LEFTPARENTHESIS) {\n        tokenizer.pos++;\n\n        return {\n            type: 'Function',\n            name\n        };\n    }\n\n    return maybeMultiplied(tokenizer, {\n        type: 'Keyword',\n        name\n    });\n}\n\nfunction regroupTerms(terms, combinators) {\n    function createGroup(terms, combinator) {\n        return {\n            type: 'Group',\n            terms,\n            combinator,\n            disallowEmpty: false,\n            explicit: false\n        };\n    }\n\n    let combinator;\n\n    combinators = Object.keys(combinators)\n        .sort((a, b) => COMBINATOR_PRECEDENCE[a] - COMBINATOR_PRECEDENCE[b]);\n\n    while (combinators.length > 0) {\n        combinator = combinators.shift();\n\n        let i = 0;\n        let subgroupStart = 0;\n\n        for (; i < terms.length; i++) {\n            const term = terms[i];\n\n            if (term.type === 'Combinator') {\n                if (term.value === combinator) {\n                    if (subgroupStart === -1) {\n                        subgroupStart = i - 1;\n                    }\n                    terms.splice(i, 1);\n                    i--;\n                } else {\n                    if (subgroupStart !== -1 && i - subgroupStart > 1) {\n                        terms.splice(\n                            subgroupStart,\n                            i - subgroupStart,\n                            createGroup(terms.slice(subgroupStart, i), combinator)\n                        );\n                        i = subgroupStart + 1;\n                    }\n                    subgroupStart = -1;\n                }\n            }\n        }\n\n        if (subgroupStart !== -1 && combinators.length) {\n            terms.splice(\n                subgroupStart,\n                i - subgroupStart,\n                createGroup(terms.slice(subgroupStart, i), combinator)\n            );\n        }\n    }\n\n    return combinator;\n}\n\nfunction readImplicitGroup(tokenizer) {\n    const terms = [];\n    const combinators = {};\n    let token;\n    let prevToken = null;\n    let prevTokenPos = tokenizer.pos;\n\n    while (token = peek(tokenizer)) {\n        if (token.type !== 'Spaces') {\n            if (token.type === 'Combinator') {\n                // check for combinator in group beginning and double combinator sequence\n                if (prevToken === null || prevToken.type === 'Combinator') {\n                    tokenizer.pos = prevTokenPos;\n                    tokenizer.error('Unexpected combinator');\n                }\n\n                combinators[token.value] = true;\n            } else if (prevToken !== null && prevToken.type !== 'Combinator') {\n                combinators[' '] = true;  // a b\n                terms.push({\n                    type: 'Combinator',\n                    value: ' '\n                });\n            }\n\n            terms.push(token);\n            prevToken = token;\n            prevTokenPos = tokenizer.pos;\n        }\n    }\n\n    // check for combinator in group ending\n    if (prevToken !== null && prevToken.type === 'Combinator') {\n        tokenizer.pos -= prevTokenPos;\n        tokenizer.error('Unexpected combinator');\n    }\n\n    return {\n        type: 'Group',\n        terms,\n        combinator: regroupTerms(terms, combinators) || ' ',\n        disallowEmpty: false,\n        explicit: false\n    };\n}\n\nfunction readGroup(tokenizer) {\n    let result;\n\n    tokenizer.eat(LEFTSQUAREBRACKET);\n    result = readImplicitGroup(tokenizer);\n    tokenizer.eat(RIGHTSQUAREBRACKET);\n\n    result.explicit = true;\n\n    if (tokenizer.charCode() === EXCLAMATIONMARK) {\n        tokenizer.pos++;\n        result.disallowEmpty = true;\n    }\n\n    return result;\n}\n\nfunction peek(tokenizer) {\n    let code = tokenizer.charCode();\n\n    if (code < 128 && NAME_CHAR[code] === 1) {\n        return readKeywordOrFunction(tokenizer);\n    }\n\n    switch (code) {\n        case RIGHTSQUAREBRACKET:\n            // don't eat, stop scan a group\n            break;\n\n        case LEFTSQUAREBRACKET:\n            return maybeMultiplied(tokenizer, readGroup(tokenizer));\n\n        case LESSTHANSIGN:\n            return tokenizer.nextCharCode() === APOSTROPHE\n                ? readProperty(tokenizer)\n                : readType(tokenizer);\n\n        case VERTICALLINE:\n            return {\n                type: 'Combinator',\n                value: tokenizer.substringToPos(\n                    tokenizer.pos + (tokenizer.nextCharCode() === VERTICALLINE ? 2 : 1)\n                )\n            };\n\n        case AMPERSAND:\n            tokenizer.pos++;\n            tokenizer.eat(AMPERSAND);\n\n            return {\n                type: 'Combinator',\n                value: '&&'\n            };\n\n        case COMMA:\n            tokenizer.pos++;\n            return {\n                type: 'Comma'\n            };\n\n        case APOSTROPHE:\n            return maybeMultiplied(tokenizer, {\n                type: 'String',\n                value: scanString(tokenizer)\n            });\n\n        case SPACE:\n        case TAB:\n        case N:\n        case R:\n        case F:\n            return {\n                type: 'Spaces',\n                value: scanSpaces(tokenizer)\n            };\n\n        case COMMERCIALAT:\n            code = tokenizer.nextCharCode();\n\n            if (code < 128 && NAME_CHAR[code] === 1) {\n                tokenizer.pos++;\n                return {\n                    type: 'AtKeyword',\n                    name: scanWord(tokenizer)\n                };\n            }\n\n            return maybeToken(tokenizer);\n\n        case ASTERISK:\n        case PLUSSIGN:\n        case QUESTIONMARK:\n        case NUMBERSIGN:\n        case EXCLAMATIONMARK:\n            // prohibited tokens (used as a multiplier start)\n            break;\n\n        case LEFTCURLYBRACKET:\n            // LEFTCURLYBRACKET is allowed since mdn/data uses it w/o quoting\n            // check next char isn't a number, because it's likely a disjoined multiplier\n            code = tokenizer.nextCharCode();\n\n            if (code < 48 || code > 57) {\n                return maybeToken(tokenizer);\n            }\n\n            break;\n\n        default:\n            return maybeToken(tokenizer);\n    }\n}\n\nexport function parse(source) {\n    const tokenizer = new Tokenizer(source);\n    const result = readImplicitGroup(tokenizer);\n\n    if (tokenizer.pos !== source.length) {\n        tokenizer.error('Unexpected input');\n    }\n\n    // reduce redundant groups with single group term\n    if (result.terms.length === 1 && result.terms[0].type === 'Group') {\n        return result.terms[0];\n    }\n\n    return result;\n};\n","const noop = function() {};\n\nfunction ensureFunction(value) {\n    return typeof value === 'function' ? value : noop;\n}\n\nexport function walk(node, options, context) {\n    function walk(node) {\n        enter.call(context, node);\n\n        switch (node.type) {\n            case 'Group':\n                node.terms.forEach(walk);\n                break;\n\n            case 'Multiplier':\n                walk(node.term);\n                break;\n\n            case 'Type':\n            case 'Property':\n            case 'Keyword':\n            case 'AtKeyword':\n            case 'Function':\n            case 'String':\n            case 'Token':\n            case 'Comma':\n                break;\n\n            default:\n                throw new Error('Unknown type: ' + node.type);\n        }\n\n        leave.call(context, node);\n    }\n\n    let enter = noop;\n    let leave = noop;\n\n    if (typeof options === 'function') {\n        enter = options;\n    } else if (options) {\n        enter = ensureFunction(options.enter);\n        leave = ensureFunction(options.leave);\n    }\n\n    if (enter === noop && leave === noop) {\n        throw new Error('Neither `enter` nor `leave` walker handler is set or both aren\\'t a function');\n    }\n\n    walk(node, context);\n};\n","import { tokenize } from '../tokenizer/index.js';\n\nconst astToTokens = {\n    decorator(handlers) {\n        const tokens = [];\n        let curNode = null;\n\n        return {\n            ...handlers,\n            node(node) {\n                const tmp = curNode;\n                curNode = node;\n                handlers.node.call(this, node);\n                curNode = tmp;\n            },\n            emit(value, type, auto) {\n                tokens.push({\n                    type,\n                    value,\n                    node: auto ? null : curNode\n                });\n            },\n            result() {\n                return tokens;\n            }\n        };\n    }\n};\n\nfunction stringToTokens(str) {\n    const tokens = [];\n\n    tokenize(str, (type, start, end) =>\n        tokens.push({\n            type,\n            value: str.slice(start, end),\n            node: null\n        })\n    );\n\n    return tokens;\n}\n\nexport default function(value, syntax) {\n    if (typeof value === 'string') {\n        return stringToTokens(value);\n    }\n\n    return syntax.generate(value, astToTokens);\n};\n","import { parse } from '../definition-syntax/parse.js';\n\nexport const MATCH = { type: 'Match' };\nexport const MISMATCH = { type: 'Mismatch' };\nexport const DISALLOW_EMPTY = { type: 'DisallowEmpty' };\n\nconst LEFTPARENTHESIS = 40;  // (\nconst RIGHTPARENTHESIS = 41; // )\n\nfunction createCondition(match, thenBranch, elseBranch) {\n    // reduce node count\n    if (thenBranch === MATCH && elseBranch === MISMATCH) {\n        return match;\n    }\n\n    if (match === MATCH && thenBranch === MATCH && elseBranch === MATCH) {\n        return match;\n    }\n\n    if (match.type === 'If' && match.else === MISMATCH && thenBranch === MATCH) {\n        thenBranch = match.then;\n        match = match.match;\n    }\n\n    return {\n        type: 'If',\n        match,\n        then: thenBranch,\n        else: elseBranch\n    };\n}\n\nfunction isFunctionType(name) {\n    return (\n        name.length > 2 &&\n        name.charCodeAt(name.length - 2) === LEFTPARENTHESIS &&\n        name.charCodeAt(name.length - 1) === RIGHTPARENTHESIS\n    );\n}\n\nfunction isEnumCapatible(term) {\n    return (\n        term.type === 'Keyword' ||\n        term.type === 'AtKeyword' ||\n        term.type === 'Function' ||\n        term.type === 'Type' && isFunctionType(term.name)\n    );\n}\n\nfunction buildGroupMatchGraph(combinator, terms, atLeastOneTermMatched) {\n    switch (combinator) {\n        case ' ': {\n            // Juxtaposing components means that all of them must occur, in the given order.\n            //\n            // a b c\n            // =\n            // match a\n            //   then match b\n            //     then match c\n            //       then MATCH\n            //       else MISMATCH\n            //     else MISMATCH\n            //   else MISMATCH\n            let result = MATCH;\n\n            for (let i = terms.length - 1; i >= 0; i--) {\n                const term = terms[i];\n\n                result = createCondition(\n                    term,\n                    result,\n                    MISMATCH\n                );\n            };\n\n            return result;\n        }\n\n        case '|': {\n            // A bar (|) separates two or more alternatives: exactly one of them must occur.\n            //\n            // a | b | c\n            // =\n            // match a\n            //   then MATCH\n            //   else match b\n            //     then MATCH\n            //     else match c\n            //       then MATCH\n            //       else MISMATCH\n\n            let result = MISMATCH;\n            let map = null;\n\n            for (let i = terms.length - 1; i >= 0; i--) {\n                let term = terms[i];\n\n                // reduce sequence of keywords into a Enum\n                if (isEnumCapatible(term)) {\n                    if (map === null && i > 0 && isEnumCapatible(terms[i - 1])) {\n                        map = Object.create(null);\n                        result = createCondition(\n                            {\n                                type: 'Enum',\n                                map\n                            },\n                            MATCH,\n                            result\n                        );\n                    }\n\n                    if (map !== null) {\n                        const key = (isFunctionType(term.name) ? term.name.slice(0, -1) : term.name).toLowerCase();\n                        if (key in map === false) {\n                            map[key] = term;\n                            continue;\n                        }\n                    }\n                }\n\n                map = null;\n\n                // create a new conditonal node\n                result = createCondition(\n                    term,\n                    MATCH,\n                    result\n                );\n            };\n\n            return result;\n        }\n\n        case '&&': {\n            // A double ampersand (&&) separates two or more components,\n            // all of which must occur, in any order.\n\n            // Use MatchOnce for groups with a large number of terms,\n            // since &&-groups produces at least N!-node trees\n            if (terms.length > 5) {\n                return {\n                    type: 'MatchOnce',\n                    terms,\n                    all: true\n                };\n            }\n\n            // Use a combination tree for groups with small number of terms\n            //\n            // a && b && c\n            // =\n            // match a\n            //   then [b && c]\n            //   else match b\n            //     then [a && c]\n            //     else match c\n            //       then [a && b]\n            //       else MISMATCH\n            //\n            // a && b\n            // =\n            // match a\n            //   then match b\n            //     then MATCH\n            //     else MISMATCH\n            //   else match b\n            //     then match a\n            //       then MATCH\n            //       else MISMATCH\n            //     else MISMATCH\n            let result = MISMATCH;\n\n            for (let i = terms.length - 1; i >= 0; i--) {\n                const term = terms[i];\n                let thenClause;\n\n                if (terms.length > 1) {\n                    thenClause = buildGroupMatchGraph(\n                        combinator,\n                        terms.filter(function(newGroupTerm) {\n                            return newGroupTerm !== term;\n                        }),\n                        false\n                    );\n                } else {\n                    thenClause = MATCH;\n                }\n\n                result = createCondition(\n                    term,\n                    thenClause,\n                    result\n                );\n            };\n\n            return result;\n        }\n\n        case '||': {\n            // A double bar (||) separates two or more options:\n            // one or more of them must occur, in any order.\n\n            // Use MatchOnce for groups with a large number of terms,\n            // since ||-groups produces at least N!-node trees\n            if (terms.length > 5) {\n                return {\n                    type: 'MatchOnce',\n                    terms,\n                    all: false\n                };\n            }\n\n            // Use a combination tree for groups with small number of terms\n            //\n            // a || b || c\n            // =\n            // match a\n            //   then [b || c]\n            //   else match b\n            //     then [a || c]\n            //     else match c\n            //       then [a || b]\n            //       else MISMATCH\n            //\n            // a || b\n            // =\n            // match a\n            //   then match b\n            //     then MATCH\n            //     else MATCH\n            //   else match b\n            //     then match a\n            //       then MATCH\n            //       else MATCH\n            //     else MISMATCH\n            let result = atLeastOneTermMatched ? MATCH : MISMATCH;\n\n            for (let i = terms.length - 1; i >= 0; i--) {\n                const term = terms[i];\n                let thenClause;\n\n                if (terms.length > 1) {\n                    thenClause = buildGroupMatchGraph(\n                        combinator,\n                        terms.filter(function(newGroupTerm) {\n                            return newGroupTerm !== term;\n                        }),\n                        true\n                    );\n                } else {\n                    thenClause = MATCH;\n                }\n\n                result = createCondition(\n                    term,\n                    thenClause,\n                    result\n                );\n            };\n\n            return result;\n        }\n    }\n}\n\nfunction buildMultiplierMatchGraph(node) {\n    let result = MATCH;\n    let matchTerm = buildMatchGraphInternal(node.term);\n\n    if (node.max === 0) {\n        // disable repeating of empty match to prevent infinite loop\n        matchTerm = createCondition(\n            matchTerm,\n            DISALLOW_EMPTY,\n            MISMATCH\n        );\n\n        // an occurrence count is not limited, make a cycle;\n        // to collect more terms on each following matching mismatch\n        result = createCondition(\n            matchTerm,\n            null, // will be a loop\n            MISMATCH\n        );\n\n        result.then = createCondition(\n            MATCH,\n            MATCH,\n            result // make a loop\n        );\n\n        if (node.comma) {\n            result.then.else = createCondition(\n                { type: 'Comma', syntax: node },\n                result,\n                MISMATCH\n            );\n        }\n    } else {\n        // create a match node chain for [min .. max] interval with optional matches\n        for (let i = node.min || 1; i <= node.max; i++) {\n            if (node.comma && result !== MATCH) {\n                result = createCondition(\n                    { type: 'Comma', syntax: node },\n                    result,\n                    MISMATCH\n                );\n            }\n\n            result = createCondition(\n                matchTerm,\n                createCondition(\n                    MATCH,\n                    MATCH,\n                    result\n                ),\n                MISMATCH\n            );\n        }\n    }\n\n    if (node.min === 0) {\n        // allow zero match\n        result = createCondition(\n            MATCH,\n            MATCH,\n            result\n        );\n    } else {\n        // create a match node chain to collect [0 ... min - 1] required matches\n        for (let i = 0; i < node.min - 1; i++) {\n            if (node.comma && result !== MATCH) {\n                result = createCondition(\n                    { type: 'Comma', syntax: node },\n                    result,\n                    MISMATCH\n                );\n            }\n\n            result = createCondition(\n                matchTerm,\n                result,\n                MISMATCH\n            );\n        }\n    }\n\n    return result;\n}\n\nfunction buildMatchGraphInternal(node) {\n    if (typeof node === 'function') {\n        return {\n            type: 'Generic',\n            fn: node\n        };\n    }\n\n    switch (node.type) {\n        case 'Group': {\n            let result = buildGroupMatchGraph(\n                node.combinator,\n                node.terms.map(buildMatchGraphInternal),\n                false\n            );\n\n            if (node.disallowEmpty) {\n                result = createCondition(\n                    result,\n                    DISALLOW_EMPTY,\n                    MISMATCH\n                );\n            }\n\n            return result;\n        }\n\n        case 'Multiplier':\n            return buildMultiplierMatchGraph(node);\n\n        case 'Type':\n        case 'Property':\n            return {\n                type: node.type,\n                name: node.name,\n                syntax: node\n            };\n\n        case 'Keyword':\n            return {\n                type: node.type,\n                name: node.name.toLowerCase(),\n                syntax: node\n            };\n\n        case 'AtKeyword':\n            return {\n                type: node.type,\n                name: '@' + node.name.toLowerCase(),\n                syntax: node\n            };\n\n        case 'Function':\n            return {\n                type: node.type,\n                name: node.name.toLowerCase() + '(',\n                syntax: node\n            };\n\n        case 'String':\n            // convert a one char length String to a Token\n            if (node.value.length === 3) {\n                return {\n                    type: 'Token',\n                    value: node.value.charAt(1),\n                    syntax: node\n                };\n            }\n\n            // otherwise use it as is\n            return {\n                type: node.type,\n                value: node.value.substr(1, node.value.length - 2).replace(/\\\\'/g, '\\''),\n                syntax: node\n            };\n\n        case 'Token':\n            return {\n                type: node.type,\n                value: node.value,\n                syntax: node\n            };\n\n        case 'Comma':\n            return {\n                type: node.type,\n                syntax: node\n            };\n\n        default:\n            throw new Error('Unknown node type:', node.type);\n    }\n}\n\nexport function buildMatchGraph(syntaxTree, ref) {\n    if (typeof syntaxTree === 'string') {\n        syntaxTree = parse(syntaxTree);\n    }\n\n    return {\n        type: 'MatchGraph',\n        match: buildMatchGraphInternal(syntaxTree),\n        syntax: ref || null,\n        source: syntaxTree\n    };\n}\n","import { MATCH, MISMATCH, DISALLOW_EMPTY } from './match-graph.js';\nimport * as TYPE from '../tokenizer/types.js';\n\nconst { hasOwnProperty } = Object.prototype;\nconst STUB = 0;\nconst TOKEN = 1;\nconst OPEN_SYNTAX = 2;\nconst CLOSE_SYNTAX = 3;\n\nconst EXIT_REASON_MATCH = 'Match';\nconst EXIT_REASON_MISMATCH = 'Mismatch';\nconst EXIT_REASON_ITERATION_LIMIT = 'Maximum iteration number exceeded (please fill an issue on https://github.com/csstree/csstree/issues)';\n\nconst ITERATION_LIMIT = 15000;\nexport let totalIterationCount = 0;\n\nfunction reverseList(list) {\n    let prev = null;\n    let next = null;\n    let item = list;\n\n    while (item !== null) {\n        next = item.prev;\n        item.prev = prev;\n        prev = item;\n        item = next;\n    }\n\n    return prev;\n}\n\nfunction areStringsEqualCaseInsensitive(testStr, referenceStr) {\n    if (testStr.length !== referenceStr.length) {\n        return false;\n    }\n\n    for (let i = 0; i < testStr.length; i++) {\n        const referenceCode = referenceStr.charCodeAt(i);\n        let testCode = testStr.charCodeAt(i);\n\n        // testCode.toLowerCase() for U+0041 LATIN CAPITAL LETTER A (A) .. U+005A LATIN CAPITAL LETTER Z (Z).\n        if (testCode >= 0x0041 && testCode <= 0x005A) {\n            testCode = testCode | 32;\n        }\n\n        if (testCode !== referenceCode) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\nfunction isContextEdgeDelim(token) {\n    if (token.type !== TYPE.Delim) {\n        return false;\n    }\n\n    // Fix matching for unicode-range: U+30??, U+FF00-FF9F\n    // Probably we need to check out previous match instead\n    return token.value !== '?';\n}\n\nfunction isCommaContextStart(token) {\n    if (token === null) {\n        return true;\n    }\n\n    return (\n        token.type === TYPE.Comma ||\n        token.type === TYPE.Function ||\n        token.type === TYPE.LeftParenthesis ||\n        token.type === TYPE.LeftSquareBracket ||\n        token.type === TYPE.LeftCurlyBracket ||\n        isContextEdgeDelim(token)\n    );\n}\n\nfunction isCommaContextEnd(token) {\n    if (token === null) {\n        return true;\n    }\n\n    return (\n        token.type === TYPE.RightParenthesis ||\n        token.type === TYPE.RightSquareBracket ||\n        token.type === TYPE.RightCurlyBracket ||\n        (token.type === TYPE.Delim && token.value === '/')\n    );\n}\n\nfunction internalMatch(tokens, state, syntaxes) {\n    function moveToNextToken() {\n        do {\n            tokenIndex++;\n            token = tokenIndex < tokens.length ? tokens[tokenIndex] : null;\n        } while (token !== null && (token.type === TYPE.WhiteSpace || token.type === TYPE.Comment));\n    }\n\n    function getNextToken(offset) {\n        const nextIndex = tokenIndex + offset;\n\n        return nextIndex < tokens.length ? tokens[nextIndex] : null;\n    }\n\n    function stateSnapshotFromSyntax(nextState, prev) {\n        return {\n            nextState,\n            matchStack,\n            syntaxStack,\n            thenStack,\n            tokenIndex,\n            prev\n        };\n    }\n\n    function pushThenStack(nextState) {\n        thenStack = {\n            nextState,\n            matchStack,\n            syntaxStack,\n            prev: thenStack\n        };\n    }\n\n    function pushElseStack(nextState) {\n        elseStack = stateSnapshotFromSyntax(nextState, elseStack);\n    }\n\n    function addTokenToMatch() {\n        matchStack = {\n            type: TOKEN,\n            syntax: state.syntax,\n            token,\n            prev: matchStack\n        };\n\n        moveToNextToken();\n        syntaxStash = null;\n\n        if (tokenIndex > longestMatch) {\n            longestMatch = tokenIndex;\n        }\n    }\n\n    function openSyntax() {\n        syntaxStack = {\n            syntax: state.syntax,\n            opts: state.syntax.opts || (syntaxStack !== null && syntaxStack.opts) || null,\n            prev: syntaxStack\n        };\n\n        matchStack = {\n            type: OPEN_SYNTAX,\n            syntax: state.syntax,\n            token: matchStack.token,\n            prev: matchStack\n        };\n    }\n\n    function closeSyntax() {\n        if (matchStack.type === OPEN_SYNTAX) {\n            matchStack = matchStack.prev;\n        } else {\n            matchStack = {\n                type: CLOSE_SYNTAX,\n                syntax: syntaxStack.syntax,\n                token: matchStack.token,\n                prev: matchStack\n            };\n        }\n\n        syntaxStack = syntaxStack.prev;\n    }\n\n    let syntaxStack = null;\n    let thenStack = null;\n    let elseStack = null;\n\n    // null – stashing allowed, nothing stashed\n    // false – stashing disabled, nothing stashed\n    // anithing else – fail stashable syntaxes, some syntax stashed\n    let syntaxStash = null;\n\n    let iterationCount = 0; // count iterations and prevent infinite loop\n    let exitReason = null;\n\n    let token = null;\n    let tokenIndex = -1;\n    let longestMatch = 0;\n    let matchStack = {\n        type: STUB,\n        syntax: null,\n        token: null,\n        prev: null\n    };\n\n    moveToNextToken();\n\n    while (exitReason === null && ++iterationCount < ITERATION_LIMIT) {\n        // function mapList(list, fn) {\n        //     const result = [];\n        //     while (list) {\n        //         result.unshift(fn(list));\n        //         list = list.prev;\n        //     }\n        //     return result;\n        // }\n        // console.log('--\\n',\n        //     '#' + iterationCount,\n        //     require('util').inspect({\n        //         match: mapList(matchStack, x => x.type === TOKEN ? x.token && x.token.value : x.syntax ? ({ [OPEN_SYNTAX]: '<', [CLOSE_SYNTAX]: '</' }[x.type] || x.type) + '!' + x.syntax.name : null),\n        //         token: token && token.value,\n        //         tokenIndex,\n        //         syntax: syntax.type + (syntax.id ? ' #' + syntax.id : '')\n        //     }, { depth: null })\n        // );\n        switch (state.type) {\n            case 'Match':\n                if (thenStack === null) {\n                    // turn to MISMATCH when some tokens left unmatched\n                    if (token !== null) {\n                        // doesn't mismatch if just one token left and it's an IE hack\n                        if (tokenIndex !== tokens.length - 1 || (token.value !== '\\\\0' && token.value !== '\\\\9')) {\n                            state = MISMATCH;\n                            break;\n                        }\n                    }\n\n                    // break the main loop, return a result - MATCH\n                    exitReason = EXIT_REASON_MATCH;\n                    break;\n                }\n\n                // go to next syntax (`then` branch)\n                state = thenStack.nextState;\n\n                // check match is not empty\n                if (state === DISALLOW_EMPTY) {\n                    if (thenStack.matchStack === matchStack) {\n                        state = MISMATCH;\n                        break;\n                    } else {\n                        state = MATCH;\n                    }\n                }\n\n                // close syntax if needed\n                while (thenStack.syntaxStack !== syntaxStack) {\n                    closeSyntax();\n                }\n\n                // pop stack\n                thenStack = thenStack.prev;\n                break;\n\n            case 'Mismatch':\n                // when some syntax is stashed\n                if (syntaxStash !== null && syntaxStash !== false) {\n                    // there is no else branches or a branch reduce match stack\n                    if (elseStack === null || tokenIndex > elseStack.tokenIndex) {\n                        // restore state from the stash\n                        elseStack = syntaxStash;\n                        syntaxStash = false; // disable stashing\n                    }\n                } else if (elseStack === null) {\n                    // no else branches -> break the main loop\n                    // return a result - MISMATCH\n                    exitReason = EXIT_REASON_MISMATCH;\n                    break;\n                }\n\n                // go to next syntax (`else` branch)\n                state = elseStack.nextState;\n\n                // restore all the rest stack states\n                thenStack = elseStack.thenStack;\n                syntaxStack = elseStack.syntaxStack;\n                matchStack = elseStack.matchStack;\n                tokenIndex = elseStack.tokenIndex;\n                token = tokenIndex < tokens.length ? tokens[tokenIndex] : null;\n\n                // pop stack\n                elseStack = elseStack.prev;\n                break;\n\n            case 'MatchGraph':\n                state = state.match;\n                break;\n\n            case 'If':\n                // IMPORTANT: else stack push must go first,\n                // since it stores the state of thenStack before changes\n                if (state.else !== MISMATCH) {\n                    pushElseStack(state.else);\n                }\n\n                if (state.then !== MATCH) {\n                    pushThenStack(state.then);\n                }\n\n                state = state.match;\n                break;\n\n            case 'MatchOnce':\n                state = {\n                    type: 'MatchOnceBuffer',\n                    syntax: state,\n                    index: 0,\n                    mask: 0\n                };\n                break;\n\n            case 'MatchOnceBuffer': {\n                const terms = state.syntax.terms;\n\n                if (state.index === terms.length) {\n                    // no matches at all or it's required all terms to be matched\n                    if (state.mask === 0 || state.syntax.all) {\n                        state = MISMATCH;\n                        break;\n                    }\n\n                    // a partial match is ok\n                    state = MATCH;\n                    break;\n                }\n\n                // all terms are matched\n                if (state.mask === (1 << terms.length) - 1) {\n                    state = MATCH;\n                    break;\n                }\n\n                for (; state.index < terms.length; state.index++) {\n                    const matchFlag = 1 << state.index;\n\n                    if ((state.mask & matchFlag) === 0) {\n                        // IMPORTANT: else stack push must go first,\n                        // since it stores the state of thenStack before changes\n                        pushElseStack(state);\n                        pushThenStack({\n                            type: 'AddMatchOnce',\n                            syntax: state.syntax,\n                            mask: state.mask | matchFlag\n                        });\n\n                        // match\n                        state = terms[state.index++];\n                        break;\n                    }\n                }\n                break;\n            }\n\n            case 'AddMatchOnce':\n                state = {\n                    type: 'MatchOnceBuffer',\n                    syntax: state.syntax,\n                    index: 0,\n                    mask: state.mask\n                };\n                break;\n\n            case 'Enum':\n                if (token !== null) {\n                    let name = token.value.toLowerCase();\n\n                    // drop \\0 and \\9 hack from keyword name\n                    if (name.indexOf('\\\\') !== -1) {\n                        name = name.replace(/\\\\[09].*$/, '');\n                    }\n\n                    if (hasOwnProperty.call(state.map, name)) {\n                        state = state.map[name];\n                        break;\n                    }\n                }\n\n                state = MISMATCH;\n                break;\n\n            case 'Generic': {\n                const opts = syntaxStack !== null ? syntaxStack.opts : null;\n                const lastTokenIndex = tokenIndex + Math.floor(state.fn(token, getNextToken, opts));\n\n                if (!isNaN(lastTokenIndex) && lastTokenIndex > tokenIndex) {\n                    while (tokenIndex < lastTokenIndex) {\n                        addTokenToMatch();\n                    }\n\n                    state = MATCH;\n                } else {\n                    state = MISMATCH;\n                }\n\n                break;\n            }\n\n            case 'Type':\n            case 'Property': {\n                const syntaxDict = state.type === 'Type' ? 'types' : 'properties';\n                const dictSyntax = hasOwnProperty.call(syntaxes, syntaxDict) ? syntaxes[syntaxDict][state.name] : null;\n\n                if (!dictSyntax || !dictSyntax.match) {\n                    throw new Error(\n                        'Bad syntax reference: ' +\n                        (state.type === 'Type'\n                            ? '<' + state.name + '>'\n                            : '<\\'' + state.name + '\\'>')\n                    );\n                }\n\n                // stash a syntax for types with low priority\n                if (syntaxStash !== false && token !== null && state.type === 'Type') {\n                    const lowPriorityMatching =\n                        // https://drafts.csswg.org/css-values-4/#custom-idents\n                        // When parsing positionally-ambiguous keywords in a property value, a <custom-ident> production\n                        // can only claim the keyword if no other unfulfilled production can claim it.\n                        (state.name === 'custom-ident' && token.type === TYPE.Ident) ||\n\n                        // https://drafts.csswg.org/css-values-4/#lengths\n                        // ... if a `0` could be parsed as either a <number> or a <length> in a property (such as line-height),\n                        // it must parse as a <number>\n                        (state.name === 'length' && token.value === '0');\n\n                    if (lowPriorityMatching) {\n                        if (syntaxStash === null) {\n                            syntaxStash = stateSnapshotFromSyntax(state, elseStack);\n                        }\n\n                        state = MISMATCH;\n                        break;\n                    }\n                }\n\n                openSyntax();\n                state = dictSyntax.matchRef || dictSyntax.match;\n                break;\n            }\n\n            case 'Keyword': {\n                const name = state.name;\n\n                if (token !== null) {\n                    let keywordName = token.value;\n\n                    // drop \\0 and \\9 hack from keyword name\n                    if (keywordName.indexOf('\\\\') !== -1) {\n                        keywordName = keywordName.replace(/\\\\[09].*$/, '');\n                    }\n\n                    if (areStringsEqualCaseInsensitive(keywordName, name)) {\n                        addTokenToMatch();\n                        state = MATCH;\n                        break;\n                    }\n                }\n\n                state = MISMATCH;\n                break;\n            }\n\n            case 'AtKeyword':\n            case 'Function':\n                if (token !== null && areStringsEqualCaseInsensitive(token.value, state.name)) {\n                    addTokenToMatch();\n                    state = MATCH;\n                    break;\n                }\n\n                state = MISMATCH;\n                break;\n\n            case 'Token':\n                if (token !== null && token.value === state.value) {\n                    addTokenToMatch();\n                    state = MATCH;\n                    break;\n                }\n\n                state = MISMATCH;\n                break;\n\n            case 'Comma':\n                if (token !== null && token.type === TYPE.Comma) {\n                    if (isCommaContextStart(matchStack.token)) {\n                        state = MISMATCH;\n                    } else {\n                        addTokenToMatch();\n                        state = isCommaContextEnd(token) ? MISMATCH : MATCH;\n                    }\n                } else {\n                    state = isCommaContextStart(matchStack.token) || isCommaContextEnd(token) ? MATCH : MISMATCH;\n                }\n\n                break;\n\n            case 'String':\n                let string = '';\n                let lastTokenIndex = tokenIndex;\n\n                for (; lastTokenIndex < tokens.length && string.length < state.value.length; lastTokenIndex++) {\n                    string += tokens[lastTokenIndex].value;\n                }\n\n                if (areStringsEqualCaseInsensitive(string, state.value)) {\n                    while (tokenIndex < lastTokenIndex) {\n                        addTokenToMatch();\n                    }\n\n                    state = MATCH;\n                } else {\n                    state = MISMATCH;\n                }\n\n                break;\n\n            default:\n                throw new Error('Unknown node type: ' + state.type);\n        }\n    }\n\n    totalIterationCount += iterationCount;\n\n    switch (exitReason) {\n        case null:\n            console.warn('[csstree-match] BREAK after ' + ITERATION_LIMIT + ' iterations');\n            exitReason = EXIT_REASON_ITERATION_LIMIT;\n            matchStack = null;\n            break;\n\n        case EXIT_REASON_MATCH:\n            while (syntaxStack !== null) {\n                closeSyntax();\n            }\n            break;\n\n        default:\n            matchStack = null;\n    }\n\n    return {\n        tokens,\n        reason: exitReason,\n        iterations: iterationCount,\n        match: matchStack,\n        longestMatch\n    };\n}\n\nexport function matchAsList(tokens, matchGraph, syntaxes) {\n    const matchResult = internalMatch(tokens, matchGraph, syntaxes || {});\n\n    if (matchResult.match !== null) {\n        let item = reverseList(matchResult.match).prev;\n\n        matchResult.match = [];\n\n        while (item !== null) {\n            switch (item.type) {\n                case OPEN_SYNTAX:\n                case CLOSE_SYNTAX:\n                    matchResult.match.push({\n                        type: item.type,\n                        syntax: item.syntax\n                    });\n                    break;\n\n                default:\n                    matchResult.match.push({\n                        token: item.token.value,\n                        node: item.token.node\n                    });\n                    break;\n            }\n\n            item = item.prev;\n        }\n    }\n\n    return matchResult;\n}\n\nexport function matchAsTree(tokens, matchGraph, syntaxes) {\n    const matchResult = internalMatch(tokens, matchGraph, syntaxes || {});\n\n    if (matchResult.match === null) {\n        return matchResult;\n    }\n\n    let item = matchResult.match;\n    let host = matchResult.match = {\n        syntax: matchGraph.syntax || null,\n        match: []\n    };\n    const hostStack = [host];\n\n    // revert a list and start with 2nd item since 1st is a stub item\n    item = reverseList(item).prev;\n\n    // build a tree\n    while (item !== null) {\n        switch (item.type) {\n            case OPEN_SYNTAX:\n                host.match.push(host = {\n                    syntax: item.syntax,\n                    match: []\n                });\n                hostStack.push(host);\n                break;\n\n            case CLOSE_SYNTAX:\n                hostStack.pop();\n                host = hostStack[hostStack.length - 1];\n                break;\n\n            default:\n                host.match.push({\n                    syntax: item.syntax || null,\n                    token: item.token.value,\n                    node: item.token.node\n                });\n        }\n\n        item = item.prev;\n    }\n\n    return matchResult;\n}\n","export function getTrace(node) {\n    function shouldPutToTrace(syntax) {\n        if (syntax === null) {\n            return false;\n        }\n\n        return (\n            syntax.type === 'Type' ||\n            syntax.type === 'Property' ||\n            syntax.type === 'Keyword'\n        );\n    }\n\n    function hasMatch(matchNode) {\n        if (Array.isArray(matchNode.match)) {\n            // use for-loop for better perfomance\n            for (let i = 0; i < matchNode.match.length; i++) {\n                if (hasMatch(matchNode.match[i])) {\n                    if (shouldPutToTrace(matchNode.syntax)) {\n                        result.unshift(matchNode.syntax);\n                    }\n\n                    return true;\n                }\n            }\n        } else if (matchNode.node === node) {\n            result = shouldPutToTrace(matchNode.syntax)\n                ? [matchNode.syntax]\n                : [];\n\n            return true;\n        }\n\n        return false;\n    }\n\n    let result = null;\n\n    if (this.matched !== null) {\n        hasMatch(this.matched);\n    }\n\n    return result;\n}\n\nexport function isType(node, type) {\n    return testNode(this, node, match => match.type === 'Type' && match.name === type);\n}\n\nexport function isProperty(node, property) {\n    return testNode(this, node, match => match.type === 'Property' && match.name === property);\n}\n\nexport function isKeyword(node) {\n    return testNode(this, node, match => match.type === 'Keyword');\n}\n\nfunction testNode(match, node, fn) {\n    const trace = getTrace.call(match, node);\n\n    if (trace === null) {\n        return false;\n    }\n\n    return trace.some(fn);\n}\n","import { List } from '../utils/List.js';\n\nfunction getFirstMatchNode(matchNode) {\n    if ('node' in matchNode) {\n        return matchNode.node;\n    }\n\n    return getFirstMatchNode(matchNode.match[0]);\n}\n\nfunction getLastMatchNode(matchNode) {\n    if ('node' in matchNode) {\n        return matchNode.node;\n    }\n\n    return getLastMatchNode(matchNode.match[matchNode.match.length - 1]);\n}\n\nexport function matchFragments(lexer, ast, match, type, name) {\n    function findFragments(matchNode) {\n        if (matchNode.syntax !== null &&\n            matchNode.syntax.type === type &&\n            matchNode.syntax.name === name) {\n            const start = getFirstMatchNode(matchNode);\n            const end = getLastMatchNode(matchNode);\n\n            lexer.syntax.walk(ast, function(node, item, list) {\n                if (node === start) {\n                    const nodes = new List();\n\n                    do {\n                        nodes.appendData(item.data);\n\n                        if (item.data === end) {\n                            break;\n                        }\n\n                        item = item.next;\n                    } while (item !== null);\n\n                    fragments.push({\n                        parent: list,\n                        nodes\n                    });\n                }\n            });\n        }\n\n        if (Array.isArray(matchNode.match)) {\n            matchNode.match.forEach(findFragments);\n        }\n    }\n\n    const fragments = [];\n\n    if (match.matched !== null) {\n        findFragments(match.matched);\n    }\n\n    return fragments;\n}\n","import { List } from '../utils/List.js';\n\nconst { hasOwnProperty } = Object.prototype;\n\nfunction isValidNumber(value) {\n    // Number.isInteger(value) && value >= 0\n    return (\n        typeof value === 'number' &&\n        isFinite(value) &&\n        Math.floor(value) === value &&\n        value >= 0\n    );\n}\n\nfunction isValidLocation(loc) {\n    return (\n        Boolean(loc) &&\n        isValidNumber(loc.offset) &&\n        isValidNumber(loc.line) &&\n        isValidNumber(loc.column)\n    );\n}\n\nfunction createNodeStructureChecker(type, fields) {\n    return function checkNode(node, warn) {\n        if (!node || node.constructor !== Object) {\n            return warn(node, 'Type of node should be an Object');\n        }\n\n        for (let key in node) {\n            let valid = true;\n\n            if (hasOwnProperty.call(node, key) === false) {\n                continue;\n            }\n\n            if (key === 'type') {\n                if (node.type !== type) {\n                    warn(node, 'Wrong node type `' + node.type + '`, expected `' + type + '`');\n                }\n            } else if (key === 'loc') {\n                if (node.loc === null) {\n                    continue;\n                } else if (node.loc && node.loc.constructor === Object) {\n                    if (typeof node.loc.source !== 'string') {\n                        key += '.source';\n                    } else if (!isValidLocation(node.loc.start)) {\n                        key += '.start';\n                    } else if (!isValidLocation(node.loc.end)) {\n                        key += '.end';\n                    } else {\n                        continue;\n                    }\n                }\n\n                valid = false;\n            } else if (fields.hasOwnProperty(key)) {\n                valid = false;\n\n                for (let i = 0; !valid && i < fields[key].length; i++) {\n                    const fieldType = fields[key][i];\n\n                    switch (fieldType) {\n                        case String:\n                            valid = typeof node[key] === 'string';\n                            break;\n\n                        case Boolean:\n                            valid = typeof node[key] === 'boolean';\n                            break;\n\n                        case null:\n                            valid = node[key] === null;\n                            break;\n\n                        default:\n                            if (typeof fieldType === 'string') {\n                                valid = node[key] && node[key].type === fieldType;\n                            } else if (Array.isArray(fieldType)) {\n                                valid = node[key] instanceof List;\n                            }\n                    }\n                }\n            } else {\n                warn(node, 'Unknown field `' + key + '` for ' + type + ' node type');\n            }\n\n            if (!valid) {\n                warn(node, 'Bad value for `' + type + '.' + key + '`');\n            }\n        }\n\n        for (const key in fields) {\n            if (hasOwnProperty.call(fields, key) &&\n                hasOwnProperty.call(node, key) === false) {\n                warn(node, 'Field `' + type + '.' + key + '` is missed');\n            }\n        }\n    };\n}\n\nfunction genTypesList(fieldTypes, path) {\n    const docsTypes = [];\n\n    for (let i = 0; i < fieldTypes.length; i++) {\n        const fieldType = fieldTypes[i];\n        if (fieldType === String || fieldType === Boolean) {\n            docsTypes.push(fieldType.name.toLowerCase());\n        } else if (fieldType === null) {\n            docsTypes.push('null');\n        } else if (typeof fieldType === 'string') {\n            docsTypes.push(fieldType);\n        } else if (Array.isArray(fieldType)) {\n            docsTypes.push('List<' + (genTypesList(fieldType, path) || 'any') + '>'); // TODO: use type enum\n        } else {\n            throw new Error('Wrong value `' + fieldType + '` in `' + path + '` structure definition');\n        }\n    }\n\n    return docsTypes.join(' | ');\n}\n\nfunction processStructure(name, nodeType) {\n    const structure = nodeType.structure;\n    const fields = {\n        type: String,\n        loc: true\n    };\n    const docs = {\n        type: '\"' + name + '\"'\n    };\n\n    for (const key in structure) {\n        if (hasOwnProperty.call(structure, key) === false) {\n            continue;\n        }\n\n        const fieldTypes = fields[key] = Array.isArray(structure[key])\n            ? structure[key].slice()\n            : [structure[key]];\n\n        docs[key] = genTypesList(fieldTypes, name + '.' + key);\n    }\n\n    return {\n        docs,\n        check: createNodeStructureChecker(name, fields)\n    };\n}\n\nexport function getStructureFromConfig(config) {\n    const structure = {};\n\n    if (config.node) {\n        for (const name in config.node) {\n            if (hasOwnProperty.call(config.node, name)) {\n                const nodeType = config.node[name];\n\n                if (nodeType.structure) {\n                    structure[name] = processStructure(name, nodeType);\n                } else {\n                    throw new Error('Missed `structure` field in `' + name + '` node type definition');\n                }\n            }\n        }\n    }\n\n    return structure;\n};\n","import { SyntaxReferenceError, SyntaxMatchError } from './error.js';\nimport * as names from '../utils/names.js';\nimport { cssWideKeywords } from './generic-const.js';\nimport { createGenericTypes } from './generic.js';\nimport * as units from './units.js';\nimport { parse, generate, walk } from '../definition-syntax/index.js';\nimport prepareTokens from './prepare-tokens.js';\nimport { buildMatchGraph } from './match-graph.js';\nimport { matchAsTree } from './match.js';\nimport * as trace from './trace.js';\nimport { matchFragments } from './search.js';\nimport { getStructureFromConfig } from './structure.js';\n\nfunction dumpMapSyntax(map, compact, syntaxAsAst) {\n    const result = {};\n\n    for (const name in map) {\n        if (map[name].syntax) {\n            result[name] = syntaxAsAst\n                ? map[name].syntax\n                : generate(map[name].syntax, { compact });\n        }\n    }\n\n    return result;\n}\n\nfunction dumpAtruleMapSyntax(map, compact, syntaxAsAst) {\n    const result = {};\n\n    for (const [name, atrule] of Object.entries(map)) {\n        result[name] = {\n            prelude: atrule.prelude && (\n                syntaxAsAst\n                    ? atrule.prelude.syntax\n                    : generate(atrule.prelude.syntax, { compact })\n            ),\n            descriptors: atrule.descriptors && dumpMapSyntax(atrule.descriptors, compact, syntaxAsAst)\n        };\n    }\n\n    return result;\n}\n\nfunction valueHasVar(tokens) {\n    for (let i = 0; i < tokens.length; i++) {\n        if (tokens[i].value.toLowerCase() === 'var(') {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction syntaxHasTopLevelCommaMultiplier(syntax) {\n    const singleTerm = syntax.terms[0];\n\n    return (\n        syntax.explicit === false &&\n        syntax.terms.length === 1 &&\n        singleTerm.type === 'Multiplier' &&\n        singleTerm.comma === true\n    );\n}\n\nfunction buildMatchResult(matched, error, iterations) {\n    return {\n        matched,\n        iterations,\n        error,\n        ...trace\n    };\n}\n\nfunction matchSyntax(lexer, syntax, value, useCssWideKeywords) {\n    const tokens = prepareTokens(value, lexer.syntax);\n    let result;\n\n    if (valueHasVar(tokens)) {\n        return buildMatchResult(null, new Error('Matching for a tree with var() is not supported'));\n    }\n\n    if (useCssWideKeywords) {\n        result = matchAsTree(tokens, lexer.cssWideKeywordsSyntax, lexer);\n    }\n\n    if (!useCssWideKeywords || !result.match) {\n        result = matchAsTree(tokens, syntax.match, lexer);\n        if (!result.match) {\n            return buildMatchResult(\n                null,\n                new SyntaxMatchError(result.reason, syntax.syntax, value, result),\n                result.iterations\n            );\n        }\n    }\n\n    return buildMatchResult(result.match, null, result.iterations);\n}\n\nexport class Lexer {\n    constructor(config, syntax, structure) {\n        this.cssWideKeywords = cssWideKeywords;\n        this.syntax = syntax;\n        this.generic = false;\n        this.units = { ...units };\n        this.atrules = Object.create(null);\n        this.properties = Object.create(null);\n        this.types = Object.create(null);\n        this.structure = structure || getStructureFromConfig(config);\n\n        if (config) {\n            if (config.cssWideKeywords) {\n                this.cssWideKeywords = config.cssWideKeywords;\n            }\n\n            if (config.units) {\n                for (const group of Object.keys(units)) {\n                    if (Array.isArray(config.units[group])) {\n                        this.units[group] = config.units[group];\n                    }\n                }\n            }\n\n            if (config.types) {\n                for (const [name, type] of Object.entries(config.types)) {\n                    this.addType_(name, type);\n                }\n            }\n\n            if (config.generic) {\n                this.generic = true;\n                for (const [name, value] of Object.entries(createGenericTypes(this.units))) {\n                    this.addType_(name, value);\n                }\n            }\n\n            if (config.atrules) {\n                for (const [name, atrule] of Object.entries(config.atrules)) {\n                    this.addAtrule_(name, atrule);\n                }\n            }\n\n            if (config.properties) {\n                for (const [name, property] of Object.entries(config.properties)) {\n                    this.addProperty_(name, property);\n                }\n            }\n        }\n\n        this.cssWideKeywordsSyntax = buildMatchGraph(this.cssWideKeywords.join(' |  '));\n    }\n\n    checkStructure(ast) {\n        function collectWarning(node, message) {\n            warns.push({ node, message });\n        }\n\n        const structure = this.structure;\n        const warns = [];\n\n        this.syntax.walk(ast, function(node) {\n            if (structure.hasOwnProperty(node.type)) {\n                structure[node.type].check(node, collectWarning);\n            } else {\n                collectWarning(node, 'Unknown node type `' + node.type + '`');\n            }\n        });\n\n        return warns.length ? warns : false;\n    }\n\n    createDescriptor(syntax, type, name, parent = null) {\n        const ref = {\n            type,\n            name\n        };\n        const descriptor = {\n            type,\n            name,\n            parent,\n            serializable: typeof syntax === 'string' || (syntax && typeof syntax.type === 'string'),\n            syntax: null,\n            match: null,\n            matchRef: null // used for properties when a syntax referenced as <'property'> in other syntax definitions\n        };\n\n        if (typeof syntax === 'function') {\n            descriptor.match = buildMatchGraph(syntax, ref);\n        } else {\n            if (typeof syntax === 'string') {\n                // lazy parsing on first access\n                Object.defineProperty(descriptor, 'syntax', {\n                    get() {\n                        Object.defineProperty(descriptor, 'syntax', {\n                            value: parse(syntax)\n                        });\n\n                        return descriptor.syntax;\n                    }\n                });\n            } else {\n                descriptor.syntax = syntax;\n            }\n\n            // lazy graph build on first access\n            Object.defineProperty(descriptor, 'match', {\n                get() {\n                    Object.defineProperty(descriptor, 'match', {\n                        value: buildMatchGraph(descriptor.syntax, ref)\n                    });\n\n                    return descriptor.match;\n                }\n            });\n\n            if (type === 'Property') {\n                Object.defineProperty(descriptor, 'matchRef', {\n                    get() {\n                        const syntax = descriptor.syntax;\n                        const value = syntaxHasTopLevelCommaMultiplier(syntax)\n                            ? buildMatchGraph({\n                                ...syntax,\n                                terms: [syntax.terms[0].term]\n                            }, ref)\n                            : null;\n\n                        Object.defineProperty(descriptor, 'matchRef', {\n                            value\n                        });\n\n                        return value;\n                    }\n                });\n            }\n        }\n\n        return descriptor;\n    }\n    addAtrule_(name, syntax) {\n        if (!syntax) {\n            return;\n        }\n\n        this.atrules[name] = {\n            type: 'Atrule',\n            name: name,\n            prelude: syntax.prelude ? this.createDescriptor(syntax.prelude, 'AtrulePrelude', name) : null,\n            descriptors: syntax.descriptors\n                ? Object.keys(syntax.descriptors).reduce(\n                    (map, descName) => {\n                        map[descName] = this.createDescriptor(syntax.descriptors[descName], 'AtruleDescriptor', descName, name);\n                        return map;\n                    },\n                    Object.create(null)\n                )\n                : null\n        };\n    }\n    addProperty_(name, syntax) {\n        if (!syntax) {\n            return;\n        }\n\n        this.properties[name] = this.createDescriptor(syntax, 'Property', name);\n    }\n    addType_(name, syntax) {\n        if (!syntax) {\n            return;\n        }\n\n        this.types[name] = this.createDescriptor(syntax, 'Type', name);\n    }\n\n    checkAtruleName(atruleName) {\n        if (!this.getAtrule(atruleName)) {\n            return new SyntaxReferenceError('Unknown at-rule', '@' + atruleName);\n        }\n    }\n    checkAtrulePrelude(atruleName, prelude) {\n        const error = this.checkAtruleName(atruleName);\n\n        if (error) {\n            return error;\n        }\n\n        const atrule = this.getAtrule(atruleName);\n\n        if (!atrule.prelude && prelude) {\n            return new SyntaxError('At-rule `@' + atruleName + '` should not contain a prelude');\n        }\n\n        if (atrule.prelude && !prelude) {\n            if (!matchSyntax(this, atrule.prelude, '', false).matched) {\n                return new SyntaxError('At-rule `@' + atruleName + '` should contain a prelude');\n            }\n        }\n    }\n    checkAtruleDescriptorName(atruleName, descriptorName) {\n        const error = this.checkAtruleName(atruleName);\n\n        if (error) {\n            return error;\n        }\n\n        const atrule = this.getAtrule(atruleName);\n        const descriptor = names.keyword(descriptorName);\n\n        if (!atrule.descriptors) {\n            return new SyntaxError('At-rule `@' + atruleName + '` has no known descriptors');\n        }\n\n        if (!atrule.descriptors[descriptor.name] &&\n            !atrule.descriptors[descriptor.basename]) {\n            return new SyntaxReferenceError('Unknown at-rule descriptor', descriptorName);\n        }\n    }\n    checkPropertyName(propertyName) {\n        if (!this.getProperty(propertyName)) {\n            return new SyntaxReferenceError('Unknown property', propertyName);\n        }\n    }\n\n    matchAtrulePrelude(atruleName, prelude) {\n        const error = this.checkAtrulePrelude(atruleName, prelude);\n\n        if (error) {\n            return buildMatchResult(null, error);\n        }\n\n        const atrule = this.getAtrule(atruleName);\n\n        if (!atrule.prelude) {\n            return buildMatchResult(null, null);\n        }\n\n        return matchSyntax(this, atrule.prelude, prelude || '', false);\n    }\n    matchAtruleDescriptor(atruleName, descriptorName, value) {\n        const error = this.checkAtruleDescriptorName(atruleName, descriptorName);\n\n        if (error) {\n            return buildMatchResult(null, error);\n        }\n\n        const atrule = this.getAtrule(atruleName);\n        const descriptor = names.keyword(descriptorName);\n\n        return matchSyntax(this, atrule.descriptors[descriptor.name] || atrule.descriptors[descriptor.basename], value, false);\n    }\n    matchDeclaration(node) {\n        if (node.type !== 'Declaration') {\n            return buildMatchResult(null, new Error('Not a Declaration node'));\n        }\n\n        return this.matchProperty(node.property, node.value);\n    }\n    matchProperty(propertyName, value) {\n        // don't match syntax for a custom property at the moment\n        if (names.property(propertyName).custom) {\n            return buildMatchResult(null, new Error('Lexer matching doesn\\'t applicable for custom properties'));\n        }\n\n        const error = this.checkPropertyName(propertyName);\n\n        if (error) {\n            return buildMatchResult(null, error);\n        }\n\n        return matchSyntax(this, this.getProperty(propertyName), value, true);\n    }\n    matchType(typeName, value) {\n        const typeSyntax = this.getType(typeName);\n\n        if (!typeSyntax) {\n            return buildMatchResult(null, new SyntaxReferenceError('Unknown type', typeName));\n        }\n\n        return matchSyntax(this, typeSyntax, value, false);\n    }\n    match(syntax, value) {\n        if (typeof syntax !== 'string' && (!syntax || !syntax.type)) {\n            return buildMatchResult(null, new SyntaxReferenceError('Bad syntax'));\n        }\n\n        if (typeof syntax === 'string' || !syntax.match) {\n            syntax = this.createDescriptor(syntax, 'Type', 'anonymous');\n        }\n\n        return matchSyntax(this, syntax, value, false);\n    }\n\n    findValueFragments(propertyName, value, type, name) {\n        return matchFragments(this, value, this.matchProperty(propertyName, value), type, name);\n    }\n    findDeclarationValueFragments(declaration, type, name) {\n        return matchFragments(this, declaration.value, this.matchDeclaration(declaration), type, name);\n    }\n    findAllFragments(ast, type, name) {\n        const result = [];\n\n        this.syntax.walk(ast, {\n            visit: 'Declaration',\n            enter: (declaration) => {\n                result.push.apply(result, this.findDeclarationValueFragments(declaration, type, name));\n            }\n        });\n\n        return result;\n    }\n\n    getAtrule(atruleName, fallbackBasename = true) {\n        const atrule = names.keyword(atruleName);\n        const atruleEntry = atrule.vendor && fallbackBasename\n            ? this.atrules[atrule.name] || this.atrules[atrule.basename]\n            : this.atrules[atrule.name];\n\n        return atruleEntry || null;\n    }\n    getAtrulePrelude(atruleName, fallbackBasename = true) {\n        const atrule = this.getAtrule(atruleName, fallbackBasename);\n\n        return atrule && atrule.prelude || null;\n    }\n    getAtruleDescriptor(atruleName, name) {\n        return this.atrules.hasOwnProperty(atruleName) && this.atrules.declarators\n            ? this.atrules[atruleName].declarators[name] || null\n            : null;\n    }\n    getProperty(propertyName, fallbackBasename = true) {\n        const property = names.property(propertyName);\n        const propertyEntry = property.vendor && fallbackBasename\n            ? this.properties[property.name] || this.properties[property.basename]\n            : this.properties[property.name];\n\n        return propertyEntry || null;\n    }\n    getType(name) {\n        return hasOwnProperty.call(this.types, name) ? this.types[name] : null;\n    }\n\n    validate() {\n        function syntaxRef(name, isType) {\n            return isType ? `<${name}>` : `<'${name}'>`;\n        }\n\n        function validate(syntax, name, broken, descriptor) {\n            if (broken.has(name)) {\n                return broken.get(name);\n            }\n\n            broken.set(name, false);\n            if (descriptor.syntax !== null) {\n                walk(descriptor.syntax, function(node) {\n                    if (node.type !== 'Type' && node.type !== 'Property') {\n                        return;\n                    }\n\n                    const map = node.type === 'Type' ? syntax.types : syntax.properties;\n                    const brokenMap = node.type === 'Type' ? brokenTypes : brokenProperties;\n\n                    if (!hasOwnProperty.call(map, node.name)) {\n                        errors.push(`${syntaxRef(name, broken === brokenTypes)} used missed syntax definition ${syntaxRef(node.name, node.type === 'Type')}`);\n                        broken.set(name, true);\n                    } else if (validate(syntax, node.name, brokenMap, map[node.name])) {\n                        errors.push(`${syntaxRef(name, broken === brokenTypes)} used broken syntax definition ${syntaxRef(node.name, node.type === 'Type')}`);\n                        broken.set(name, true);\n                    }\n                }, this);\n            }\n        }\n\n        const errors = [];\n        let brokenTypes = new Map();\n        let brokenProperties = new Map();\n\n        for (const key in this.types) {\n            validate(this, key, brokenTypes, this.types[key]);\n        }\n\n        for (const key in this.properties) {\n            validate(this, key, brokenProperties, this.properties[key]);\n        }\n\n        const brokenTypesArray = [...brokenTypes.keys()].filter(name => brokenTypes.get(name));\n        const brokenPropertiesArray = [...brokenProperties.keys()].filter(name => brokenProperties.get(name));\n\n        if (brokenTypesArray.length || brokenPropertiesArray.length) {\n            return {\n                errors,\n                types: brokenTypesArray,\n                properties: brokenPropertiesArray\n            };\n        }\n\n        return null;\n    }\n    dump(syntaxAsAst, pretty) {\n        return {\n            generic: this.generic,\n            cssWideKeywords: this.cssWideKeywords,\n            units: this.units,\n            types: dumpMapSyntax(this.types, !pretty, syntaxAsAst),\n            properties: dumpMapSyntax(this.properties, !pretty, syntaxAsAst),\n            atrules: dumpAtruleMapSyntax(this.atrules, !pretty, syntaxAsAst)\n        };\n    }\n    toString() {\n        return JSON.stringify(this.dump());\n    }\n};\n","function appendOrSet(a, b) {\n    if (typeof b === 'string' && /^\\s*\\|/.test(b)) {\n        return typeof a === 'string'\n            ? a + b\n            : b.replace(/^\\s*\\|\\s*/, '');\n    }\n\n    return b || null;\n}\n\nfunction sliceProps(obj, props) {\n    const result = Object.create(null);\n\n    for (const [key, value] of Object.entries(obj)) {\n        if (value) {\n            result[key] = {};\n            for (const prop of Object.keys(value)) {\n                if (props.includes(prop)) {\n                    result[key][prop] = value[prop];\n                }\n            }\n        }\n    }\n\n    return result;\n}\n\nexport default function mix(dest, src) {\n    const result = { ...dest };\n\n    for (const [prop, value] of Object.entries(src)) {\n        switch (prop) {\n            case 'generic':\n                result[prop] = Boolean(value);\n                break;\n\n            case 'cssWideKeywords':\n                result[prop] = dest[prop]\n                    ? [...dest[prop], ...value]\n                    : value || [];\n                break;\n\n            case 'units':\n                result[prop] = { ...dest[prop] };\n                for (const [name, patch] of Object.entries(value)) {\n                    result[prop][name] = Array.isArray(patch) ? patch : [];\n                }\n                break;\n\n            case 'atrules':\n                result[prop] = { ...dest[prop] };\n\n                for (const [name, atrule] of Object.entries(value)) {\n                    const exists = result[prop][name] || {};\n                    const current = result[prop][name] = {\n                        prelude: exists.prelude || null,\n                        descriptors: {\n                            ...exists.descriptors\n                        }\n                    };\n\n                    if (!atrule) {\n                        continue;\n                    }\n\n                    current.prelude = atrule.prelude\n                        ? appendOrSet(current.prelude, atrule.prelude)\n                        : current.prelude || null;\n\n                    for (const [descriptorName, descriptorValue] of Object.entries(atrule.descriptors || {})) {\n                        current.descriptors[descriptorName] = descriptorValue\n                            ? appendOrSet(current.descriptors[descriptorName], descriptorValue)\n                            : null;\n                    }\n\n                    if (!Object.keys(current.descriptors).length) {\n                        current.descriptors = null;\n                    }\n                }\n                break;\n\n            case 'types':\n            case 'properties':\n                result[prop] = { ...dest[prop] };\n                for (const [name, syntax] of Object.entries(value)) {\n                    result[prop][name] = appendOrSet(result[prop][name], syntax);\n                }\n                break;\n\n            case 'scope':\n            case 'features':\n                result[prop] = { ...dest[prop] };\n                for (const [name, props] of Object.entries(value)) {\n                    result[prop][name] = { ...result[prop][name], ...props };\n                }\n                break;\n\n            case 'parseContext':\n                result[prop] = {\n                    ...dest[prop],\n                    ...value\n                };\n                break;\n\n            case 'atrule':\n            case 'pseudo':\n                result[prop] = {\n                    ...dest[prop],\n                    ...sliceProps(value, ['parse'])\n                };\n                break;\n\n            case 'node':\n                result[prop] = {\n                    ...dest[prop],\n                    ...sliceProps(value, ['name', 'structure', 'parse', 'generate', 'walkContext'])\n                };\n                break;\n        }\n    }\n\n    return result;\n}\n","import { tokenize } from '../tokenizer/index.js';\nimport { createParser } from '../parser/create.js';\nimport { createGenerator } from '../generator/create.js';\nimport { createConvertor } from '../convertor/create.js';\nimport { createWalker } from '../walker/create.js';\nimport { Lexer } from '../lexer/Lexer.js';\nimport mix from './config/mix.js';\n\nfunction createSyntax(config) {\n    const parse = createParser(config);\n    const walk = createWalker(config);\n    const generate = createGenerator(config);\n    const { fromPlainObject, toPlainObject } = createConvertor(walk);\n\n    const syntax = {\n        lexer: null,\n        createLexer: config => new Lexer(config, syntax, syntax.lexer.structure),\n\n        tokenize,\n        parse,\n        generate,\n\n        walk,\n        find: walk.find,\n        findLast: walk.findLast,\n        findAll: walk.findAll,\n\n        fromPlainObject,\n        toPlainObject,\n\n        fork(extension) {\n            const base = mix({}, config); // copy of config\n\n            return createSyntax(\n                typeof extension === 'function'\n                    ? extension(base) // TODO: remove Object.assign as second parameter\n                    : mix(base, extension)\n            );\n        }\n    };\n\n    syntax.lexer = new Lexer({\n        generic: config.generic,\n        cssWideKeywords: config.cssWideKeywords,\n        units: config.units,\n        types: config.types,\n        atrules: config.atrules,\n        properties: config.properties,\n        node: config.node\n    }, syntax);\n\n    return syntax;\n};\n\nexport default config => createSyntax(mix({}, config));\n","export default {\n    \"generic\": true,\n    \"cssWideKeywords\": [\n        \"initial\",\n        \"inherit\",\n        \"unset\",\n        \"revert\",\n        \"revert-layer\"\n    ],\n    \"units\": {\n        \"angle\": [\n            \"deg\",\n            \"grad\",\n            \"rad\",\n            \"turn\"\n        ],\n        \"decibel\": [\n            \"db\"\n        ],\n        \"flex\": [\n            \"fr\"\n        ],\n        \"frequency\": [\n            \"hz\",\n            \"khz\"\n        ],\n        \"length\": [\n            \"cm\",\n            \"mm\",\n            \"q\",\n            \"in\",\n            \"pt\",\n            \"pc\",\n            \"px\",\n            \"em\",\n            \"rem\",\n            \"ex\",\n            \"rex\",\n            \"cap\",\n            \"rcap\",\n            \"ch\",\n            \"rch\",\n            \"ic\",\n            \"ric\",\n            \"lh\",\n            \"rlh\",\n            \"vw\",\n            \"svw\",\n            \"lvw\",\n            \"dvw\",\n            \"vh\",\n            \"svh\",\n            \"lvh\",\n            \"dvh\",\n            \"vi\",\n            \"svi\",\n            \"lvi\",\n            \"dvi\",\n            \"vb\",\n            \"svb\",\n            \"lvb\",\n            \"dvb\",\n            \"vmin\",\n            \"svmin\",\n            \"lvmin\",\n            \"dvmin\",\n            \"vmax\",\n            \"svmax\",\n            \"lvmax\",\n            \"dvmax\",\n            \"cqw\",\n            \"cqh\",\n            \"cqi\",\n            \"cqb\",\n            \"cqmin\",\n            \"cqmax\"\n        ],\n        \"resolution\": [\n            \"dpi\",\n            \"dpcm\",\n            \"dppx\",\n            \"x\"\n        ],\n        \"semitones\": [\n            \"st\"\n        ],\n        \"time\": [\n            \"s\",\n            \"ms\"\n        ]\n    },\n    \"types\": {\n        \"abs()\": \"abs( <calc-sum> )\",\n        \"absolute-size\": \"xx-small|x-small|small|medium|large|x-large|xx-large|xxx-large\",\n        \"acos()\": \"acos( <calc-sum> )\",\n        \"alpha-value\": \"<number>|<percentage>\",\n        \"angle-percentage\": \"<angle>|<percentage>\",\n        \"angular-color-hint\": \"<angle-percentage>\",\n        \"angular-color-stop\": \"<color>&&<color-stop-angle>?\",\n        \"angular-color-stop-list\": \"[<angular-color-stop> [, <angular-color-hint>]?]# , <angular-color-stop>\",\n        \"animateable-feature\": \"scroll-position|contents|<custom-ident>\",\n        \"asin()\": \"asin( <calc-sum> )\",\n        \"atan()\": \"atan( <calc-sum> )\",\n        \"atan2()\": \"atan2( <calc-sum> , <calc-sum> )\",\n        \"attachment\": \"scroll|fixed|local\",\n        \"attr()\": \"attr( <attr-name> <type-or-unit>? [, <attr-fallback>]? )\",\n        \"attr-matcher\": \"['~'|'|'|'^'|'$'|'*']? '='\",\n        \"attr-modifier\": \"i|s\",\n        \"attribute-selector\": \"'[' <wq-name> ']'|'[' <wq-name> <attr-matcher> [<string-token>|<ident-token>] <attr-modifier>? ']'\",\n        \"auto-repeat\": \"repeat( [auto-fill|auto-fit] , [<line-names>? <fixed-size>]+ <line-names>? )\",\n        \"auto-track-list\": \"[<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>? <auto-repeat> [<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>?\",\n        \"axis\": \"block|inline|vertical|horizontal\",\n        \"baseline-position\": \"[first|last]? baseline\",\n        \"basic-shape\": \"<inset()>|<xywh()>|<rect()>|<circle()>|<ellipse()>|<polygon()>|<path()>\",\n        \"bg-image\": \"none|<image>\",\n        \"bg-layer\": \"<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>\",\n        \"bg-position\": \"[[left|center|right|top|bottom|<length-percentage>]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]|[center|[left|right] <length-percentage>?]&&[center|[top|bottom] <length-percentage>?]]\",\n        \"bg-size\": \"[<length-percentage>|auto]{1,2}|cover|contain\",\n        \"blur()\": \"blur( <length> )\",\n        \"blend-mode\": \"normal|multiply|screen|overlay|darken|lighten|color-dodge|color-burn|hard-light|soft-light|difference|exclusion|hue|saturation|color|luminosity\",\n        \"box\": \"border-box|padding-box|content-box\",\n        \"brightness()\": \"brightness( <number-percentage> )\",\n        \"calc()\": \"calc( <calc-sum> )\",\n        \"calc-sum\": \"<calc-product> [['+'|'-'] <calc-product>]*\",\n        \"calc-product\": \"<calc-value> ['*' <calc-value>|'/' <number>]*\",\n        \"calc-value\": \"<number>|<dimension>|<percentage>|<calc-constant>|( <calc-sum> )\",\n        \"calc-constant\": \"e|pi|infinity|-infinity|NaN\",\n        \"cf-final-image\": \"<image>|<color>\",\n        \"cf-mixing-image\": \"<percentage>?&&<image>\",\n        \"circle()\": \"circle( [<shape-radius>]? [at <position>]? )\",\n        \"clamp()\": \"clamp( <calc-sum>#{3} )\",\n        \"class-selector\": \"'.' <ident-token>\",\n        \"clip-source\": \"<url>\",\n        \"color\": \"<color-base>|currentColor|<system-color>|<device-cmyk()>|<light-dark()>|<-non-standard-color>\",\n        \"color-stop\": \"<color-stop-length>|<color-stop-angle>\",\n        \"color-stop-angle\": \"<angle-percentage>{1,2}\",\n        \"color-stop-length\": \"<length-percentage>{1,2}\",\n        \"color-stop-list\": \"[<linear-color-stop> [, <linear-color-hint>]?]# , <linear-color-stop>\",\n        \"color-interpolation-method\": \"in [<rectangular-color-space>|<polar-color-space> <hue-interpolation-method>?|<custom-color-space>]\",\n        \"combinator\": \"'>'|'+'|'~'|['|' '|']\",\n        \"common-lig-values\": \"[common-ligatures|no-common-ligatures]\",\n        \"compat-auto\": \"searchfield|textarea|push-button|slider-horizontal|checkbox|radio|square-button|menulist|listbox|meter|progress-bar|button\",\n        \"composite-style\": \"clear|copy|source-over|source-in|source-out|source-atop|destination-over|destination-in|destination-out|destination-atop|xor\",\n        \"compositing-operator\": \"add|subtract|intersect|exclude\",\n        \"compound-selector\": \"[<type-selector>? <subclass-selector>*]!\",\n        \"compound-selector-list\": \"<compound-selector>#\",\n        \"complex-selector\": \"<complex-selector-unit> [<combinator>? <complex-selector-unit>]*\",\n        \"complex-selector-list\": \"<complex-selector>#\",\n        \"conic-gradient()\": \"conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )\",\n        \"contextual-alt-values\": \"[contextual|no-contextual]\",\n        \"content-distribution\": \"space-between|space-around|space-evenly|stretch\",\n        \"content-list\": \"[<string>|contents|<image>|<counter>|<quote>|<target>|<leader()>|<attr()>]+\",\n        \"content-position\": \"center|start|end|flex-start|flex-end\",\n        \"content-replacement\": \"<image>\",\n        \"contrast()\": \"contrast( [<number-percentage>] )\",\n        \"cos()\": \"cos( <calc-sum> )\",\n        \"counter\": \"<counter()>|<counters()>\",\n        \"counter()\": \"counter( <counter-name> , <counter-style>? )\",\n        \"counter-name\": \"<custom-ident>\",\n        \"counter-style\": \"<counter-style-name>|symbols( )\",\n        \"counter-style-name\": \"<custom-ident>\",\n        \"counters()\": \"counters( <counter-name> , <string> , <counter-style>? )\",\n        \"cross-fade()\": \"cross-fade( <cf-mixing-image> , <cf-final-image>? )\",\n        \"cubic-bezier-timing-function\": \"ease|ease-in|ease-out|ease-in-out|cubic-bezier( <number [0,1]> , <number> , <number [0,1]> , <number> )\",\n        \"deprecated-system-color\": \"ActiveBorder|ActiveCaption|AppWorkspace|Background|ButtonFace|ButtonHighlight|ButtonShadow|ButtonText|CaptionText|GrayText|Highlight|HighlightText|InactiveBorder|InactiveCaption|InactiveCaptionText|InfoBackground|InfoText|Menu|MenuText|Scrollbar|ThreeDDarkShadow|ThreeDFace|ThreeDHighlight|ThreeDLightShadow|ThreeDShadow|Window|WindowFrame|WindowText\",\n        \"discretionary-lig-values\": \"[discretionary-ligatures|no-discretionary-ligatures]\",\n        \"display-box\": \"contents|none\",\n        \"display-inside\": \"flow|flow-root|table|flex|grid|ruby\",\n        \"display-internal\": \"table-row-group|table-header-group|table-footer-group|table-row|table-cell|table-column-group|table-column|table-caption|ruby-base|ruby-text|ruby-base-container|ruby-text-container\",\n        \"display-legacy\": \"inline-block|inline-list-item|inline-table|inline-flex|inline-grid\",\n        \"display-listitem\": \"<display-outside>?&&[flow|flow-root]?&&list-item\",\n        \"display-outside\": \"block|inline|run-in\",\n        \"drop-shadow()\": \"drop-shadow( <length>{2,3} <color>? )\",\n        \"east-asian-variant-values\": \"[jis78|jis83|jis90|jis04|simplified|traditional]\",\n        \"east-asian-width-values\": \"[full-width|proportional-width]\",\n        \"element()\": \"element( <custom-ident> , [first|start|last|first-except]? )|element( <id-selector> )\",\n        \"ellipse()\": \"ellipse( [<shape-radius>{2}]? [at <position>]? )\",\n        \"ending-shape\": \"circle|ellipse\",\n        \"env()\": \"env( <custom-ident> , <declaration-value>? )\",\n        \"exp()\": \"exp( <calc-sum> )\",\n        \"explicit-track-list\": \"[<line-names>? <track-size>]+ <line-names>?\",\n        \"family-name\": \"<string>|<custom-ident>+\",\n        \"feature-tag-value\": \"<string> [<integer>|on|off]?\",\n        \"feature-type\": \"@stylistic|@historical-forms|@styleset|@character-variant|@swash|@ornaments|@annotation\",\n        \"feature-value-block\": \"<feature-type> '{' <feature-value-declaration-list> '}'\",\n        \"feature-value-block-list\": \"<feature-value-block>+\",\n        \"feature-value-declaration\": \"<custom-ident> : <integer>+ ;\",\n        \"feature-value-declaration-list\": \"<feature-value-declaration>\",\n        \"feature-value-name\": \"<custom-ident>\",\n        \"fill-rule\": \"nonzero|evenodd\",\n        \"filter-function\": \"<blur()>|<brightness()>|<contrast()>|<drop-shadow()>|<grayscale()>|<hue-rotate()>|<invert()>|<opacity()>|<saturate()>|<sepia()>\",\n        \"filter-function-list\": \"[<filter-function>|<url>]+\",\n        \"final-bg-layer\": \"<'background-color'>||<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>\",\n        \"fixed-breadth\": \"<length-percentage>\",\n        \"fixed-repeat\": \"repeat( [<integer [1,∞]>] , [<line-names>? <fixed-size>]+ <line-names>? )\",\n        \"fixed-size\": \"<fixed-breadth>|minmax( <fixed-breadth> , <track-breadth> )|minmax( <inflexible-breadth> , <fixed-breadth> )\",\n        \"font-stretch-absolute\": \"normal|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded|<percentage>\",\n        \"font-variant-css21\": \"[normal|small-caps]\",\n        \"font-weight-absolute\": \"normal|bold|<number [1,1000]>\",\n        \"frequency-percentage\": \"<frequency>|<percentage>\",\n        \"general-enclosed\": \"[<function-token> <any-value>? )]|[( <any-value>? )]\",\n        \"generic-family\": \"<generic-script-specific>|<generic-complete>|<generic-incomplete>|<-non-standard-generic-family>\",\n        \"generic-name\": \"serif|sans-serif|cursive|fantasy|monospace\",\n        \"geometry-box\": \"<shape-box>|fill-box|stroke-box|view-box\",\n        \"gradient\": \"<linear-gradient()>|<repeating-linear-gradient()>|<radial-gradient()>|<repeating-radial-gradient()>|<conic-gradient()>|<repeating-conic-gradient()>|<-legacy-gradient>\",\n        \"grayscale()\": \"grayscale( <number-percentage> )\",\n        \"grid-line\": \"auto|<custom-ident>|[<integer>&&<custom-ident>?]|[span&&[<integer>||<custom-ident>]]\",\n        \"historical-lig-values\": \"[historical-ligatures|no-historical-ligatures]\",\n        \"hsl()\": \"hsl( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsl( <hue> , <percentage> , <percentage> , <alpha-value>? )\",\n        \"hsla()\": \"hsla( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsla( <hue> , <percentage> , <percentage> , <alpha-value>? )\",\n        \"hue\": \"<number>|<angle>\",\n        \"hue-rotate()\": \"hue-rotate( <angle> )\",\n        \"hue-interpolation-method\": \"[shorter|longer|increasing|decreasing] hue\",\n        \"hwb()\": \"hwb( [<hue>|none] [<percentage>|none] [<percentage>|none] [/ [<alpha-value>|none]]? )\",\n        \"hypot()\": \"hypot( <calc-sum># )\",\n        \"image\": \"<url>|<image()>|<image-set()>|<element()>|<paint()>|<cross-fade()>|<gradient>\",\n        \"image()\": \"image( <image-tags>? [<image-src>? , <color>?]! )\",\n        \"image-set()\": \"image-set( <image-set-option># )\",\n        \"image-set-option\": \"[<image>|<string>] [<resolution>||type( <string> )]\",\n        \"image-src\": \"<url>|<string>\",\n        \"image-tags\": \"ltr|rtl\",\n        \"inflexible-breadth\": \"<length-percentage>|min-content|max-content|auto\",\n        \"inset()\": \"inset( <length-percentage>{1,4} [round <'border-radius'>]? )\",\n        \"invert()\": \"invert( <number-percentage> )\",\n        \"keyframes-name\": \"<custom-ident>|<string>\",\n        \"keyframe-block\": \"<keyframe-selector># { <declaration-list> }\",\n        \"keyframe-block-list\": \"<keyframe-block>+\",\n        \"keyframe-selector\": \"from|to|<percentage>|<timeline-range-name> <percentage>\",\n        \"lab()\": \"lab( [<percentage>|<number>|none] [<percentage>|<number>|none] [<percentage>|<number>|none] [/ [<alpha-value>|none]]? )\",\n        \"layer()\": \"layer( <layer-name> )\",\n        \"layer-name\": \"<ident> ['.' <ident>]*\",\n        \"lch()\": \"lch( [<percentage>|<number>|none] [<percentage>|<number>|none] [<hue>|none] [/ [<alpha-value>|none]]? )\",\n        \"leader()\": \"leader( <leader-type> )\",\n        \"leader-type\": \"dotted|solid|space|<string>\",\n        \"length-percentage\": \"<length>|<percentage>\",\n        \"light-dark()\": \"light-dark( <color> , <color> )\",\n        \"line-names\": \"'[' <custom-ident>* ']'\",\n        \"line-name-list\": \"[<line-names>|<name-repeat>]+\",\n        \"line-style\": \"none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset\",\n        \"line-width\": \"<length>|thin|medium|thick\",\n        \"linear-color-hint\": \"<length-percentage>\",\n        \"linear-color-stop\": \"<color> <color-stop-length>?\",\n        \"linear-gradient()\": \"linear-gradient( [[<angle>|to <side-or-corner>]||<color-interpolation-method>]? , <color-stop-list> )\",\n        \"log()\": \"log( <calc-sum> , <calc-sum>? )\",\n        \"mask-layer\": \"<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||<geometry-box>||[<geometry-box>|no-clip]||<compositing-operator>||<masking-mode>\",\n        \"mask-position\": \"[<length-percentage>|left|center|right] [<length-percentage>|top|center|bottom]?\",\n        \"mask-reference\": \"none|<image>|<mask-source>\",\n        \"mask-source\": \"<url>\",\n        \"masking-mode\": \"alpha|luminance|match-source\",\n        \"matrix()\": \"matrix( <number>#{6} )\",\n        \"matrix3d()\": \"matrix3d( <number>#{16} )\",\n        \"max()\": \"max( <calc-sum># )\",\n        \"media-and\": \"<media-in-parens> [and <media-in-parens>]+\",\n        \"media-condition\": \"<media-not>|<media-and>|<media-or>|<media-in-parens>\",\n        \"media-condition-without-or\": \"<media-not>|<media-and>|<media-in-parens>\",\n        \"media-feature\": \"( [<mf-plain>|<mf-boolean>|<mf-range>] )\",\n        \"media-in-parens\": \"( <media-condition> )|<media-feature>|<general-enclosed>\",\n        \"media-not\": \"not <media-in-parens>\",\n        \"media-or\": \"<media-in-parens> [or <media-in-parens>]+\",\n        \"media-query\": \"<media-condition>|[not|only]? <media-type> [and <media-condition-without-or>]?\",\n        \"media-query-list\": \"<media-query>#\",\n        \"media-type\": \"<ident>\",\n        \"mf-boolean\": \"<mf-name>\",\n        \"mf-name\": \"<ident>\",\n        \"mf-plain\": \"<mf-name> : <mf-value>\",\n        \"mf-range\": \"<mf-name> ['<'|'>']? '='? <mf-value>|<mf-value> ['<'|'>']? '='? <mf-name>|<mf-value> '<' '='? <mf-name> '<' '='? <mf-value>|<mf-value> '>' '='? <mf-name> '>' '='? <mf-value>\",\n        \"mf-value\": \"<number>|<dimension>|<ident>|<ratio>\",\n        \"min()\": \"min( <calc-sum># )\",\n        \"minmax()\": \"minmax( [<length-percentage>|min-content|max-content|auto] , [<length-percentage>|<flex>|min-content|max-content|auto] )\",\n        \"mod()\": \"mod( <calc-sum> , <calc-sum> )\",\n        \"name-repeat\": \"repeat( [<integer [1,∞]>|auto-fill] , <line-names>+ )\",\n        \"named-color\": \"transparent|aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen\",\n        \"namespace-prefix\": \"<ident>\",\n        \"ns-prefix\": \"[<ident-token>|'*']? '|'\",\n        \"number-percentage\": \"<number>|<percentage>\",\n        \"numeric-figure-values\": \"[lining-nums|oldstyle-nums]\",\n        \"numeric-fraction-values\": \"[diagonal-fractions|stacked-fractions]\",\n        \"numeric-spacing-values\": \"[proportional-nums|tabular-nums]\",\n        \"nth\": \"<an-plus-b>|even|odd\",\n        \"opacity()\": \"opacity( [<number-percentage>] )\",\n        \"overflow-position\": \"unsafe|safe\",\n        \"outline-radius\": \"<length>|<percentage>\",\n        \"page-body\": \"<declaration>? [; <page-body>]?|<page-margin-box> <page-body>\",\n        \"page-margin-box\": \"<page-margin-box-type> '{' <declaration-list> '}'\",\n        \"page-margin-box-type\": \"@top-left-corner|@top-left|@top-center|@top-right|@top-right-corner|@bottom-left-corner|@bottom-left|@bottom-center|@bottom-right|@bottom-right-corner|@left-top|@left-middle|@left-bottom|@right-top|@right-middle|@right-bottom\",\n        \"page-selector-list\": \"[<page-selector>#]?\",\n        \"page-selector\": \"<pseudo-page>+|<ident> <pseudo-page>*\",\n        \"page-size\": \"A5|A4|A3|B5|B4|JIS-B5|JIS-B4|letter|legal|ledger\",\n        \"path()\": \"path( [<fill-rule> ,]? <string> )\",\n        \"paint()\": \"paint( <ident> , <declaration-value>? )\",\n        \"perspective()\": \"perspective( [<length [0,∞]>|none] )\",\n        \"polygon()\": \"polygon( <fill-rule>? , [<length-percentage> <length-percentage>]# )\",\n        \"polar-color-space\": \"hsl|hwb|lch|oklch\",\n        \"position\": \"[[left|center|right]||[top|center|bottom]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]?|[[left|right] <length-percentage>]&&[[top|bottom] <length-percentage>]]\",\n        \"pow()\": \"pow( <calc-sum> , <calc-sum> )\",\n        \"pseudo-class-selector\": \"':' <ident-token>|':' <function-token> <any-value> ')'\",\n        \"pseudo-element-selector\": \"':' <pseudo-class-selector>|<legacy-pseudo-element-selector>\",\n        \"pseudo-page\": \": [left|right|first|blank]\",\n        \"quote\": \"open-quote|close-quote|no-open-quote|no-close-quote\",\n        \"radial-gradient()\": \"radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )\",\n        \"ratio\": \"<number [0,∞]> [/ <number [0,∞]>]?\",\n        \"ray()\": \"ray( <angle>&&<ray-size>?&&contain?&&[at <position>]? )\",\n        \"ray-size\": \"closest-side|closest-corner|farthest-side|farthest-corner|sides\",\n        \"rectangular-color-space\": \"srgb|srgb-linear|display-p3|a98-rgb|prophoto-rgb|rec2020|lab|oklab|xyz|xyz-d50|xyz-d65\",\n        \"relative-selector\": \"<combinator>? <complex-selector>\",\n        \"relative-selector-list\": \"<relative-selector>#\",\n        \"relative-size\": \"larger|smaller\",\n        \"rem()\": \"rem( <calc-sum> , <calc-sum> )\",\n        \"repeat-style\": \"repeat-x|repeat-y|[repeat|space|round|no-repeat]{1,2}\",\n        \"repeating-conic-gradient()\": \"repeating-conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )\",\n        \"repeating-linear-gradient()\": \"repeating-linear-gradient( [<angle>|to <side-or-corner>]? , <color-stop-list> )\",\n        \"repeating-radial-gradient()\": \"repeating-radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )\",\n        \"reversed-counter-name\": \"reversed( <counter-name> )\",\n        \"rgb()\": \"rgb( <percentage>{3} [/ <alpha-value>]? )|rgb( <number>{3} [/ <alpha-value>]? )|rgb( <percentage>#{3} , <alpha-value>? )|rgb( <number>#{3} , <alpha-value>? )\",\n        \"rgba()\": \"rgba( <percentage>{3} [/ <alpha-value>]? )|rgba( <number>{3} [/ <alpha-value>]? )|rgba( <percentage>#{3} , <alpha-value>? )|rgba( <number>#{3} , <alpha-value>? )\",\n        \"rotate()\": \"rotate( [<angle>|<zero>] )\",\n        \"rotate3d()\": \"rotate3d( <number> , <number> , <number> , [<angle>|<zero>] )\",\n        \"rotateX()\": \"rotateX( [<angle>|<zero>] )\",\n        \"rotateY()\": \"rotateY( [<angle>|<zero>] )\",\n        \"rotateZ()\": \"rotateZ( [<angle>|<zero>] )\",\n        \"round()\": \"round( <rounding-strategy>? , <calc-sum> , <calc-sum> )\",\n        \"rounding-strategy\": \"nearest|up|down|to-zero\",\n        \"saturate()\": \"saturate( <number-percentage> )\",\n        \"scale()\": \"scale( [<number>|<percentage>]#{1,2} )\",\n        \"scale3d()\": \"scale3d( [<number>|<percentage>]#{3} )\",\n        \"scaleX()\": \"scaleX( [<number>|<percentage>] )\",\n        \"scaleY()\": \"scaleY( [<number>|<percentage>] )\",\n        \"scaleZ()\": \"scaleZ( [<number>|<percentage>] )\",\n        \"scroll()\": \"scroll( [<axis>||<scroller>]? )\",\n        \"scroller\": \"root|nearest\",\n        \"self-position\": \"center|start|end|self-start|self-end|flex-start|flex-end\",\n        \"shape-radius\": \"<length-percentage>|closest-side|farthest-side\",\n        \"sign()\": \"sign( <calc-sum> )\",\n        \"skew()\": \"skew( [<angle>|<zero>] , [<angle>|<zero>]? )\",\n        \"skewX()\": \"skewX( [<angle>|<zero>] )\",\n        \"skewY()\": \"skewY( [<angle>|<zero>] )\",\n        \"sepia()\": \"sepia( <number-percentage> )\",\n        \"shadow\": \"inset?&&<length>{2,4}&&<color>?\",\n        \"shadow-t\": \"[<length>{2,3}&&<color>?]\",\n        \"shape\": \"rect( <top> , <right> , <bottom> , <left> )|rect( <top> <right> <bottom> <left> )\",\n        \"shape-box\": \"<box>|margin-box\",\n        \"side-or-corner\": \"[left|right]||[top|bottom]\",\n        \"sin()\": \"sin( <calc-sum> )\",\n        \"single-animation\": \"<'animation-duration'>||<easing-function>||<'animation-delay'>||<single-animation-iteration-count>||<single-animation-direction>||<single-animation-fill-mode>||<single-animation-play-state>||[none|<keyframes-name>]||<single-animation-timeline>\",\n        \"single-animation-direction\": \"normal|reverse|alternate|alternate-reverse\",\n        \"single-animation-fill-mode\": \"none|forwards|backwards|both\",\n        \"single-animation-iteration-count\": \"infinite|<number>\",\n        \"single-animation-play-state\": \"running|paused\",\n        \"single-animation-timeline\": \"auto|none|<dashed-ident>|<scroll()>|<view()>\",\n        \"single-transition\": \"[none|<single-transition-property>]||<time>||<easing-function>||<time>||<transition-behavior-value>\",\n        \"single-transition-property\": \"all|<custom-ident>\",\n        \"size\": \"closest-side|farthest-side|closest-corner|farthest-corner|<length>|<length-percentage>{2}\",\n        \"sqrt()\": \"sqrt( <calc-sum> )\",\n        \"step-position\": \"jump-start|jump-end|jump-none|jump-both|start|end\",\n        \"step-timing-function\": \"step-start|step-end|steps( <integer> [, <step-position>]? )\",\n        \"subclass-selector\": \"<id-selector>|<class-selector>|<attribute-selector>|<pseudo-class-selector>\",\n        \"supports-condition\": \"not <supports-in-parens>|<supports-in-parens> [and <supports-in-parens>]*|<supports-in-parens> [or <supports-in-parens>]*\",\n        \"supports-in-parens\": \"( <supports-condition> )|<supports-feature>|<general-enclosed>\",\n        \"supports-feature\": \"<supports-decl>|<supports-selector-fn>\",\n        \"supports-decl\": \"( <declaration> )\",\n        \"supports-selector-fn\": \"selector( <complex-selector> )\",\n        \"symbol\": \"<string>|<image>|<custom-ident>\",\n        \"tan()\": \"tan( <calc-sum> )\",\n        \"target\": \"<target-counter()>|<target-counters()>|<target-text()>\",\n        \"target-counter()\": \"target-counter( [<string>|<url>] , <custom-ident> , <counter-style>? )\",\n        \"target-counters()\": \"target-counters( [<string>|<url>] , <custom-ident> , <string> , <counter-style>? )\",\n        \"target-text()\": \"target-text( [<string>|<url>] , [content|before|after|first-letter]? )\",\n        \"time-percentage\": \"<time>|<percentage>\",\n        \"timeline-range-name\": \"cover|contain|entry|exit|entry-crossing|exit-crossing\",\n        \"easing-function\": \"linear|<cubic-bezier-timing-function>|<step-timing-function>\",\n        \"track-breadth\": \"<length-percentage>|<flex>|min-content|max-content|auto\",\n        \"track-list\": \"[<line-names>? [<track-size>|<track-repeat>]]+ <line-names>?\",\n        \"track-repeat\": \"repeat( [<integer [1,∞]>] , [<line-names>? <track-size>]+ <line-names>? )\",\n        \"track-size\": \"<track-breadth>|minmax( <inflexible-breadth> , <track-breadth> )|fit-content( <length-percentage> )\",\n        \"transform-function\": \"<matrix()>|<translate()>|<translateX()>|<translateY()>|<scale()>|<scaleX()>|<scaleY()>|<rotate()>|<skew()>|<skewX()>|<skewY()>|<matrix3d()>|<translate3d()>|<translateZ()>|<scale3d()>|<scaleZ()>|<rotate3d()>|<rotateX()>|<rotateY()>|<rotateZ()>|<perspective()>\",\n        \"transform-list\": \"<transform-function>+\",\n        \"transition-behavior-value\": \"normal|allow-discrete\",\n        \"translate()\": \"translate( <length-percentage> , <length-percentage>? )\",\n        \"translate3d()\": \"translate3d( <length-percentage> , <length-percentage> , <length> )\",\n        \"translateX()\": \"translateX( <length-percentage> )\",\n        \"translateY()\": \"translateY( <length-percentage> )\",\n        \"translateZ()\": \"translateZ( <length> )\",\n        \"type-or-unit\": \"string|color|url|integer|number|length|angle|time|frequency|cap|ch|em|ex|ic|lh|rlh|rem|vb|vi|vw|vh|vmin|vmax|mm|Q|cm|in|pt|pc|px|deg|grad|rad|turn|ms|s|Hz|kHz|%\",\n        \"type-selector\": \"<wq-name>|<ns-prefix>? '*'\",\n        \"var()\": \"var( <custom-property-name> , <declaration-value>? )\",\n        \"view()\": \"view( [<axis>||<'view-timeline-inset'>]? )\",\n        \"viewport-length\": \"auto|<length-percentage>\",\n        \"visual-box\": \"content-box|padding-box|border-box\",\n        \"wq-name\": \"<ns-prefix>? <ident-token>\",\n        \"-legacy-gradient\": \"<-webkit-gradient()>|<-legacy-linear-gradient>|<-legacy-repeating-linear-gradient>|<-legacy-radial-gradient>|<-legacy-repeating-radial-gradient>\",\n        \"-legacy-linear-gradient\": \"-moz-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-linear-gradient( <-legacy-linear-gradient-arguments> )\",\n        \"-legacy-repeating-linear-gradient\": \"-moz-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )\",\n        \"-legacy-linear-gradient-arguments\": \"[<angle>|<side-or-corner>]? , <color-stop-list>\",\n        \"-legacy-radial-gradient\": \"-moz-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-radial-gradient( <-legacy-radial-gradient-arguments> )\",\n        \"-legacy-repeating-radial-gradient\": \"-moz-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )\",\n        \"-legacy-radial-gradient-arguments\": \"[<position> ,]? [[[<-legacy-radial-gradient-shape>||<-legacy-radial-gradient-size>]|[<length>|<percentage>]{2}] ,]? <color-stop-list>\",\n        \"-legacy-radial-gradient-size\": \"closest-side|closest-corner|farthest-side|farthest-corner|contain|cover\",\n        \"-legacy-radial-gradient-shape\": \"circle|ellipse\",\n        \"-non-standard-font\": \"-apple-system-body|-apple-system-headline|-apple-system-subheadline|-apple-system-caption1|-apple-system-caption2|-apple-system-footnote|-apple-system-short-body|-apple-system-short-headline|-apple-system-short-subheadline|-apple-system-short-caption1|-apple-system-short-footnote|-apple-system-tall-body\",\n        \"-non-standard-color\": \"-moz-ButtonDefault|-moz-ButtonHoverFace|-moz-ButtonHoverText|-moz-CellHighlight|-moz-CellHighlightText|-moz-Combobox|-moz-ComboboxText|-moz-Dialog|-moz-DialogText|-moz-dragtargetzone|-moz-EvenTreeRow|-moz-Field|-moz-FieldText|-moz-html-CellHighlight|-moz-html-CellHighlightText|-moz-mac-accentdarkestshadow|-moz-mac-accentdarkshadow|-moz-mac-accentface|-moz-mac-accentlightesthighlight|-moz-mac-accentlightshadow|-moz-mac-accentregularhighlight|-moz-mac-accentregularshadow|-moz-mac-chrome-active|-moz-mac-chrome-inactive|-moz-mac-focusring|-moz-mac-menuselect|-moz-mac-menushadow|-moz-mac-menutextselect|-moz-MenuHover|-moz-MenuHoverText|-moz-MenuBarText|-moz-MenuBarHoverText|-moz-nativehyperlinktext|-moz-OddTreeRow|-moz-win-communicationstext|-moz-win-mediatext|-moz-activehyperlinktext|-moz-default-background-color|-moz-default-color|-moz-hyperlinktext|-moz-visitedhyperlinktext|-webkit-activelink|-webkit-focus-ring-color|-webkit-link|-webkit-text\",\n        \"-non-standard-image-rendering\": \"optimize-contrast|-moz-crisp-edges|-o-crisp-edges|-webkit-optimize-contrast\",\n        \"-non-standard-overflow\": \"overlay|-moz-scrollbars-none|-moz-scrollbars-horizontal|-moz-scrollbars-vertical|-moz-hidden-unscrollable\",\n        \"-non-standard-size\": \"intrinsic|min-intrinsic|-webkit-fill-available|-webkit-fit-content|-webkit-min-content|-webkit-max-content|-moz-available|-moz-fit-content|-moz-min-content|-moz-max-content\",\n        \"-webkit-gradient()\": \"-webkit-gradient( <-webkit-gradient-type> , <-webkit-gradient-point> [, <-webkit-gradient-point>|, <-webkit-gradient-radius> , <-webkit-gradient-point>] [, <-webkit-gradient-radius>]? [, <-webkit-gradient-color-stop>]* )\",\n        \"-webkit-gradient-color-stop\": \"from( <color> )|color-stop( [<number-zero-one>|<percentage>] , <color> )|to( <color> )\",\n        \"-webkit-gradient-point\": \"[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]\",\n        \"-webkit-gradient-radius\": \"<length>|<percentage>\",\n        \"-webkit-gradient-type\": \"linear|radial\",\n        \"-webkit-mask-box-repeat\": \"repeat|stretch|round\",\n        \"-ms-filter-function-list\": \"<-ms-filter-function>+\",\n        \"-ms-filter-function\": \"<-ms-filter-function-progid>|<-ms-filter-function-legacy>\",\n        \"-ms-filter-function-progid\": \"'progid:' [<ident-token> '.']* [<ident-token>|<function-token> <any-value>? )]\",\n        \"-ms-filter-function-legacy\": \"<ident-token>|<function-token> <any-value>? )\",\n        \"absolute-color-base\": \"<hex-color>|<absolute-color-function>|<named-color>|transparent\",\n        \"absolute-color-function\": \"<rgb()>|<rgba()>|<hsl()>|<hsla()>|<hwb()>|<lab()>|<lch()>|<oklab()>|<oklch()>|<color()>\",\n        \"age\": \"child|young|old\",\n        \"anchor-name\": \"<dashed-ident>\",\n        \"attr-name\": \"<wq-name>\",\n        \"attr-fallback\": \"<any-value>\",\n        \"bg-clip\": \"<box>|border|text\",\n        \"bottom\": \"<length>|auto\",\n        \"container-name\": \"<custom-ident>\",\n        \"container-condition\": \"not <query-in-parens>|<query-in-parens> [[and <query-in-parens>]*|[or <query-in-parens>]*]\",\n        \"coord-box\": \"content-box|padding-box|border-box|fill-box|stroke-box|view-box\",\n        \"generic-voice\": \"[<age>? <gender> <integer>?]\",\n        \"gender\": \"male|female|neutral\",\n        \"generic-script-specific\": \"generic( kai )|generic( fangsong )|generic( nastaliq )\",\n        \"generic-complete\": \"serif|sans-serif|system-ui|cursive|fantasy|math|monospace\",\n        \"generic-incomplete\": \"ui-serif|ui-sans-serif|ui-monospace|ui-rounded\",\n        \"-non-standard-generic-family\": \"-apple-system|BlinkMacSystemFont\",\n        \"left\": \"<length>|auto\",\n        \"color-base\": \"<hex-color>|<color-function>|<named-color>|<color-mix()>|transparent\",\n        \"color-function\": \"<rgb()>|<rgba()>|<hsl()>|<hsla()>|<hwb()>|<lab()>|<lch()>|<oklab()>|<oklch()>|<color()>\",\n        \"system-color\": \"AccentColor|AccentColorText|ActiveText|ButtonBorder|ButtonFace|ButtonText|Canvas|CanvasText|Field|FieldText|GrayText|Highlight|HighlightText|LinkText|Mark|MarkText|SelectedItem|SelectedItemText|VisitedText\",\n        \"device-cmyk()\": \"<legacy-device-cmyk-syntax>|<modern-device-cmyk-syntax>\",\n        \"legacy-device-cmyk-syntax\": \"device-cmyk( <number>#{4} )\",\n        \"modern-device-cmyk-syntax\": \"device-cmyk( <cmyk-component>{4} [/ [<alpha-value>|none]]? )\",\n        \"cmyk-component\": \"<number>|<percentage>|none\",\n        \"color-mix()\": \"color-mix( <color-interpolation-method> , [<color>&&<percentage [0,100]>?]#{2} )\",\n        \"color-space\": \"<rectangular-color-space>|<polar-color-space>|<custom-color-space>\",\n        \"custom-color-space\": \"<dashed-ident>\",\n        \"paint\": \"none|<color>|<url> [none|<color>]?|context-fill|context-stroke\",\n        \"palette-identifier\": \"<dashed-ident>\",\n        \"right\": \"<length>|auto\",\n        \"scope-start\": \"<forgiving-selector-list>\",\n        \"scope-end\": \"<forgiving-selector-list>\",\n        \"forgiving-selector-list\": \"<complex-real-selector-list>\",\n        \"forgiving-relative-selector-list\": \"<relative-real-selector-list>\",\n        \"selector-list\": \"<complex-selector-list>\",\n        \"complex-real-selector-list\": \"<complex-real-selector>#\",\n        \"simple-selector-list\": \"<simple-selector>#\",\n        \"relative-real-selector-list\": \"<relative-real-selector>#\",\n        \"complex-selector-unit\": \"[<compound-selector>? <pseudo-compound-selector>*]!\",\n        \"complex-real-selector\": \"<compound-selector> [<combinator>? <compound-selector>]*\",\n        \"relative-real-selector\": \"<combinator>? <complex-real-selector>\",\n        \"pseudo-compound-selector\": \"<pseudo-element-selector> <pseudo-class-selector>*\",\n        \"simple-selector\": \"<type-selector>|<subclass-selector>\",\n        \"legacy-pseudo-element-selector\": \"':' [before|after|first-line|first-letter]\",\n        \"single-animation-composition\": \"replace|add|accumulate\",\n        \"svg-length\": \"<percentage>|<length>|<number>\",\n        \"svg-writing-mode\": \"lr-tb|rl-tb|tb-rl|lr|rl|tb\",\n        \"top\": \"<length>|auto\",\n        \"x\": \"<number>\",\n        \"y\": \"<number>\",\n        \"declaration\": \"<ident-token> : <declaration-value>? ['!' important]?\",\n        \"declaration-list\": \"[<declaration>? ';']* <declaration>?\",\n        \"url\": \"url( <string> <url-modifier>* )|<url-token>\",\n        \"url-modifier\": \"<ident>|<function-token> <any-value> )\",\n        \"number-zero-one\": \"<number [0,1]>\",\n        \"number-one-or-greater\": \"<number [1,∞]>\",\n        \"color()\": \"color( <colorspace-params> [/ [<alpha-value>|none]]? )\",\n        \"colorspace-params\": \"[<predefined-rgb-params>|<xyz-params>]\",\n        \"predefined-rgb-params\": \"<predefined-rgb> [<number>|<percentage>|none]{3}\",\n        \"predefined-rgb\": \"srgb|srgb-linear|display-p3|a98-rgb|prophoto-rgb|rec2020\",\n        \"xyz-params\": \"<xyz-space> [<number>|<percentage>|none]{3}\",\n        \"xyz-space\": \"xyz|xyz-d50|xyz-d65\",\n        \"oklab()\": \"oklab( [<percentage>|<number>|none] [<percentage>|<number>|none] [<percentage>|<number>|none] [/ [<alpha-value>|none]]? )\",\n        \"oklch()\": \"oklch( [<percentage>|<number>|none] [<percentage>|<number>|none] [<hue>|none] [/ [<alpha-value>|none]]? )\",\n        \"offset-path\": \"<ray()>|<url>|<basic-shape>\",\n        \"rect()\": \"rect( [<length-percentage>|auto]{4} [round <'border-radius'>]? )\",\n        \"xywh()\": \"xywh( <length-percentage>{2} <length-percentage [0,∞]>{2} [round <'border-radius'>]? )\",\n        \"query-in-parens\": \"( <container-condition> )|( <size-feature> )|style( <style-query> )|<general-enclosed>\",\n        \"size-feature\": \"<mf-plain>|<mf-boolean>|<mf-range>\",\n        \"style-feature\": \"<declaration>\",\n        \"style-query\": \"<style-condition>|<style-feature>\",\n        \"style-condition\": \"not <style-in-parens>|<style-in-parens> [[and <style-in-parens>]*|[or <style-in-parens>]*]\",\n        \"style-in-parens\": \"( <style-condition> )|( <style-feature> )|<general-enclosed>\",\n        \"-non-standard-display\": \"-ms-inline-flexbox|-ms-grid|-ms-inline-grid|-webkit-flex|-webkit-inline-flex|-webkit-box|-webkit-inline-box|-moz-inline-stack|-moz-box|-moz-inline-box\",\n        \"inset-area\": \"[[left|center|right|span-left|span-right|x-start|x-end|span-x-start|span-x-end|x-self-start|x-self-end|span-x-self-start|span-x-self-end|span-all]||[top|center|bottom|span-top|span-bottom|y-start|y-end|span-y-start|span-y-end|y-self-start|y-self-end|span-y-self-start|span-y-self-end|span-all]|[block-start|center|block-end|span-block-start|span-block-end|span-all]||[inline-start|center|inline-end|span-inline-start|span-inline-end|span-all]|[self-block-start|self-block-end|span-self-block-start|span-self-block-end|span-all]||[self-inline-start|self-inline-end|span-self-inline-start|span-self-inline-end|span-all]|[start|center|end|span-start|span-end|span-all]{1,2}|[self-start|center|self-end|span-self-start|span-self-end|span-all]{1,2}]\",\n        \"position-area\": \"[[left|center|right|span-left|span-right|x-start|x-end|span-x-start|span-x-end|x-self-start|x-self-end|span-x-self-start|span-x-self-end|span-all]||[top|center|bottom|span-top|span-bottom|y-start|y-end|span-y-start|span-y-end|y-self-start|y-self-end|span-y-self-start|span-y-self-end|span-all]|[block-start|center|block-end|span-block-start|span-block-end|span-all]||[inline-start|center|inline-end|span-inline-start|span-inline-end|span-all]|[self-block-start|center|self-block-end|span-self-block-start|span-self-block-end|span-all]||[self-inline-start|center|self-inline-end|span-self-inline-start|span-self-inline-end|span-all]|[start|center|end|span-start|span-end|span-all]{1,2}|[self-start|center|self-end|span-self-start|span-self-end|span-all]{1,2}]\",\n        \"anchor()\": \"anchor( <anchor-element>?&&<anchor-side> , <length-percentage>? )\",\n        \"anchor-side\": \"inside|outside|top|left|right|bottom|start|end|self-start|self-end|<percentage>|center\",\n        \"anchor-size()\": \"anchor-size( [<anchor-element>||<anchor-size>]? , <length-percentage>? )\",\n        \"anchor-size\": \"width|height|block|inline|self-block|self-inline\",\n        \"anchor-element\": \"<dashed-ident>\",\n        \"try-size\": \"most-width|most-height|most-block-size|most-inline-size\",\n        \"try-tactic\": \"flip-block||flip-inline||flip-start\",\n        \"font-variant-css2\": \"normal|small-caps\",\n        \"font-width-css3\": \"normal|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded\",\n        \"system-family-name\": \"caption|icon|menu|message-box|small-caption|status-bar\"\n    },\n    \"properties\": {\n        \"--*\": \"<declaration-value>\",\n        \"-ms-accelerator\": \"false|true\",\n        \"-ms-block-progression\": \"tb|rl|bt|lr\",\n        \"-ms-content-zoom-chaining\": \"none|chained\",\n        \"-ms-content-zooming\": \"none|zoom\",\n        \"-ms-content-zoom-limit\": \"<'-ms-content-zoom-limit-min'> <'-ms-content-zoom-limit-max'>\",\n        \"-ms-content-zoom-limit-max\": \"<percentage>\",\n        \"-ms-content-zoom-limit-min\": \"<percentage>\",\n        \"-ms-content-zoom-snap\": \"<'-ms-content-zoom-snap-type'>||<'-ms-content-zoom-snap-points'>\",\n        \"-ms-content-zoom-snap-points\": \"snapInterval( <percentage> , <percentage> )|snapList( <percentage># )\",\n        \"-ms-content-zoom-snap-type\": \"none|proximity|mandatory\",\n        \"-ms-filter\": \"<string>\",\n        \"-ms-flow-from\": \"[none|<custom-ident>]#\",\n        \"-ms-flow-into\": \"[none|<custom-ident>]#\",\n        \"-ms-grid-columns\": \"none|<track-list>|<auto-track-list>\",\n        \"-ms-grid-rows\": \"none|<track-list>|<auto-track-list>\",\n        \"-ms-high-contrast-adjust\": \"auto|none\",\n        \"-ms-hyphenate-limit-chars\": \"auto|<integer>{1,3}\",\n        \"-ms-hyphenate-limit-lines\": \"no-limit|<integer>\",\n        \"-ms-hyphenate-limit-zone\": \"<percentage>|<length>\",\n        \"-ms-ime-align\": \"auto|after\",\n        \"-ms-overflow-style\": \"auto|none|scrollbar|-ms-autohiding-scrollbar\",\n        \"-ms-scrollbar-3dlight-color\": \"<color>\",\n        \"-ms-scrollbar-arrow-color\": \"<color>\",\n        \"-ms-scrollbar-base-color\": \"<color>\",\n        \"-ms-scrollbar-darkshadow-color\": \"<color>\",\n        \"-ms-scrollbar-face-color\": \"<color>\",\n        \"-ms-scrollbar-highlight-color\": \"<color>\",\n        \"-ms-scrollbar-shadow-color\": \"<color>\",\n        \"-ms-scrollbar-track-color\": \"<color>\",\n        \"-ms-scroll-chaining\": \"chained|none\",\n        \"-ms-scroll-limit\": \"<'-ms-scroll-limit-x-min'> <'-ms-scroll-limit-y-min'> <'-ms-scroll-limit-x-max'> <'-ms-scroll-limit-y-max'>\",\n        \"-ms-scroll-limit-x-max\": \"auto|<length>\",\n        \"-ms-scroll-limit-x-min\": \"<length>\",\n        \"-ms-scroll-limit-y-max\": \"auto|<length>\",\n        \"-ms-scroll-limit-y-min\": \"<length>\",\n        \"-ms-scroll-rails\": \"none|railed\",\n        \"-ms-scroll-snap-points-x\": \"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )\",\n        \"-ms-scroll-snap-points-y\": \"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )\",\n        \"-ms-scroll-snap-type\": \"none|proximity|mandatory\",\n        \"-ms-scroll-snap-x\": \"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-x'>\",\n        \"-ms-scroll-snap-y\": \"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-y'>\",\n        \"-ms-scroll-translation\": \"none|vertical-to-horizontal\",\n        \"-ms-text-autospace\": \"none|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space\",\n        \"-ms-touch-select\": \"grippers|none\",\n        \"-ms-user-select\": \"none|element|text\",\n        \"-ms-wrap-flow\": \"auto|both|start|end|maximum|clear\",\n        \"-ms-wrap-margin\": \"<length>\",\n        \"-ms-wrap-through\": \"wrap|none\",\n        \"-moz-appearance\": \"none|button|button-arrow-down|button-arrow-next|button-arrow-previous|button-arrow-up|button-bevel|button-focus|caret|checkbox|checkbox-container|checkbox-label|checkmenuitem|dualbutton|groupbox|listbox|listitem|menuarrow|menubar|menucheckbox|menuimage|menuitem|menuitemtext|menulist|menulist-button|menulist-text|menulist-textfield|menupopup|menuradio|menuseparator|meterbar|meterchunk|progressbar|progressbar-vertical|progresschunk|progresschunk-vertical|radio|radio-container|radio-label|radiomenuitem|range|range-thumb|resizer|resizerpanel|scale-horizontal|scalethumbend|scalethumb-horizontal|scalethumbstart|scalethumbtick|scalethumb-vertical|scale-vertical|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|separator|sheet|spinner|spinner-downbutton|spinner-textfield|spinner-upbutton|splitter|statusbar|statusbarpanel|tab|tabpanel|tabpanels|tab-scroll-arrow-back|tab-scroll-arrow-forward|textfield|textfield-multiline|toolbar|toolbarbutton|toolbarbutton-dropdown|toolbargripper|toolbox|tooltip|treeheader|treeheadercell|treeheadersortarrow|treeitem|treeline|treetwisty|treetwistyopen|treeview|-moz-mac-unified-toolbar|-moz-win-borderless-glass|-moz-win-browsertabbar-toolbox|-moz-win-communicationstext|-moz-win-communications-toolbox|-moz-win-exclude-glass|-moz-win-glass|-moz-win-mediatext|-moz-win-media-toolbox|-moz-window-button-box|-moz-window-button-box-maximized|-moz-window-button-close|-moz-window-button-maximize|-moz-window-button-minimize|-moz-window-button-restore|-moz-window-frame-bottom|-moz-window-frame-left|-moz-window-frame-right|-moz-window-titlebar|-moz-window-titlebar-maximized\",\n        \"-moz-binding\": \"<url>|none\",\n        \"-moz-border-bottom-colors\": \"<color>+|none\",\n        \"-moz-border-left-colors\": \"<color>+|none\",\n        \"-moz-border-right-colors\": \"<color>+|none\",\n        \"-moz-border-top-colors\": \"<color>+|none\",\n        \"-moz-context-properties\": \"none|[fill|fill-opacity|stroke|stroke-opacity]#\",\n        \"-moz-float-edge\": \"border-box|content-box|margin-box|padding-box\",\n        \"-moz-force-broken-image-icon\": \"0|1\",\n        \"-moz-image-region\": \"<shape>|auto\",\n        \"-moz-orient\": \"inline|block|horizontal|vertical\",\n        \"-moz-outline-radius\": \"<outline-radius>{1,4} [/ <outline-radius>{1,4}]?\",\n        \"-moz-outline-radius-bottomleft\": \"<outline-radius>\",\n        \"-moz-outline-radius-bottomright\": \"<outline-radius>\",\n        \"-moz-outline-radius-topleft\": \"<outline-radius>\",\n        \"-moz-outline-radius-topright\": \"<outline-radius>\",\n        \"-moz-stack-sizing\": \"ignore|stretch-to-fit\",\n        \"-moz-text-blink\": \"none|blink\",\n        \"-moz-user-focus\": \"ignore|normal|select-after|select-before|select-menu|select-same|select-all|none\",\n        \"-moz-user-input\": \"auto|none|enabled|disabled\",\n        \"-moz-user-modify\": \"read-only|read-write|write-only\",\n        \"-moz-window-dragging\": \"drag|no-drag\",\n        \"-moz-window-shadow\": \"default|menu|tooltip|sheet|none\",\n        \"-webkit-appearance\": \"none|button|button-bevel|caps-lock-indicator|caret|checkbox|default-button|inner-spin-button|listbox|listitem|media-controls-background|media-controls-fullscreen-background|media-current-time-display|media-enter-fullscreen-button|media-exit-fullscreen-button|media-fullscreen-button|media-mute-button|media-overlay-play-button|media-play-button|media-seek-back-button|media-seek-forward-button|media-slider|media-sliderthumb|media-time-remaining-display|media-toggle-closed-captions-button|media-volume-slider|media-volume-slider-container|media-volume-sliderthumb|menulist|menulist-button|menulist-text|menulist-textfield|meter|progress-bar|progress-bar-value|push-button|radio|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbargripper-horizontal|scrollbargripper-vertical|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|searchfield-cancel-button|searchfield-decoration|searchfield-results-button|searchfield-results-decoration|slider-horizontal|slider-vertical|sliderthumb-horizontal|sliderthumb-vertical|square-button|textarea|textfield|-apple-pay-button\",\n        \"-webkit-border-before\": \"<'border-width'>||<'border-style'>||<color>\",\n        \"-webkit-border-before-color\": \"<color>\",\n        \"-webkit-border-before-style\": \"<'border-style'>\",\n        \"-webkit-border-before-width\": \"<'border-width'>\",\n        \"-webkit-box-reflect\": \"[above|below|right|left]? <length>? <image>?\",\n        \"-webkit-line-clamp\": \"none|<integer>\",\n        \"-webkit-mask\": \"[<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||[<box>|border|padding|content|text]||[<box>|border|padding|content]]#\",\n        \"-webkit-mask-attachment\": \"<attachment>#\",\n        \"-webkit-mask-clip\": \"[<box>|border|padding|content|text]#\",\n        \"-webkit-mask-composite\": \"<composite-style>#\",\n        \"-webkit-mask-image\": \"<mask-reference>#\",\n        \"-webkit-mask-origin\": \"[<box>|border|padding|content]#\",\n        \"-webkit-mask-position\": \"<position>#\",\n        \"-webkit-mask-position-x\": \"[<length-percentage>|left|center|right]#\",\n        \"-webkit-mask-position-y\": \"[<length-percentage>|top|center|bottom]#\",\n        \"-webkit-mask-repeat\": \"<repeat-style>#\",\n        \"-webkit-mask-repeat-x\": \"repeat|no-repeat|space|round\",\n        \"-webkit-mask-repeat-y\": \"repeat|no-repeat|space|round\",\n        \"-webkit-mask-size\": \"<bg-size>#\",\n        \"-webkit-overflow-scrolling\": \"auto|touch\",\n        \"-webkit-tap-highlight-color\": \"<color>\",\n        \"-webkit-text-fill-color\": \"<color>\",\n        \"-webkit-text-stroke\": \"<length>||<color>\",\n        \"-webkit-text-stroke-color\": \"<color>\",\n        \"-webkit-text-stroke-width\": \"<length>\",\n        \"-webkit-touch-callout\": \"default|none\",\n        \"-webkit-user-modify\": \"read-only|read-write|read-write-plaintext-only\",\n        \"accent-color\": \"auto|<color>\",\n        \"align-content\": \"normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>\",\n        \"align-items\": \"normal|stretch|<baseline-position>|[<overflow-position>? <self-position>]\",\n        \"align-self\": \"auto|normal|stretch|<baseline-position>|<overflow-position>? <self-position>\",\n        \"align-tracks\": \"[normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>]#\",\n        \"all\": \"initial|inherit|unset|revert|revert-layer\",\n        \"anchor-name\": \"none|<dashed-ident>#\",\n        \"anchor-scope\": \"none|all|<dashed-ident>#\",\n        \"animation\": \"<single-animation>#\",\n        \"animation-composition\": \"<single-animation-composition>#\",\n        \"animation-delay\": \"<time>#\",\n        \"animation-direction\": \"<single-animation-direction>#\",\n        \"animation-duration\": \"<time>#\",\n        \"animation-fill-mode\": \"<single-animation-fill-mode>#\",\n        \"animation-iteration-count\": \"<single-animation-iteration-count>#\",\n        \"animation-name\": \"[none|<keyframes-name>]#\",\n        \"animation-play-state\": \"<single-animation-play-state>#\",\n        \"animation-range\": \"[<'animation-range-start'> <'animation-range-end'>?]#\",\n        \"animation-range-end\": \"[normal|<length-percentage>|<timeline-range-name> <length-percentage>?]#\",\n        \"animation-range-start\": \"[normal|<length-percentage>|<timeline-range-name> <length-percentage>?]#\",\n        \"animation-timing-function\": \"<easing-function>#\",\n        \"animation-timeline\": \"<single-animation-timeline>#\",\n        \"appearance\": \"none|auto|textfield|menulist-button|<compat-auto>\",\n        \"aspect-ratio\": \"auto||<ratio>\",\n        \"azimuth\": \"<angle>|[[left-side|far-left|left|center-left|center|center-right|right|far-right|right-side]||behind]|leftwards|rightwards\",\n        \"backdrop-filter\": \"none|<filter-function-list>\",\n        \"backface-visibility\": \"visible|hidden\",\n        \"background\": \"[<bg-layer> ,]* <final-bg-layer>\",\n        \"background-attachment\": \"<attachment>#\",\n        \"background-blend-mode\": \"<blend-mode>#\",\n        \"background-clip\": \"<bg-clip>#\",\n        \"background-color\": \"<color>\",\n        \"background-image\": \"<bg-image>#\",\n        \"background-origin\": \"<box>#\",\n        \"background-position\": \"<bg-position>#\",\n        \"background-position-x\": \"[center|[[left|right|x-start|x-end]? <length-percentage>?]!]#\",\n        \"background-position-y\": \"[center|[[top|bottom|y-start|y-end]? <length-percentage>?]!]#\",\n        \"background-repeat\": \"<repeat-style>#\",\n        \"background-size\": \"<bg-size>#\",\n        \"block-size\": \"<'width'>\",\n        \"border\": \"<line-width>||<line-style>||<color>\",\n        \"border-block\": \"<'border-top-width'>||<'border-top-style'>||<color>\",\n        \"border-block-color\": \"<'border-top-color'>{1,2}\",\n        \"border-block-style\": \"<'border-top-style'>\",\n        \"border-block-width\": \"<'border-top-width'>\",\n        \"border-block-end\": \"<'border-top-width'>||<'border-top-style'>||<color>\",\n        \"border-block-end-color\": \"<'border-top-color'>\",\n        \"border-block-end-style\": \"<'border-top-style'>\",\n        \"border-block-end-width\": \"<'border-top-width'>\",\n        \"border-block-start\": \"<'border-top-width'>||<'border-top-style'>||<color>\",\n        \"border-block-start-color\": \"<'border-top-color'>\",\n        \"border-block-start-style\": \"<'border-top-style'>\",\n        \"border-block-start-width\": \"<'border-top-width'>\",\n        \"border-bottom\": \"<line-width>||<line-style>||<color>\",\n        \"border-bottom-color\": \"<'border-top-color'>\",\n        \"border-bottom-left-radius\": \"<length-percentage>{1,2}\",\n        \"border-bottom-right-radius\": \"<length-percentage>{1,2}\",\n        \"border-bottom-style\": \"<line-style>\",\n        \"border-bottom-width\": \"<line-width>\",\n        \"border-collapse\": \"collapse|separate\",\n        \"border-color\": \"<color>{1,4}\",\n        \"border-end-end-radius\": \"<length-percentage>{1,2}\",\n        \"border-end-start-radius\": \"<length-percentage>{1,2}\",\n        \"border-image\": \"<'border-image-source'>||<'border-image-slice'> [/ <'border-image-width'>|/ <'border-image-width'>? / <'border-image-outset'>]?||<'border-image-repeat'>\",\n        \"border-image-outset\": \"[<length>|<number>]{1,4}\",\n        \"border-image-repeat\": \"[stretch|repeat|round|space]{1,2}\",\n        \"border-image-slice\": \"<number-percentage>{1,4}&&fill?\",\n        \"border-image-source\": \"none|<image>\",\n        \"border-image-width\": \"[<length-percentage>|<number>|auto]{1,4}\",\n        \"border-inline\": \"<'border-top-width'>||<'border-top-style'>||<color>\",\n        \"border-inline-end\": \"<'border-top-width'>||<'border-top-style'>||<color>\",\n        \"border-inline-color\": \"<'border-top-color'>{1,2}\",\n        \"border-inline-style\": \"<'border-top-style'>\",\n        \"border-inline-width\": \"<'border-top-width'>\",\n        \"border-inline-end-color\": \"<'border-top-color'>\",\n        \"border-inline-end-style\": \"<'border-top-style'>\",\n        \"border-inline-end-width\": \"<'border-top-width'>\",\n        \"border-inline-start\": \"<'border-top-width'>||<'border-top-style'>||<color>\",\n        \"border-inline-start-color\": \"<'border-top-color'>\",\n        \"border-inline-start-style\": \"<'border-top-style'>\",\n        \"border-inline-start-width\": \"<'border-top-width'>\",\n        \"border-left\": \"<line-width>||<line-style>||<color>\",\n        \"border-left-color\": \"<color>\",\n        \"border-left-style\": \"<line-style>\",\n        \"border-left-width\": \"<line-width>\",\n        \"border-radius\": \"<length-percentage>{1,4} [/ <length-percentage>{1,4}]?\",\n        \"border-right\": \"<line-width>||<line-style>||<color>\",\n        \"border-right-color\": \"<color>\",\n        \"border-right-style\": \"<line-style>\",\n        \"border-right-width\": \"<line-width>\",\n        \"border-spacing\": \"<length> <length>?\",\n        \"border-start-end-radius\": \"<length-percentage>{1,2}\",\n        \"border-start-start-radius\": \"<length-percentage>{1,2}\",\n        \"border-style\": \"<line-style>{1,4}\",\n        \"border-top\": \"<line-width>||<line-style>||<color>\",\n        \"border-top-color\": \"<color>\",\n        \"border-top-left-radius\": \"<length-percentage>{1,2}\",\n        \"border-top-right-radius\": \"<length-percentage>{1,2}\",\n        \"border-top-style\": \"<line-style>\",\n        \"border-top-width\": \"<line-width>\",\n        \"border-width\": \"<line-width>{1,4}\",\n        \"bottom\": \"<length>|<percentage>|auto\",\n        \"box-align\": \"start|center|end|baseline|stretch\",\n        \"box-decoration-break\": \"slice|clone\",\n        \"box-direction\": \"normal|reverse|inherit\",\n        \"box-flex\": \"<number>\",\n        \"box-flex-group\": \"<integer>\",\n        \"box-lines\": \"single|multiple\",\n        \"box-ordinal-group\": \"<integer>\",\n        \"box-orient\": \"horizontal|vertical|inline-axis|block-axis|inherit\",\n        \"box-pack\": \"start|center|end|justify\",\n        \"box-shadow\": \"none|<shadow>#\",\n        \"box-sizing\": \"content-box|border-box\",\n        \"break-after\": \"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region\",\n        \"break-before\": \"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region\",\n        \"break-inside\": \"auto|avoid|avoid-page|avoid-column|avoid-region\",\n        \"caption-side\": \"top|bottom|block-start|block-end|inline-start|inline-end\",\n        \"caret\": \"<'caret-color'>||<'caret-shape'>\",\n        \"caret-color\": \"auto|<color>\",\n        \"caret-shape\": \"auto|bar|block|underscore\",\n        \"clear\": \"none|left|right|both|inline-start|inline-end\",\n        \"clip\": \"<shape>|auto\",\n        \"clip-path\": \"<clip-source>|[<basic-shape>||<geometry-box>]|none\",\n        \"clip-rule\": \"nonzero|evenodd\",\n        \"color\": \"<color>\",\n        \"color-interpolation-filters\": \"auto|sRGB|linearRGB\",\n        \"color-scheme\": \"normal|[light|dark|<custom-ident>]+&&only?\",\n        \"column-count\": \"<integer>|auto\",\n        \"column-fill\": \"auto|balance\",\n        \"column-gap\": \"normal|<length-percentage>\",\n        \"column-rule\": \"<'column-rule-width'>||<'column-rule-style'>||<'column-rule-color'>\",\n        \"column-rule-color\": \"<color>\",\n        \"column-rule-style\": \"<'border-style'>\",\n        \"column-rule-width\": \"<'border-width'>\",\n        \"column-span\": \"none|all\",\n        \"column-width\": \"<length>|auto\",\n        \"columns\": \"<'column-width'>||<'column-count'>\",\n        \"contain\": \"none|strict|content|[[size||inline-size]||layout||style||paint]\",\n        \"contain-intrinsic-size\": \"[auto? [none|<length>]]{1,2}\",\n        \"contain-intrinsic-block-size\": \"auto? [none|<length>]\",\n        \"contain-intrinsic-height\": \"auto? [none|<length>]\",\n        \"contain-intrinsic-inline-size\": \"auto? [none|<length>]\",\n        \"contain-intrinsic-width\": \"auto? [none|<length>]\",\n        \"container\": \"<'container-name'> [/ <'container-type'>]?\",\n        \"container-name\": \"none|<custom-ident>+\",\n        \"container-type\": \"normal||[size|inline-size]\",\n        \"content\": \"normal|none|[<content-replacement>|<content-list>] [/ [<string>|<counter>]+]?\",\n        \"content-visibility\": \"visible|auto|hidden\",\n        \"counter-increment\": \"[<counter-name> <integer>?]+|none\",\n        \"counter-reset\": \"[<counter-name> <integer>?|<reversed-counter-name> <integer>?]+|none\",\n        \"counter-set\": \"[<counter-name> <integer>?]+|none\",\n        \"cursor\": \"[[<url> [<x> <y>]? ,]* [auto|default|none|context-menu|help|pointer|progress|wait|cell|crosshair|text|vertical-text|alias|copy|move|no-drop|not-allowed|e-resize|n-resize|ne-resize|nw-resize|s-resize|se-resize|sw-resize|w-resize|ew-resize|ns-resize|nesw-resize|nwse-resize|col-resize|row-resize|all-scroll|zoom-in|zoom-out|grab|grabbing|hand|-webkit-grab|-webkit-grabbing|-webkit-zoom-in|-webkit-zoom-out|-moz-grab|-moz-grabbing|-moz-zoom-in|-moz-zoom-out]]\",\n        \"d\": \"none|path( <string> )\",\n        \"cx\": \"<length>|<percentage>\",\n        \"cy\": \"<length>|<percentage>\",\n        \"direction\": \"ltr|rtl\",\n        \"display\": \"[<display-outside>||<display-inside>]|<display-listitem>|<display-internal>|<display-box>|<display-legacy>|<-non-standard-display>\",\n        \"dominant-baseline\": \"auto|use-script|no-change|reset-size|ideographic|alphabetic|hanging|mathematical|central|middle|text-after-edge|text-before-edge\",\n        \"empty-cells\": \"show|hide\",\n        \"field-sizing\": \"content|fixed\",\n        \"fill\": \"<paint>\",\n        \"fill-opacity\": \"<number-zero-one>\",\n        \"fill-rule\": \"nonzero|evenodd\",\n        \"filter\": \"none|<filter-function-list>|<-ms-filter-function-list>\",\n        \"flex\": \"none|[<'flex-grow'> <'flex-shrink'>?||<'flex-basis'>]\",\n        \"flex-basis\": \"content|<'width'>\",\n        \"flex-direction\": \"row|row-reverse|column|column-reverse\",\n        \"flex-flow\": \"<'flex-direction'>||<'flex-wrap'>\",\n        \"flex-grow\": \"<number>\",\n        \"flex-shrink\": \"<number>\",\n        \"flex-wrap\": \"nowrap|wrap|wrap-reverse\",\n        \"float\": \"left|right|none|inline-start|inline-end\",\n        \"font\": \"[[<'font-style'>||<font-variant-css2>||<'font-weight'>||<font-width-css3>]? <'font-size'> [/ <'line-height'>]? <'font-family'>#]|<system-family-name>|<-non-standard-font>\",\n        \"font-family\": \"[<family-name>|<generic-family>]#\",\n        \"font-feature-settings\": \"normal|<feature-tag-value>#\",\n        \"font-kerning\": \"auto|normal|none\",\n        \"font-language-override\": \"normal|<string>\",\n        \"font-optical-sizing\": \"auto|none\",\n        \"font-palette\": \"normal|light|dark|<palette-identifier>\",\n        \"font-variation-settings\": \"normal|[<string> <number>]#\",\n        \"font-size\": \"<absolute-size>|<relative-size>|<length-percentage>\",\n        \"font-size-adjust\": \"none|[ex-height|cap-height|ch-width|ic-width|ic-height]? [from-font|<number>]\",\n        \"font-smooth\": \"auto|never|always|<absolute-size>|<length>\",\n        \"font-stretch\": \"<font-stretch-absolute>\",\n        \"font-style\": \"normal|italic|oblique <angle>?\",\n        \"font-synthesis\": \"none|[weight||style||small-caps||position]\",\n        \"font-synthesis-position\": \"auto|none\",\n        \"font-synthesis-small-caps\": \"auto|none\",\n        \"font-synthesis-style\": \"auto|none\",\n        \"font-synthesis-weight\": \"auto|none\",\n        \"font-variant\": \"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>||stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )||[small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps]||<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero||<east-asian-variant-values>||<east-asian-width-values>||ruby]\",\n        \"font-variant-alternates\": \"normal|[stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )]\",\n        \"font-variant-caps\": \"normal|small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps\",\n        \"font-variant-east-asian\": \"normal|[<east-asian-variant-values>||<east-asian-width-values>||ruby]\",\n        \"font-variant-emoji\": \"normal|text|emoji|unicode\",\n        \"font-variant-ligatures\": \"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>]\",\n        \"font-variant-numeric\": \"normal|[<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero]\",\n        \"font-variant-position\": \"normal|sub|super\",\n        \"font-weight\": \"<font-weight-absolute>|bolder|lighter\",\n        \"forced-color-adjust\": \"auto|none\",\n        \"gap\": \"<'row-gap'> <'column-gap'>?\",\n        \"grid\": \"<'grid-template'>|<'grid-template-rows'> / [auto-flow&&dense?] <'grid-auto-columns'>?|[auto-flow&&dense?] <'grid-auto-rows'>? / <'grid-template-columns'>\",\n        \"grid-area\": \"<grid-line> [/ <grid-line>]{0,3}\",\n        \"grid-auto-columns\": \"<track-size>+\",\n        \"grid-auto-flow\": \"[row|column]||dense\",\n        \"grid-auto-rows\": \"<track-size>+\",\n        \"grid-column\": \"<grid-line> [/ <grid-line>]?\",\n        \"grid-column-end\": \"<grid-line>\",\n        \"grid-column-gap\": \"<length-percentage>\",\n        \"grid-column-start\": \"<grid-line>\",\n        \"grid-gap\": \"<'grid-row-gap'> <'grid-column-gap'>?\",\n        \"grid-row\": \"<grid-line> [/ <grid-line>]?\",\n        \"grid-row-end\": \"<grid-line>\",\n        \"grid-row-gap\": \"<length-percentage>\",\n        \"grid-row-start\": \"<grid-line>\",\n        \"grid-template\": \"none|[<'grid-template-rows'> / <'grid-template-columns'>]|[<line-names>? <string> <track-size>? <line-names>?]+ [/ <explicit-track-list>]?\",\n        \"grid-template-areas\": \"none|<string>+\",\n        \"grid-template-columns\": \"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?\",\n        \"grid-template-rows\": \"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?\",\n        \"hanging-punctuation\": \"none|[first||[force-end|allow-end]||last]\",\n        \"height\": \"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>\",\n        \"hyphenate-character\": \"auto|<string>\",\n        \"hyphenate-limit-chars\": \"[auto|<integer>]{1,3}\",\n        \"hyphens\": \"none|manual|auto\",\n        \"image-orientation\": \"from-image|<angle>|[<angle>? flip]\",\n        \"image-rendering\": \"auto|crisp-edges|pixelated|optimizeSpeed|optimizeQuality|<-non-standard-image-rendering>\",\n        \"image-resolution\": \"[from-image||<resolution>]&&snap?\",\n        \"ime-mode\": \"auto|normal|active|inactive|disabled\",\n        \"initial-letter\": \"normal|[<number> <integer>?]\",\n        \"initial-letter-align\": \"[auto|alphabetic|hanging|ideographic]\",\n        \"inline-size\": \"<'width'>\",\n        \"input-security\": \"auto|none\",\n        \"inset\": \"<'top'>{1,4}\",\n        \"inset-block\": \"<'top'>{1,2}\",\n        \"inset-block-end\": \"<'top'>\",\n        \"inset-block-start\": \"<'top'>\",\n        \"inset-inline\": \"<'top'>{1,2}\",\n        \"inset-inline-end\": \"<'top'>\",\n        \"inset-inline-start\": \"<'top'>\",\n        \"interpolate-size\": \"numeric-only|allow-keywords\",\n        \"isolation\": \"auto|isolate\",\n        \"justify-content\": \"normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]\",\n        \"justify-items\": \"normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]|legacy|legacy&&[left|right|center]\",\n        \"justify-self\": \"auto|normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]\",\n        \"justify-tracks\": \"[normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]]#\",\n        \"left\": \"<length>|<percentage>|auto\",\n        \"letter-spacing\": \"normal|<length-percentage>\",\n        \"line-break\": \"auto|loose|normal|strict|anywhere\",\n        \"line-clamp\": \"none|<integer>\",\n        \"line-height\": \"normal|<number>|<length>|<percentage>\",\n        \"line-height-step\": \"<length>\",\n        \"list-style\": \"<'list-style-type'>||<'list-style-position'>||<'list-style-image'>\",\n        \"list-style-image\": \"<image>|none\",\n        \"list-style-position\": \"inside|outside\",\n        \"list-style-type\": \"<counter-style>|<string>|none\",\n        \"margin\": \"[<length>|<percentage>|auto]{1,4}\",\n        \"margin-block\": \"<'margin-left'>{1,2}\",\n        \"margin-block-end\": \"<'margin-left'>\",\n        \"margin-block-start\": \"<'margin-left'>\",\n        \"margin-bottom\": \"<length>|<percentage>|auto\",\n        \"margin-inline\": \"<'margin-left'>{1,2}\",\n        \"margin-inline-end\": \"<'margin-left'>\",\n        \"margin-inline-start\": \"<'margin-left'>\",\n        \"margin-left\": \"<length>|<percentage>|auto\",\n        \"margin-right\": \"<length>|<percentage>|auto\",\n        \"margin-top\": \"<length>|<percentage>|auto\",\n        \"margin-trim\": \"none|in-flow|all\",\n        \"marker\": \"none|<url>\",\n        \"marker-end\": \"none|<url>\",\n        \"marker-mid\": \"none|<url>\",\n        \"marker-start\": \"none|<url>\",\n        \"mask\": \"<mask-layer>#\",\n        \"mask-border\": \"<'mask-border-source'>||<'mask-border-slice'> [/ <'mask-border-width'>? [/ <'mask-border-outset'>]?]?||<'mask-border-repeat'>||<'mask-border-mode'>\",\n        \"mask-border-mode\": \"luminance|alpha\",\n        \"mask-border-outset\": \"[<length>|<number>]{1,4}\",\n        \"mask-border-repeat\": \"[stretch|repeat|round|space]{1,2}\",\n        \"mask-border-slice\": \"<number-percentage>{1,4} fill?\",\n        \"mask-border-source\": \"none|<image>\",\n        \"mask-border-width\": \"[<length-percentage>|<number>|auto]{1,4}\",\n        \"mask-clip\": \"[<geometry-box>|no-clip]#\",\n        \"mask-composite\": \"<compositing-operator>#\",\n        \"mask-image\": \"<mask-reference>#\",\n        \"mask-mode\": \"<masking-mode>#\",\n        \"mask-origin\": \"<geometry-box>#\",\n        \"mask-position\": \"<position>#\",\n        \"mask-repeat\": \"<repeat-style>#\",\n        \"mask-size\": \"<bg-size>#\",\n        \"mask-type\": \"luminance|alpha\",\n        \"masonry-auto-flow\": \"[pack|next]||[definite-first|ordered]\",\n        \"math-depth\": \"auto-add|add( <integer> )|<integer>\",\n        \"math-shift\": \"normal|compact\",\n        \"math-style\": \"normal|compact\",\n        \"max-block-size\": \"<'max-width'>\",\n        \"max-height\": \"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>\",\n        \"max-inline-size\": \"<'max-width'>\",\n        \"max-lines\": \"none|<integer>\",\n        \"max-width\": \"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>\",\n        \"min-block-size\": \"<'min-width'>\",\n        \"min-height\": \"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>\",\n        \"min-inline-size\": \"<'min-width'>\",\n        \"min-width\": \"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>\",\n        \"mix-blend-mode\": \"<blend-mode>|plus-lighter\",\n        \"object-fit\": \"fill|contain|cover|none|scale-down\",\n        \"object-position\": \"<position>\",\n        \"offset\": \"[<'offset-position'>? [<'offset-path'> [<'offset-distance'>||<'offset-rotate'>]?]?]! [/ <'offset-anchor'>]?\",\n        \"offset-anchor\": \"auto|<position>\",\n        \"offset-distance\": \"<length-percentage>\",\n        \"offset-path\": \"none|<offset-path>||<coord-box>\",\n        \"offset-position\": \"normal|auto|<position>\",\n        \"offset-rotate\": \"[auto|reverse]||<angle>\",\n        \"opacity\": \"<alpha-value>\",\n        \"order\": \"<integer>\",\n        \"orphans\": \"<integer>\",\n        \"outline\": \"[<'outline-width'>||<'outline-style'>||<'outline-color'>]\",\n        \"outline-color\": \"auto|<color>\",\n        \"outline-offset\": \"<length>\",\n        \"outline-style\": \"auto|<'border-style'>\",\n        \"outline-width\": \"<line-width>\",\n        \"overflow\": \"[visible|hidden|clip|scroll|auto]{1,2}|<-non-standard-overflow>\",\n        \"overflow-anchor\": \"auto|none\",\n        \"overflow-block\": \"visible|hidden|clip|scroll|auto\",\n        \"overflow-clip-box\": \"padding-box|content-box\",\n        \"overflow-clip-margin\": \"<visual-box>||<length [0,∞]>\",\n        \"overflow-inline\": \"visible|hidden|clip|scroll|auto\",\n        \"overflow-wrap\": \"normal|break-word|anywhere\",\n        \"overflow-x\": \"visible|hidden|clip|scroll|auto\",\n        \"overflow-y\": \"visible|hidden|clip|scroll|auto\",\n        \"overlay\": \"none|auto\",\n        \"overscroll-behavior\": \"[contain|none|auto]{1,2}\",\n        \"overscroll-behavior-block\": \"contain|none|auto\",\n        \"overscroll-behavior-inline\": \"contain|none|auto\",\n        \"overscroll-behavior-x\": \"contain|none|auto\",\n        \"overscroll-behavior-y\": \"contain|none|auto\",\n        \"padding\": \"[<length>|<percentage>]{1,4}\",\n        \"padding-block\": \"<'padding-left'>{1,2}\",\n        \"padding-block-end\": \"<'padding-left'>\",\n        \"padding-block-start\": \"<'padding-left'>\",\n        \"padding-bottom\": \"<length>|<percentage>\",\n        \"padding-inline\": \"<'padding-left'>{1,2}\",\n        \"padding-inline-end\": \"<'padding-left'>\",\n        \"padding-inline-start\": \"<'padding-left'>\",\n        \"padding-left\": \"<length>|<percentage>\",\n        \"padding-right\": \"<length>|<percentage>\",\n        \"padding-top\": \"<length>|<percentage>\",\n        \"page\": \"auto|<custom-ident>\",\n        \"page-break-after\": \"auto|always|avoid|left|right|recto|verso\",\n        \"page-break-before\": \"auto|always|avoid|left|right|recto|verso\",\n        \"page-break-inside\": \"auto|avoid\",\n        \"paint-order\": \"normal|[fill||stroke||markers]\",\n        \"perspective\": \"none|<length>\",\n        \"perspective-origin\": \"<position>\",\n        \"place-content\": \"<'align-content'> <'justify-content'>?\",\n        \"place-items\": \"<'align-items'> <'justify-items'>?\",\n        \"place-self\": \"<'align-self'> <'justify-self'>?\",\n        \"pointer-events\": \"auto|none|visiblePainted|visibleFill|visibleStroke|visible|painted|fill|stroke|all|inherit\",\n        \"position\": \"static|relative|absolute|sticky|fixed|-webkit-sticky\",\n        \"position-anchor\": \"auto|<anchor-name>\",\n        \"position-area\": \"none|<position-area>\",\n        \"position-try\": \"<'position-try-order'>? <'position-try-fallbacks'>\",\n        \"position-try-fallbacks\": \"none|[[<dashed-ident>||<try-tactic>]|<'position-area'>]#\",\n        \"position-try-order\": \"normal|<try-size>\",\n        \"position-visibility\": \"always|[anchors-valid||anchors-visible||no-overflow]\",\n        \"print-color-adjust\": \"economy|exact\",\n        \"quotes\": \"none|auto|[<string> <string>]+\",\n        \"r\": \"<length>|<percentage>\",\n        \"resize\": \"none|both|horizontal|vertical|block|inline\",\n        \"right\": \"<length>|<percentage>|auto\",\n        \"rotate\": \"none|<angle>|[x|y|z|<number>{3}]&&<angle>\",\n        \"row-gap\": \"normal|<length-percentage>\",\n        \"ruby-align\": \"start|center|space-between|space-around\",\n        \"ruby-merge\": \"separate|collapse|auto\",\n        \"ruby-position\": \"[alternate||[over|under]]|inter-character\",\n        \"rx\": \"<length>|<percentage>\",\n        \"ry\": \"<length>|<percentage>\",\n        \"scale\": \"none|<number>{1,3}\",\n        \"scrollbar-color\": \"auto|<color>{2}\",\n        \"scrollbar-gutter\": \"auto|stable&&both-edges?\",\n        \"scrollbar-width\": \"auto|thin|none\",\n        \"scroll-behavior\": \"auto|smooth\",\n        \"scroll-margin\": \"<length>{1,4}\",\n        \"scroll-margin-block\": \"<length>{1,2}\",\n        \"scroll-margin-block-start\": \"<length>\",\n        \"scroll-margin-block-end\": \"<length>\",\n        \"scroll-margin-bottom\": \"<length>\",\n        \"scroll-margin-inline\": \"<length>{1,2}\",\n        \"scroll-margin-inline-start\": \"<length>\",\n        \"scroll-margin-inline-end\": \"<length>\",\n        \"scroll-margin-left\": \"<length>\",\n        \"scroll-margin-right\": \"<length>\",\n        \"scroll-margin-top\": \"<length>\",\n        \"scroll-padding\": \"[auto|<length-percentage>]{1,4}\",\n        \"scroll-padding-block\": \"[auto|<length-percentage>]{1,2}\",\n        \"scroll-padding-block-start\": \"auto|<length-percentage>\",\n        \"scroll-padding-block-end\": \"auto|<length-percentage>\",\n        \"scroll-padding-bottom\": \"auto|<length-percentage>\",\n        \"scroll-padding-inline\": \"[auto|<length-percentage>]{1,2}\",\n        \"scroll-padding-inline-start\": \"auto|<length-percentage>\",\n        \"scroll-padding-inline-end\": \"auto|<length-percentage>\",\n        \"scroll-padding-left\": \"auto|<length-percentage>\",\n        \"scroll-padding-right\": \"auto|<length-percentage>\",\n        \"scroll-padding-top\": \"auto|<length-percentage>\",\n        \"scroll-snap-align\": \"[none|start|end|center]{1,2}\",\n        \"scroll-snap-coordinate\": \"none|<position>#\",\n        \"scroll-snap-destination\": \"<position>\",\n        \"scroll-snap-points-x\": \"none|repeat( <length-percentage> )\",\n        \"scroll-snap-points-y\": \"none|repeat( <length-percentage> )\",\n        \"scroll-snap-stop\": \"normal|always\",\n        \"scroll-snap-type\": \"none|[x|y|block|inline|both] [mandatory|proximity]?\",\n        \"scroll-snap-type-x\": \"none|mandatory|proximity\",\n        \"scroll-snap-type-y\": \"none|mandatory|proximity\",\n        \"scroll-timeline\": \"[<'scroll-timeline-name'>||<'scroll-timeline-axis'>]#\",\n        \"scroll-timeline-axis\": \"[block|inline|x|y]#\",\n        \"scroll-timeline-name\": \"[none|<dashed-ident>]#\",\n        \"shape-image-threshold\": \"<alpha-value>\",\n        \"shape-margin\": \"<length-percentage>\",\n        \"shape-outside\": \"none|[<shape-box>||<basic-shape>]|<image>\",\n        \"shape-rendering\": \"auto|optimizeSpeed|crispEdges|geometricPrecision\",\n        \"stroke\": \"<paint>\",\n        \"stroke-dasharray\": \"none|[<svg-length>+]#\",\n        \"stroke-dashoffset\": \"<svg-length>\",\n        \"stroke-linecap\": \"butt|round|square\",\n        \"stroke-linejoin\": \"miter|round|bevel\",\n        \"stroke-miterlimit\": \"<number-one-or-greater>\",\n        \"stroke-opacity\": \"<'opacity'>\",\n        \"stroke-width\": \"<svg-length>\",\n        \"tab-size\": \"<integer>|<length>\",\n        \"table-layout\": \"auto|fixed\",\n        \"text-align\": \"start|end|left|right|center|justify|match-parent\",\n        \"text-align-last\": \"auto|start|end|left|right|center|justify\",\n        \"text-anchor\": \"start|middle|end\",\n        \"text-combine-upright\": \"none|all|[digits <integer>?]\",\n        \"text-decoration\": \"<'text-decoration-line'>||<'text-decoration-style'>||<'text-decoration-color'>||<'text-decoration-thickness'>\",\n        \"text-decoration-color\": \"<color>\",\n        \"text-decoration-line\": \"none|[underline||overline||line-through||blink]|spelling-error|grammar-error\",\n        \"text-decoration-skip\": \"none|[objects||[spaces|[leading-spaces||trailing-spaces]]||edges||box-decoration]\",\n        \"text-decoration-skip-ink\": \"auto|all|none\",\n        \"text-decoration-style\": \"solid|double|dotted|dashed|wavy\",\n        \"text-decoration-thickness\": \"auto|from-font|<length>|<percentage>\",\n        \"text-emphasis\": \"<'text-emphasis-style'>||<'text-emphasis-color'>\",\n        \"text-emphasis-color\": \"<color>\",\n        \"text-emphasis-position\": \"auto|[over|under]&&[right|left]?\",\n        \"text-emphasis-style\": \"none|[[filled|open]||[dot|circle|double-circle|triangle|sesame]]|<string>\",\n        \"text-indent\": \"<length-percentage>&&hanging?&&each-line?\",\n        \"text-justify\": \"auto|inter-character|inter-word|none\",\n        \"text-orientation\": \"mixed|upright|sideways\",\n        \"text-overflow\": \"[clip|ellipsis|<string>]{1,2}\",\n        \"text-rendering\": \"auto|optimizeSpeed|optimizeLegibility|geometricPrecision\",\n        \"text-shadow\": \"none|<shadow-t>#\",\n        \"text-size-adjust\": \"none|auto|<percentage>\",\n        \"text-spacing-trim\": \"space-all|normal|space-first|trim-start|trim-both|trim-all|auto\",\n        \"text-transform\": \"none|capitalize|uppercase|lowercase|full-width|full-size-kana\",\n        \"text-underline-offset\": \"auto|<length>|<percentage>\",\n        \"text-underline-position\": \"auto|from-font|[under||[left|right]]\",\n        \"text-wrap\": \"<'text-wrap-mode'>||<'text-wrap-style'>\",\n        \"text-wrap-mode\": \"auto|wrap|nowrap\",\n        \"text-wrap-style\": \"auto|balance|stable|pretty\",\n        \"timeline-scope\": \"none|<dashed-ident>#\",\n        \"top\": \"<length>|<percentage>|auto\",\n        \"touch-action\": \"auto|none|[[pan-x|pan-left|pan-right]||[pan-y|pan-up|pan-down]||pinch-zoom]|manipulation\",\n        \"transform\": \"none|<transform-list>\",\n        \"transform-box\": \"content-box|border-box|fill-box|stroke-box|view-box\",\n        \"transform-origin\": \"[<length-percentage>|left|center|right|top|bottom]|[[<length-percentage>|left|center|right]&&[<length-percentage>|top|center|bottom]] <length>?\",\n        \"transform-style\": \"flat|preserve-3d\",\n        \"transition\": \"<single-transition>#\",\n        \"transition-behavior\": \"<transition-behavior-value>#\",\n        \"transition-delay\": \"<time>#\",\n        \"transition-duration\": \"<time>#\",\n        \"transition-property\": \"none|<single-transition-property>#\",\n        \"transition-timing-function\": \"<easing-function>#\",\n        \"translate\": \"none|<length-percentage> [<length-percentage> <length>?]?\",\n        \"unicode-bidi\": \"normal|embed|isolate|bidi-override|isolate-override|plaintext|-moz-isolate|-moz-isolate-override|-moz-plaintext|-webkit-isolate|-webkit-isolate-override|-webkit-plaintext\",\n        \"user-select\": \"auto|text|none|contain|all\",\n        \"vector-effect\": \"none|non-scaling-stroke|non-scaling-size|non-rotation|fixed-position\",\n        \"vertical-align\": \"baseline|sub|super|text-top|text-bottom|middle|top|bottom|<percentage>|<length>\",\n        \"view-timeline\": \"[<'view-timeline-name'> <'view-timeline-axis'>?]#\",\n        \"view-timeline-axis\": \"[block|inline|x|y]#\",\n        \"view-timeline-inset\": \"[[auto|<length-percentage>]{1,2}]#\",\n        \"view-timeline-name\": \"none|<dashed-ident>#\",\n        \"view-transition-name\": \"none|<custom-ident>\",\n        \"visibility\": \"visible|hidden|collapse\",\n        \"white-space\": \"normal|pre|nowrap|pre-wrap|pre-line|break-spaces|[<'white-space-collapse'>||<'text-wrap'>||<'white-space-trim'>]\",\n        \"white-space-collapse\": \"collapse|discard|preserve|preserve-breaks|preserve-spaces|break-spaces\",\n        \"widows\": \"<integer>\",\n        \"width\": \"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>\",\n        \"will-change\": \"auto|<animateable-feature>#\",\n        \"word-break\": \"normal|break-all|keep-all|break-word|auto-phrase\",\n        \"word-spacing\": \"normal|<length>\",\n        \"word-wrap\": \"normal|break-word\",\n        \"writing-mode\": \"horizontal-tb|vertical-rl|vertical-lr|sideways-rl|sideways-lr|<svg-writing-mode>\",\n        \"x\": \"<length>|<percentage>\",\n        \"y\": \"<length>|<percentage>\",\n        \"z-index\": \"auto|<integer>\",\n        \"zoom\": \"normal|reset|<number>|<percentage>\",\n        \"-moz-background-clip\": \"padding|border\",\n        \"-moz-border-radius-bottomleft\": \"<'border-bottom-left-radius'>\",\n        \"-moz-border-radius-bottomright\": \"<'border-bottom-right-radius'>\",\n        \"-moz-border-radius-topleft\": \"<'border-top-left-radius'>\",\n        \"-moz-border-radius-topright\": \"<'border-bottom-right-radius'>\",\n        \"-moz-control-character-visibility\": \"visible|hidden\",\n        \"-moz-osx-font-smoothing\": \"auto|grayscale\",\n        \"-moz-user-select\": \"none|text|all|-moz-none\",\n        \"-ms-flex-align\": \"start|end|center|baseline|stretch\",\n        \"-ms-flex-item-align\": \"auto|start|end|center|baseline|stretch\",\n        \"-ms-flex-line-pack\": \"start|end|center|justify|distribute|stretch\",\n        \"-ms-flex-negative\": \"<'flex-shrink'>\",\n        \"-ms-flex-pack\": \"start|end|center|justify|distribute\",\n        \"-ms-flex-order\": \"<integer>\",\n        \"-ms-flex-positive\": \"<'flex-grow'>\",\n        \"-ms-flex-preferred-size\": \"<'flex-basis'>\",\n        \"-ms-interpolation-mode\": \"nearest-neighbor|bicubic\",\n        \"-ms-grid-column-align\": \"start|end|center|stretch\",\n        \"-ms-grid-row-align\": \"start|end|center|stretch\",\n        \"-ms-hyphenate-limit-last\": \"none|always|column|page|spread\",\n        \"-webkit-background-clip\": \"[<box>|border|padding|content|text]#\",\n        \"-webkit-column-break-after\": \"always|auto|avoid\",\n        \"-webkit-column-break-before\": \"always|auto|avoid\",\n        \"-webkit-column-break-inside\": \"always|auto|avoid\",\n        \"-webkit-font-smoothing\": \"auto|none|antialiased|subpixel-antialiased\",\n        \"-webkit-mask-box-image\": \"[<url>|<gradient>|none] [<length-percentage>{4} <-webkit-mask-box-repeat>{2}]?\",\n        \"-webkit-print-color-adjust\": \"economy|exact\",\n        \"-webkit-text-security\": \"none|circle|disc|square\",\n        \"-webkit-user-drag\": \"none|element|auto\",\n        \"-webkit-user-select\": \"auto|none|text|all\",\n        \"alignment-baseline\": \"auto|baseline|before-edge|text-before-edge|middle|central|after-edge|text-after-edge|ideographic|alphabetic|hanging|mathematical\",\n        \"baseline-shift\": \"baseline|sub|super|<svg-length>\",\n        \"behavior\": \"<url>+\",\n        \"cue\": \"<'cue-before'> <'cue-after'>?\",\n        \"cue-after\": \"<url> <decibel>?|none\",\n        \"cue-before\": \"<url> <decibel>?|none\",\n        \"glyph-orientation-horizontal\": \"<angle>\",\n        \"glyph-orientation-vertical\": \"<angle>\",\n        \"kerning\": \"auto|<svg-length>\",\n        \"pause\": \"<'pause-before'> <'pause-after'>?\",\n        \"pause-after\": \"<time>|none|x-weak|weak|medium|strong|x-strong\",\n        \"pause-before\": \"<time>|none|x-weak|weak|medium|strong|x-strong\",\n        \"rest\": \"<'rest-before'> <'rest-after'>?\",\n        \"rest-after\": \"<time>|none|x-weak|weak|medium|strong|x-strong\",\n        \"rest-before\": \"<time>|none|x-weak|weak|medium|strong|x-strong\",\n        \"src\": \"[<url> [format( <string># )]?|local( <family-name> )]#\",\n        \"speak\": \"auto|never|always\",\n        \"speak-as\": \"normal|spell-out||digits||[literal-punctuation|no-punctuation]\",\n        \"unicode-range\": \"<urange>#\",\n        \"voice-balance\": \"<number>|left|center|right|leftwards|rightwards\",\n        \"voice-duration\": \"auto|<time>\",\n        \"voice-family\": \"[[<family-name>|<generic-voice>] ,]* [<family-name>|<generic-voice>]|preserve\",\n        \"voice-pitch\": \"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]\",\n        \"voice-range\": \"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]\",\n        \"voice-rate\": \"[normal|x-slow|slow|medium|fast|x-fast]||<percentage>\",\n        \"voice-stress\": \"normal|strong|moderate|none|reduced\",\n        \"voice-volume\": \"silent|[[x-soft|soft|medium|loud|x-loud]||<decibel>]\",\n        \"white-space-trim\": \"none|discard-before||discard-after||discard-inner\"\n    },\n    \"atrules\": {\n        \"charset\": {\n            \"prelude\": \"<string>\",\n            \"descriptors\": null\n        },\n        \"counter-style\": {\n            \"prelude\": \"<counter-style-name>\",\n            \"descriptors\": {\n                \"additive-symbols\": \"[<integer>&&<symbol>]#\",\n                \"fallback\": \"<counter-style-name>\",\n                \"negative\": \"<symbol> <symbol>?\",\n                \"pad\": \"<integer>&&<symbol>\",\n                \"prefix\": \"<symbol>\",\n                \"range\": \"[[<integer>|infinite]{2}]#|auto\",\n                \"speak-as\": \"auto|bullets|numbers|words|spell-out|<counter-style-name>\",\n                \"suffix\": \"<symbol>\",\n                \"symbols\": \"<symbol>+\",\n                \"system\": \"cyclic|numeric|alphabetic|symbolic|additive|[fixed <integer>?]|[extends <counter-style-name>]\"\n            }\n        },\n        \"document\": {\n            \"prelude\": \"[<url>|url-prefix( <string> )|domain( <string> )|media-document( <string> )|regexp( <string> )]#\",\n            \"descriptors\": null\n        },\n        \"font-palette-values\": {\n            \"prelude\": \"<dashed-ident>\",\n            \"descriptors\": {\n                \"base-palette\": \"light|dark|<integer [0,∞]>\",\n                \"font-family\": \"<family-name>#\",\n                \"override-colors\": \"[<integer [0,∞]> <absolute-color-base>]#\"\n            }\n        },\n        \"font-face\": {\n            \"prelude\": null,\n            \"descriptors\": {\n                \"ascent-override\": \"normal|<percentage>\",\n                \"descent-override\": \"normal|<percentage>\",\n                \"font-display\": \"[auto|block|swap|fallback|optional]\",\n                \"font-family\": \"<family-name>\",\n                \"font-feature-settings\": \"normal|<feature-tag-value>#\",\n                \"font-variation-settings\": \"normal|[<string> <number>]#\",\n                \"font-stretch\": \"<font-stretch-absolute>{1,2}\",\n                \"font-style\": \"normal|italic|oblique <angle>{0,2}\",\n                \"font-weight\": \"<font-weight-absolute>{1,2}\",\n                \"line-gap-override\": \"normal|<percentage>\",\n                \"size-adjust\": \"<percentage>\",\n                \"src\": \"[<url> [format( <string># )]?|local( <family-name> )]#\",\n                \"unicode-range\": \"<urange>#\"\n            }\n        },\n        \"font-feature-values\": {\n            \"prelude\": \"<family-name>#\",\n            \"descriptors\": null\n        },\n        \"import\": {\n            \"prelude\": \"[<string>|<url>] [layer|layer( <layer-name> )]? [supports( [<supports-condition>|<declaration>] )]? <media-query-list>?\",\n            \"descriptors\": null\n        },\n        \"keyframes\": {\n            \"prelude\": \"<keyframes-name>\",\n            \"descriptors\": null\n        },\n        \"layer\": {\n            \"prelude\": \"[<layer-name>#|<layer-name>?]\",\n            \"descriptors\": null\n        },\n        \"media\": {\n            \"prelude\": \"<media-query-list>\",\n            \"descriptors\": null\n        },\n        \"namespace\": {\n            \"prelude\": \"<namespace-prefix>? [<string>|<url>]\",\n            \"descriptors\": null\n        },\n        \"page\": {\n            \"prelude\": \"<page-selector-list>\",\n            \"descriptors\": {\n                \"bleed\": \"auto|<length>\",\n                \"marks\": \"none|[crop||cross]\",\n                \"page-orientation\": \"upright|rotate-left|rotate-right\",\n                \"size\": \"<length>{1,2}|auto|[<page-size>||[portrait|landscape]]\"\n            }\n        },\n        \"position-try\": {\n            \"prelude\": \"<dashed-ident>\",\n            \"descriptors\": {\n                \"top\": \"<'top'>\",\n                \"left\": \"<'left'>\",\n                \"bottom\": \"<'bottom'>\",\n                \"right\": \"<'right'>\",\n                \"inset-block-start\": \"<'inset-block-start'>\",\n                \"inset-block-end\": \"<'inset-block-end'>\",\n                \"inset-inline-start\": \"<'inset-inline-start'>\",\n                \"inset-inline-end\": \"<'inset-inline-end'>\",\n                \"inset-block\": \"<'inset-block'>\",\n                \"inset-inline\": \"<'inset-inline'>\",\n                \"inset\": \"<'inset'>\",\n                \"margin-top\": \"<'margin-top'>\",\n                \"margin-left\": \"<'margin-left'>\",\n                \"margin-bottom\": \"<'margin-bottom'>\",\n                \"margin-right\": \"<'margin-right'>\",\n                \"margin-block-start\": \"<'margin-block-start'>\",\n                \"margin-block-end\": \"<'margin-block-end'>\",\n                \"margin-inline-start\": \"<'margin-inline-start'>\",\n                \"margin-inline-end\": \"<'margin-inline-end'>\",\n                \"margin\": \"<'margin'>\",\n                \"margin-block\": \"<'margin-block'>\",\n                \"margin-inline\": \"<'margin-inline'>\",\n                \"width\": \"<'width'>\",\n                \"height\": \"<'height'>\",\n                \"min-width\": \"<'min-width'>\",\n                \"min-height\": \"<'min-height'>\",\n                \"max-width\": \"<'max-width'>\",\n                \"max-height\": \"<'max-height'>\",\n                \"block-size\": \"<'block-size'>\",\n                \"inline-size\": \"<'inline-size'>\",\n                \"min-block-size\": \"<'min-block-size'>\",\n                \"min-inline-size\": \"<'min-inline-size'>\",\n                \"max-block-size\": \"<'max-block-size'>\",\n                \"max-inline-size\": \"<'max-inline-size'>\",\n                \"align-self\": \"<'align-self'>|anchor-center\",\n                \"justify-self\": \"<'justify-self'>|anchor-center\"\n            }\n        },\n        \"property\": {\n            \"prelude\": \"<custom-property-name>\",\n            \"descriptors\": {\n                \"syntax\": \"<string>\",\n                \"inherits\": \"true|false\",\n                \"initial-value\": \"<declaration-value>?\"\n            }\n        },\n        \"scope\": {\n            \"prelude\": \"[( <scope-start> )]? [to ( <scope-end> )]?\",\n            \"descriptors\": null\n        },\n        \"starting-style\": {\n            \"prelude\": null,\n            \"descriptors\": null\n        },\n        \"supports\": {\n            \"prelude\": \"<supports-condition>\",\n            \"descriptors\": null\n        },\n        \"container\": {\n            \"prelude\": \"[<container-name>]? <container-condition>\",\n            \"descriptors\": null\n        },\n        \"nest\": {\n            \"prelude\": \"<complex-selector-list>\",\n            \"descriptors\": null\n        }\n    }\n};","import {\n    isDigit,\n    WhiteSpace,\n    Comment,\n    Ident,\n    Number,\n    Dimension\n} from '../../tokenizer/index.js';\n\nconst PLUSSIGN = 0x002B;    // U+002B PLUS SIGN (+)\nconst HYPHENMINUS = 0x002D; // U+002D HYPHEN-MINUS (-)\nconst N = 0x006E;           // U+006E LATIN SMALL LETTER N (n)\nconst DISALLOW_SIGN = true;\nconst ALLOW_SIGN = false;\n\nfunction checkInteger(offset, disallowSign) {\n    let pos = this.tokenStart + offset;\n    const code = this.charCodeAt(pos);\n\n    if (code === PLUSSIGN || code === HYPHENMINUS) {\n        if (disallowSign) {\n            this.error('Number sign is not allowed');\n        }\n        pos++;\n    }\n\n    for (; pos < this.tokenEnd; pos++) {\n        if (!isDigit(this.charCodeAt(pos))) {\n            this.error('Integer is expected', pos);\n        }\n    }\n}\n\nfunction checkTokenIsInteger(disallowSign) {\n    return checkInteger.call(this, 0, disallowSign);\n}\n\nfunction expectCharCode(offset, code) {\n    if (!this.cmpChar(this.tokenStart + offset, code)) {\n        let msg = '';\n\n        switch (code) {\n            case N:\n                msg = 'N is expected';\n                break;\n            case HYPHENMINUS:\n                msg = 'HyphenMinus is expected';\n                break;\n        }\n\n        this.error(msg, this.tokenStart + offset);\n    }\n}\n\n// ... <signed-integer>\n// ... ['+' | '-'] <signless-integer>\nfunction consumeB() {\n    let offset = 0;\n    let sign = 0;\n    let type = this.tokenType;\n\n    while (type === WhiteSpace || type === Comment) {\n        type = this.lookupType(++offset);\n    }\n\n    if (type !== Number) {\n        if (this.isDelim(PLUSSIGN, offset) ||\n            this.isDelim(HYPHENMINUS, offset)) {\n            sign = this.isDelim(PLUSSIGN, offset) ? PLUSSIGN : HYPHENMINUS;\n\n            do {\n                type = this.lookupType(++offset);\n            } while (type === WhiteSpace || type === Comment);\n\n            if (type !== Number) {\n                this.skip(offset);\n                checkTokenIsInteger.call(this, DISALLOW_SIGN);\n            }\n        } else {\n            return null;\n        }\n    }\n\n    if (offset > 0) {\n        this.skip(offset);\n    }\n\n    if (sign === 0) {\n        type = this.charCodeAt(this.tokenStart);\n        if (type !== PLUSSIGN && type !== HYPHENMINUS) {\n            this.error('Number sign is expected');\n        }\n    }\n\n    checkTokenIsInteger.call(this, sign !== 0);\n    return sign === HYPHENMINUS ? '-' + this.consume(Number) : this.consume(Number);\n}\n\n// An+B microsyntax https://www.w3.org/TR/css-syntax-3/#anb\nexport const name = 'AnPlusB';\nexport const structure = {\n    a: [String, null],\n    b: [String, null]\n};\n\nexport function parse() {\n    /* eslint-disable brace-style*/\n    const start = this.tokenStart;\n    let a = null;\n    let b = null;\n\n    // <integer>\n    if (this.tokenType === Number) {\n        checkTokenIsInteger.call(this, ALLOW_SIGN);\n        b = this.consume(Number);\n    }\n\n    // -n\n    // -n <signed-integer>\n    // -n ['+' | '-'] <signless-integer>\n    // -n- <signless-integer>\n    // <dashndashdigit-ident>\n    else if (this.tokenType === Ident && this.cmpChar(this.tokenStart, HYPHENMINUS)) {\n        a = '-1';\n\n        expectCharCode.call(this, 1, N);\n\n        switch (this.tokenEnd - this.tokenStart) {\n            // -n\n            // -n <signed-integer>\n            // -n ['+' | '-'] <signless-integer>\n            case 2:\n                this.next();\n                b = consumeB.call(this);\n                break;\n\n            // -n- <signless-integer>\n            case 3:\n                expectCharCode.call(this, 2, HYPHENMINUS);\n\n                this.next();\n                this.skipSC();\n\n                checkTokenIsInteger.call(this, DISALLOW_SIGN);\n\n                b = '-' + this.consume(Number);\n                break;\n\n            // <dashndashdigit-ident>\n            default:\n                expectCharCode.call(this, 2, HYPHENMINUS);\n                checkInteger.call(this, 3, DISALLOW_SIGN);\n                this.next();\n\n                b = this.substrToCursor(start + 2);\n        }\n    }\n\n    // '+'? n\n    // '+'? n <signed-integer>\n    // '+'? n ['+' | '-'] <signless-integer>\n    // '+'? n- <signless-integer>\n    // '+'? <ndashdigit-ident>\n    else if (this.tokenType === Ident || (this.isDelim(PLUSSIGN) && this.lookupType(1) === Ident)) {\n        let sign = 0;\n        a = '1';\n\n        // just ignore a plus\n        if (this.isDelim(PLUSSIGN)) {\n            sign = 1;\n            this.next();\n        }\n\n        expectCharCode.call(this, 0, N);\n\n        switch (this.tokenEnd - this.tokenStart) {\n            // '+'? n\n            // '+'? n <signed-integer>\n            // '+'? n ['+' | '-'] <signless-integer>\n            case 1:\n                this.next();\n                b = consumeB.call(this);\n                break;\n\n            // '+'? n- <signless-integer>\n            case 2:\n                expectCharCode.call(this, 1, HYPHENMINUS);\n\n                this.next();\n                this.skipSC();\n\n                checkTokenIsInteger.call(this, DISALLOW_SIGN);\n\n                b = '-' + this.consume(Number);\n                break;\n\n            // '+'? <ndashdigit-ident>\n            default:\n                expectCharCode.call(this, 1, HYPHENMINUS);\n                checkInteger.call(this, 2, DISALLOW_SIGN);\n                this.next();\n\n                b = this.substrToCursor(start + sign + 1);\n        }\n    }\n\n    // <ndashdigit-dimension>\n    // <ndash-dimension> <signless-integer>\n    // <n-dimension>\n    // <n-dimension> <signed-integer>\n    // <n-dimension> ['+' | '-'] <signless-integer>\n    else if (this.tokenType === Dimension) {\n        const code = this.charCodeAt(this.tokenStart);\n        const sign = code === PLUSSIGN || code === HYPHENMINUS;\n        let i = this.tokenStart + sign;\n\n        for (; i < this.tokenEnd; i++) {\n            if (!isDigit(this.charCodeAt(i))) {\n                break;\n            }\n        }\n\n        if (i === this.tokenStart + sign) {\n            this.error('Integer is expected', this.tokenStart + sign);\n        }\n\n        expectCharCode.call(this, i - this.tokenStart, N);\n        a = this.substring(start, i);\n\n        // <n-dimension>\n        // <n-dimension> <signed-integer>\n        // <n-dimension> ['+' | '-'] <signless-integer>\n        if (i + 1 === this.tokenEnd) {\n            this.next();\n            b = consumeB.call(this);\n        } else {\n            expectCharCode.call(this, i - this.tokenStart + 1, HYPHENMINUS);\n\n            // <ndash-dimension> <signless-integer>\n            if (i + 2 === this.tokenEnd) {\n                this.next();\n                this.skipSC();\n                checkTokenIsInteger.call(this, DISALLOW_SIGN);\n                b = '-' + this.consume(Number);\n            }\n            // <ndashdigit-dimension>\n            else {\n                checkInteger.call(this, i - this.tokenStart + 2, DISALLOW_SIGN);\n                this.next();\n                b = this.substrToCursor(i + 1);\n            }\n        }\n    } else {\n        this.error();\n    }\n\n    if (a !== null && a.charCodeAt(0) === PLUSSIGN) {\n        a = a.substr(1);\n    }\n\n    if (b !== null && b.charCodeAt(0) === PLUSSIGN) {\n        b = b.substr(1);\n    }\n\n    return {\n        type: 'AnPlusB',\n        loc: this.getLocation(start, this.tokenStart),\n        a,\n        b\n    };\n}\n\nexport function generate(node) {\n    if (node.a) {\n        const a =\n            node.a === '+1' && 'n' ||\n            node.a ===  '1' && 'n' ||\n            node.a === '-1' && '-n' ||\n            node.a + 'n';\n\n        if (node.b) {\n            const b = node.b[0] === '-' || node.b[0] === '+'\n                ? node.b\n                : '+' + node.b;\n            this.tokenize(a + b);\n        } else {\n            this.tokenize(a);\n        }\n    } else {\n        this.tokenize(node.b);\n    }\n}\n","import {\n    AtKeyword,\n    Semicolon,\n    LeftCurlyBracket,\n    RightCurlyBracket\n} from '../../tokenizer/index.js';\n\nfunction consumeRaw() {\n    return this.Raw(this.consumeUntilLeftCurlyBracketOrSemicolon, true);\n}\n\nfunction isDeclarationBlockAtrule() {\n    for (let offset = 1, type; type = this.lookupType(offset); offset++) {\n        if (type === RightCurlyBracket) {\n            return true;\n        }\n\n        if (type === LeftCurlyBracket ||\n            type === AtKeyword) {\n            return false;\n        }\n    }\n\n    return false;\n}\n\n\nexport const name = 'Atrule';\nexport const walkContext = 'atrule';\nexport const structure = {\n    name: String,\n    prelude: ['AtrulePrelude', 'Raw', null],\n    block: ['Block', null]\n};\n\nexport function parse(isDeclaration = false) {\n    const start = this.tokenStart;\n    let name;\n    let nameLowerCase;\n    let prelude = null;\n    let block = null;\n\n    this.eat(AtKeyword);\n\n    name = this.substrToCursor(start + 1);\n    nameLowerCase = name.toLowerCase();\n    this.skipSC();\n\n    // parse prelude\n    if (this.eof === false &&\n        this.tokenType !== LeftCurlyBracket &&\n        this.tokenType !== Semicolon) {\n        if (this.parseAtrulePrelude) {\n            prelude = this.parseWithFallback(this.AtrulePrelude.bind(this, name, isDeclaration), consumeRaw);\n        } else {\n            prelude = consumeRaw.call(this, this.tokenIndex);\n        }\n\n        this.skipSC();\n    }\n\n    switch (this.tokenType) {\n        case Semicolon:\n            this.next();\n            break;\n\n        case LeftCurlyBracket:\n            if (hasOwnProperty.call(this.atrule, nameLowerCase) &&\n                typeof this.atrule[nameLowerCase].block === 'function') {\n                block = this.atrule[nameLowerCase].block.call(this, isDeclaration);\n            } else {\n                // TODO: should consume block content as Raw?\n                block = this.Block(isDeclarationBlockAtrule.call(this));\n            }\n\n            break;\n    }\n\n    return {\n        type: 'Atrule',\n        loc: this.getLocation(start, this.tokenStart),\n        name,\n        prelude,\n        block\n    };\n}\n\nexport function generate(node) {\n    this.token(AtKeyword, '@' + node.name);\n\n    if (node.prelude !== null) {\n        this.node(node.prelude);\n    }\n\n    if (node.block) {\n        this.node(node.block);\n    } else {\n        this.token(Semicolon, ';');\n    }\n}\n","import {\n    Semicolon,\n    LeftCurlyBracket\n} from '../../tokenizer/index.js';\n\nexport const name = 'AtrulePrelude';\nexport const walkContext = 'atrulePrelude';\nexport const structure = {\n    children: [[]]\n};\n\nexport function parse(name) {\n    let children = null;\n\n    if (name !== null) {\n        name = name.toLowerCase();\n    }\n\n    this.skipSC();\n\n    if (hasOwnProperty.call(this.atrule, name) &&\n        typeof this.atrule[name].prelude === 'function') {\n        // custom consumer\n        children = this.atrule[name].prelude.call(this);\n    } else {\n        // default consumer\n        children = this.readSequence(this.scope.AtrulePrelude);\n    }\n\n    this.skipSC();\n\n    if (this.eof !== true &&\n        this.tokenType !== LeftCurlyBracket &&\n        this.tokenType !== Semicolon) {\n        this.error('Semicolon or block is expected');\n    }\n\n    return {\n        type: 'AtrulePrelude',\n        loc: this.getLocationFromList(children),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.children(node);\n}\n","import {\n    Ident,\n    String as StringToken,\n    Delim,\n    LeftSquareBracket,\n    RightSquareBracket\n} from '../../tokenizer/index.js';\n\nconst DOLLARSIGN = 0x0024;       // U+0024 DOLLAR SIGN ($)\nconst ASTERISK = 0x002A;         // U+002A ASTERISK (*)\nconst EQUALSSIGN = 0x003D;       // U+003D EQUALS SIGN (=)\nconst CIRCUMFLEXACCENT = 0x005E; // U+005E (^)\nconst VERTICALLINE = 0x007C;     // U+007C VERTICAL LINE (|)\nconst TILDE = 0x007E;            // U+007E TILDE (~)\n\nfunction getAttributeName() {\n    if (this.eof) {\n        this.error('Unexpected end of input');\n    }\n\n    const start = this.tokenStart;\n    let expectIdent = false;\n\n    if (this.isDelim(ASTERISK)) {\n        expectIdent = true;\n        this.next();\n    } else if (!this.isDelim(VERTICALLINE)) {\n        this.eat(Ident);\n    }\n\n    if (this.isDelim(VERTICALLINE)) {\n        if (this.charCodeAt(this.tokenStart + 1) !== EQUALSSIGN) {\n            this.next();\n            this.eat(Ident);\n        } else if (expectIdent) {\n            this.error('Identifier is expected', this.tokenEnd);\n        }\n    } else if (expectIdent) {\n        this.error('Vertical line is expected');\n    }\n\n    return {\n        type: 'Identifier',\n        loc: this.getLocation(start, this.tokenStart),\n        name: this.substrToCursor(start)\n    };\n}\n\nfunction getOperator() {\n    const start = this.tokenStart;\n    const code = this.charCodeAt(start);\n\n    if (code !== EQUALSSIGN &&        // =\n        code !== TILDE &&             // ~=\n        code !== CIRCUMFLEXACCENT &&  // ^=\n        code !== DOLLARSIGN &&        // $=\n        code !== ASTERISK &&          // *=\n        code !== VERTICALLINE         // |=\n    ) {\n        this.error('Attribute selector (=, ~=, ^=, $=, *=, |=) is expected');\n    }\n\n    this.next();\n\n    if (code !== EQUALSSIGN) {\n        if (!this.isDelim(EQUALSSIGN)) {\n            this.error('Equal sign is expected');\n        }\n\n        this.next();\n    }\n\n    return this.substrToCursor(start);\n}\n\n// '[' <wq-name> ']'\n// '[' <wq-name> <attr-matcher> [ <string-token> | <ident-token> ] <attr-modifier>? ']'\nexport const name = 'AttributeSelector';\nexport const structure = {\n    name: 'Identifier',\n    matcher: [String, null],\n    value: ['String', 'Identifier', null],\n    flags: [String, null]\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n    let name;\n    let matcher = null;\n    let value = null;\n    let flags = null;\n\n    this.eat(LeftSquareBracket);\n    this.skipSC();\n\n    name = getAttributeName.call(this);\n    this.skipSC();\n\n    if (this.tokenType !== RightSquareBracket) {\n        // avoid case `[name i]`\n        if (this.tokenType !== Ident) {\n            matcher = getOperator.call(this);\n\n            this.skipSC();\n\n            value = this.tokenType === StringToken\n                ? this.String()\n                : this.Identifier();\n\n            this.skipSC();\n        }\n\n        // attribute flags\n        if (this.tokenType === Ident) {\n            flags = this.consume(Ident);\n\n            this.skipSC();\n        }\n    }\n\n    this.eat(RightSquareBracket);\n\n    return {\n        type: 'AttributeSelector',\n        loc: this.getLocation(start, this.tokenStart),\n        name,\n        matcher,\n        value,\n        flags\n    };\n}\n\nexport function generate(node) {\n    this.token(Delim, '[');\n    this.node(node.name);\n\n    if (node.matcher !== null) {\n        this.tokenize(node.matcher);\n        this.node(node.value);\n    }\n\n    if (node.flags !== null) {\n        this.token(Ident, node.flags);\n    }\n\n    this.token(Delim, ']');\n}\n","import {\n    WhiteSpace,\n    Comment,\n    Semicolon,\n    AtKeyword,\n    LeftCurlyBracket,\n    RightCurlyBracket\n} from '../../tokenizer/index.js';\n\nconst AMPERSAND = 0x0026;       // U+0026 AMPERSAND (&)\n\nfunction consumeRaw() {\n    return this.Raw(null, true);\n}\nfunction consumeRule() {\n    return this.parseWithFallback(this.Rule, consumeRaw);\n}\nfunction consumeRawDeclaration() {\n    return this.Raw(this.consumeUntilSemicolonIncluded, true);\n}\nfunction consumeDeclaration() {\n    if (this.tokenType === Semicolon) {\n        return consumeRawDeclaration.call(this, this.tokenIndex);\n    }\n\n    const node = this.parseWithFallback(this.Declaration, consumeRawDeclaration);\n\n    if (this.tokenType === Semicolon) {\n        this.next();\n    }\n\n    return node;\n}\n\nexport const name = 'Block';\nexport const walkContext = 'block';\nexport const structure = {\n    children: [[\n        'Atrule',\n        'Rule',\n        'Declaration'\n    ]]\n};\n\nexport function parse(isStyleBlock) {\n    const consumer = isStyleBlock ? consumeDeclaration : consumeRule;\n    const start = this.tokenStart;\n    let children = this.createList();\n\n    this.eat(LeftCurlyBracket);\n\n    scan:\n    while (!this.eof) {\n        switch (this.tokenType) {\n            case RightCurlyBracket:\n                break scan;\n\n            case WhiteSpace:\n            case Comment:\n                this.next();\n                break;\n\n            case AtKeyword:\n                children.push(this.parseWithFallback(this.Atrule.bind(this, isStyleBlock), consumeRaw));\n                break;\n\n            default:\n                if (isStyleBlock && this.isDelim(AMPERSAND))  {\n                    children.push(consumeRule.call(this));\n                } else {\n                    children.push(consumer.call(this));\n                }\n        }\n    }\n\n    if (!this.eof) {\n        this.eat(RightCurlyBracket);\n    }\n\n    return {\n        type: 'Block',\n        loc: this.getLocation(start, this.tokenStart),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.token(LeftCurlyBracket, '{');\n    this.children(node, prev => {\n        if (prev.type === 'Declaration') {\n            this.token(Semicolon, ';');\n        }\n    });\n    this.token(RightCurlyBracket, '}');\n}\n","import {\n    Delim,\n    LeftSquareBracket,\n    RightSquareBracket\n} from '../../tokenizer/index.js';\n\nexport const name = 'Brackets';\nexport const structure = {\n    children: [[]]\n};\n\nexport function parse(readSequence, recognizer) {\n    const start = this.tokenStart;\n    let children = null;\n\n    this.eat(LeftSquareBracket);\n\n    children = readSequence.call(this, recognizer);\n\n    if (!this.eof) {\n        this.eat(RightSquareBracket);\n    }\n\n    return {\n        type: 'Brackets',\n        loc: this.getLocation(start, this.tokenStart),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.token(Delim, '[');\n    this.children(node);\n    this.token(Delim, ']');\n}\n","import { CDC } from '../../tokenizer/index.js';\n\nexport const name = 'CDC';\nexport const structure = [];\n\nexport function parse() {\n    const start = this.tokenStart;\n\n    this.eat(CDC); // -->\n\n    return {\n        type: 'CDC',\n        loc: this.getLocation(start, this.tokenStart)\n    };\n}\n\nexport function generate() {\n    this.token(CDC, '-->');\n}\n","import { CDO } from '../../tokenizer/index.js';\n\nexport const name = 'CDO';\nexport const structure = [];\n\nexport function parse() {\n    const start = this.tokenStart;\n\n    this.eat(CDO); // <!--\n\n    return {\n        type: 'CDO',\n        loc: this.getLocation(start, this.tokenStart)\n    };\n}\n\nexport function generate() {\n    this.token(CDO, '<!--');\n}\n","import { Delim, Ident } from '../../tokenizer/index.js';\n\nconst FULLSTOP = 0x002E; // U+002E FULL STOP (.)\n\n// '.' ident\nexport const name = 'ClassSelector';\nexport const structure = {\n    name: String\n};\n\nexport function parse() {\n    this.eatDelim(FULLSTOP);\n\n    return {\n        type: 'ClassSelector',\n        loc: this.getLocation(this.tokenStart - 1, this.tokenEnd),\n        name: this.consume(Ident)\n    };\n}\n\nexport function generate(node) {\n    this.token(Delim, '.');\n    this.token(Ident, node.name);\n}\n","import { WhiteSpace, Delim } from '../../tokenizer/index.js';\n\nconst PLUSSIGN = 0x002B;        // U+002B PLUS SIGN (+)\nconst SOLIDUS = 0x002F;         // U+002F SOLIDUS (/)\nconst GREATERTHANSIGN = 0x003E; // U+003E GREATER-THAN SIGN (>)\nconst TILDE = 0x007E;           // U+007E TILDE (~)\n\nexport const name = 'Combinator';\nexport const structure = {\n    name: String\n};\n\n// + | > | ~ | /deep/\nexport function parse() {\n    const start = this.tokenStart;\n    let name;\n\n    switch (this.tokenType) {\n        case WhiteSpace:\n            name = ' ';\n            break;\n\n        case Delim:\n            switch (this.charCodeAt(this.tokenStart)) {\n                case GREATERTHANSIGN:\n                case PLUSSIGN:\n                case TILDE:\n                    this.next();\n                    break;\n\n                case SOLIDUS:\n                    this.next();\n                    this.eatIdent('deep');\n                    this.eatDelim(SOLIDUS);\n                    break;\n\n                default:\n                    this.error('Combinator is expected');\n            }\n\n            name = this.substrToCursor(start);\n            break;\n    }\n\n    return {\n        type: 'Combinator',\n        loc: this.getLocation(start, this.tokenStart),\n        name\n    };\n}\n\nexport function generate(node) {\n    this.tokenize(node.name);\n}\n","import { Comment } from '../../tokenizer/index.js';\n\nconst ASTERISK = 0x002A;        // U+002A ASTERISK (*)\nconst SOLIDUS = 0x002F;         // U+002F SOLIDUS (/)\n\n\nexport const name = 'Comment';\nexport const structure = {\n    value: String\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n    let end = this.tokenEnd;\n\n    this.eat(Comment);\n\n    if ((end - start + 2) >= 2 &&\n        this.charCodeAt(end - 2) === ASTERISK &&\n        this.charCodeAt(end - 1) === SOLIDUS) {\n        end -= 2;\n    }\n\n    return {\n        type: 'Comment',\n        loc: this.getLocation(start, this.tokenStart),\n        value: this.substring(start + 2, end)\n    };\n}\n\nexport function generate(node) {\n    this.token(Comment, '/*' + node.value + '*/');\n}\n","import {\n    WhiteSpace,\n    Comment,\n    Ident,\n    LeftParenthesis,\n    RightParenthesis,\n    Function as FunctionToken,\n    Colon,\n    EOF\n} from '../../tokenizer/index.js';\n\nconst likelyFeatureToken = new Set([Colon, RightParenthesis, EOF]);\n\nexport const name = 'Condition';\nexport const structure = {\n    kind: String,\n    children: [[\n        'Identifier',\n        'Feature',\n        'FeatureFunction',\n        'FeatureRange',\n        'SupportsDeclaration'\n    ]]\n};\n\nfunction featureOrRange(kind) {\n    if (this.lookupTypeNonSC(1) === Ident &&\n        likelyFeatureToken.has(this.lookupTypeNonSC(2))) {\n        return this.Feature(kind);\n    }\n\n    return this.FeatureRange(kind);\n}\n\nconst parentheses = {\n    media: featureOrRange,\n    container: featureOrRange,\n    supports() {\n        return this.SupportsDeclaration();\n    }\n};\n\nexport function parse(kind = 'media') {\n    const children = this.createList();\n\n    scan: while (!this.eof) {\n        switch (this.tokenType) {\n            case Comment:\n            case WhiteSpace:\n                this.next();\n                continue;\n\n            case Ident:\n                children.push(this.Identifier());\n                break;\n\n            case LeftParenthesis: {\n                let term = this.parseWithFallback(\n                    () => parentheses[kind].call(this, kind),\n                    () => null\n                );\n\n                if (!term) {\n                    term = this.parseWithFallback(\n                        () => {\n                            this.eat(LeftParenthesis);\n                            const res = this.Condition(kind);\n                            this.eat(RightParenthesis);\n                            return res;\n                        },\n                        () => {\n                            return this.GeneralEnclosed(kind);\n                        }\n                    );\n                }\n\n                children.push(term);\n                break;\n            }\n\n            case FunctionToken: {\n                let term = this.parseWithFallback(\n                    () => this.FeatureFunction(kind),\n                    () => null\n                );\n\n                if (!term) {\n                    term = this.GeneralEnclosed(kind);\n                }\n\n                children.push(term);\n                break;\n            }\n\n            default:\n                break scan;\n        }\n    }\n\n    if (children.isEmpty) {\n        this.error('Condition is expected');\n    }\n\n    return {\n        type: 'Condition',\n        loc: this.getLocationFromList(children),\n        kind,\n        children\n    };\n}\n\nexport function generate(node) {\n    node.children.forEach(child => {\n        if (child.type === 'Condition') {\n            this.token(LeftParenthesis, '(');\n            this.node(child);\n            this.token(RightParenthesis, ')');\n        } else {\n            this.node(child);\n        }\n    });\n}\n\n","import { isCustomProperty } from '../../utils/names.js';\nimport {\n    Ident,\n    Hash,\n    Colon,\n    Semicolon,\n    Delim,\n    WhiteSpace\n} from '../../tokenizer/index.js';\n\nconst EXCLAMATIONMARK = 0x0021; // U+0021 EXCLAMATION MARK (!)\nconst NUMBERSIGN = 0x0023;      // U+0023 NUMBER SIGN (#)\nconst DOLLARSIGN = 0x0024;      // U+0024 DOLLAR SIGN ($)\nconst AMPERSAND = 0x0026;       // U+0026 AMPERSAND (&)\nconst ASTERISK = 0x002A;        // U+002A ASTERISK (*)\nconst PLUSSIGN = 0x002B;        // U+002B PLUS SIGN (+)\nconst SOLIDUS = 0x002F;         // U+002F SOLIDUS (/)\n\nfunction consumeValueRaw() {\n    return this.Raw(this.consumeUntilExclamationMarkOrSemicolon, true);\n}\n\nfunction consumeCustomPropertyRaw() {\n    return this.Raw(this.consumeUntilExclamationMarkOrSemicolon, false);\n}\n\nfunction consumeValue() {\n    const startValueToken = this.tokenIndex;\n    const value = this.Value();\n\n    if (value.type !== 'Raw' &&\n        this.eof === false &&\n        this.tokenType !== Semicolon &&\n        this.isDelim(EXCLAMATIONMARK) === false &&\n        this.isBalanceEdge(startValueToken) === false) {\n        this.error();\n    }\n\n    return value;\n}\n\nexport const name = 'Declaration';\nexport const walkContext = 'declaration';\nexport const structure = {\n    important: [Boolean, String],\n    property: String,\n    value: ['Value', 'Raw']\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n    const startToken = this.tokenIndex;\n    const property = readProperty.call(this);\n    const customProperty = isCustomProperty(property);\n    const parseValue = customProperty ? this.parseCustomProperty : this.parseValue;\n    const consumeRaw = customProperty ? consumeCustomPropertyRaw : consumeValueRaw;\n    let important = false;\n    let value;\n\n    this.skipSC();\n    this.eat(Colon);\n\n    const valueStart = this.tokenIndex;\n\n    if (!customProperty) {\n        this.skipSC();\n    }\n\n    if (parseValue) {\n        value = this.parseWithFallback(consumeValue, consumeRaw);\n    } else {\n        value = consumeRaw.call(this, this.tokenIndex);\n    }\n\n    if (customProperty && value.type === 'Value' && value.children.isEmpty) {\n        for (let offset = valueStart - this.tokenIndex; offset <= 0; offset++) {\n            if (this.lookupType(offset) === WhiteSpace) {\n                value.children.appendData({\n                    type: 'WhiteSpace',\n                    loc: null,\n                    value: ' '\n                });\n                break;\n            }\n        }\n    }\n\n    if (this.isDelim(EXCLAMATIONMARK)) {\n        important = getImportant.call(this);\n        this.skipSC();\n    }\n\n    // Do not include semicolon to range per spec\n    // https://drafts.csswg.org/css-syntax/#declaration-diagram\n\n    if (this.eof === false &&\n        this.tokenType !== Semicolon &&\n        this.isBalanceEdge(startToken) === false) {\n        this.error();\n    }\n\n    return {\n        type: 'Declaration',\n        loc: this.getLocation(start, this.tokenStart),\n        important,\n        property,\n        value\n    };\n}\n\nexport function generate(node) {\n    this.token(Ident, node.property);\n    this.token(Colon, ':');\n    this.node(node.value);\n\n    if (node.important) {\n        this.token(Delim, '!');\n        this.token(Ident, node.important === true ? 'important' : node.important);\n    }\n}\n\nfunction readProperty() {\n    const start = this.tokenStart;\n\n    // hacks\n    if (this.tokenType === Delim) {\n        switch (this.charCodeAt(this.tokenStart)) {\n            case ASTERISK:\n            case DOLLARSIGN:\n            case PLUSSIGN:\n            case NUMBERSIGN:\n            case AMPERSAND:\n                this.next();\n                break;\n\n            // TODO: not sure we should support this hack\n            case SOLIDUS:\n                this.next();\n                if (this.isDelim(SOLIDUS)) {\n                    this.next();\n                }\n                break;\n        }\n    }\n\n    if (this.tokenType === Hash) {\n        this.eat(Hash);\n    } else {\n        this.eat(Ident);\n    }\n\n    return this.substrToCursor(start);\n}\n\n// ! ws* important\nfunction getImportant() {\n    this.eat(Delim);\n    this.skipSC();\n\n    const important = this.consume(Ident);\n\n    // store original value in case it differ from `important`\n    // for better original source restoring and hacks like `!ie` support\n    return important === 'important' ? true : important;\n}\n","import {\n    WhiteSpace,\n    Comment,\n    Semicolon,\n    AtKeyword\n} from '../../tokenizer/index.js';\n\nconst AMPERSAND = 0x0026;       // U+0026 AMPERSAND (&)\n\nfunction consumeRaw() {\n    return this.Raw(this.consumeUntilSemicolonIncluded, true);\n}\n\nexport const name = 'DeclarationList';\nexport const structure = {\n    children: [[\n        'Declaration',\n        'Atrule',\n        'Rule'\n    ]]\n};\n\nexport function parse() {\n    const children = this.createList();\n\n    scan:\n    while (!this.eof) {\n        switch (this.tokenType) {\n            case WhiteSpace:\n            case Comment:\n            case Semicolon:\n                this.next();\n                break;\n\n            case AtKeyword:\n                children.push(this.parseWithFallback(this.Atrule.bind(this, true), consumeRaw));\n                break;\n\n            default:\n                if (this.isDelim(AMPERSAND))  {\n                    children.push(this.parseWithFallback(this.Rule, consumeRaw));\n                } else {\n                    children.push(this.parseWithFallback(this.Declaration, consumeRaw));\n                }\n        }\n    }\n\n    return {\n        type: 'DeclarationList',\n        loc: this.getLocationFromList(children),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.children(node, prev => {\n        if (prev.type === 'Declaration') {\n            this.token(Semicolon, ';');\n        }\n    });\n}\n\n","import { Dimension } from '../../tokenizer/index.js';\n\nexport const name = 'Dimension';\nexport const structure = {\n    value: String,\n    unit: String\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n    const value = this.consumeNumber(Dimension);\n\n    return {\n        type: 'Dimension',\n        loc: this.getLocation(start, this.tokenStart),\n        value,\n        unit: this.substring(start + value.length, this.tokenStart)\n    };\n}\n\nexport function generate(node) {\n    this.token(Dimension, node.value + node.unit);\n}\n","import {\n    Ident,\n    Number,\n    Dimension,\n    Function as FunctionToken,\n    LeftParenthesis,\n    RightParenthesis,\n    Colon,\n    Delim\n} from '../../tokenizer/index.js';\n\nconst SOLIDUS = 0x002F;  // U+002F SOLIDUS (/)\n\nexport const name = 'Feature';\nexport const structure = {\n    kind: String,\n    name: String,\n    value: ['Identifier', 'Number', 'Dimension', 'Ratio', 'Function', null]\n};\n\nexport function parse(kind) {\n    const start = this.tokenStart;\n    let name;\n    let value = null;\n\n    this.eat(LeftParenthesis);\n    this.skipSC();\n\n    name = this.consume(Ident);\n    this.skipSC();\n\n    if (this.tokenType !== RightParenthesis) {\n        this.eat(Colon);\n        this.skipSC();\n\n        switch (this.tokenType) {\n            case Number:\n                if (this.lookupNonWSType(1) === Delim) {\n                    value = this.Ratio();\n                } else {\n                    value = this.Number();\n                }\n\n                break;\n\n            case Dimension:\n                value = this.Dimension();\n                break;\n\n            case Ident:\n                value = this.Identifier();\n                break;\n\n            case FunctionToken:\n                value = this.parseWithFallback(\n                    () => {\n                        const res = this.Function(this.readSequence, this.scope.Value);\n\n                        this.skipSC();\n\n                        if (this.isDelim(SOLIDUS)) {\n                            this.error();\n                        }\n\n                        return res;\n                    },\n                    () => {\n                        return this.Ratio();\n                    }\n                );\n                break;\n\n            default:\n                this.error('Number, dimension, ratio or identifier is expected');\n        }\n\n        this.skipSC();\n    }\n\n    if (!this.eof) {\n        this.eat(RightParenthesis);\n    }\n\n    return {\n        type: 'Feature',\n        loc: this.getLocation(start, this.tokenStart),\n        kind,\n        name,\n        value\n    };\n}\n\nexport function generate(node) {\n    this.token(LeftParenthesis, '(');\n    this.token(Ident, node.name);\n\n    if (node.value !== null) {\n        this.token(Colon, ':');\n        this.node(node.value);\n    }\n\n    this.token(RightParenthesis, ')');\n}\n","import {\n    Function as FunctionToken,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\nexport const name = 'FeatureFunction';\nexport const structure = {\n    kind: String,\n    feature: String,\n    value: ['Declaration', 'Selector']\n};\n\nfunction getFeatureParser(kind, name) {\n    const featuresOfKind = this.features[kind] || {};\n    const parser = featuresOfKind[name];\n\n    if (typeof parser !== 'function') {\n        this.error(`Unknown feature ${name}()`);\n    }\n\n    return parser;\n}\n\nexport function parse(kind = 'unknown') {\n    const start = this.tokenStart;\n    const functionName = this.consumeFunctionName();\n    const valueParser = getFeatureParser.call(this, kind, functionName.toLowerCase());\n\n    this.skipSC();\n\n    const value = this.parseWithFallback(\n        () => {\n            const startValueToken = this.tokenIndex;\n            const value = valueParser.call(this);\n\n            if (this.eof === false &&\n                this.isBalanceEdge(startValueToken) === false) {\n                this.error();\n            }\n\n            return value;\n        },\n        () => this.Raw(null, false)\n    );\n\n    if (!this.eof) {\n        this.eat(RightParenthesis);\n    }\n\n    return {\n        type: 'FeatureFunction',\n        loc: this.getLocation(start, this.tokenStart),\n        kind,\n        feature: functionName,\n        value\n    };\n}\n\nexport function generate(node) {\n    this.token(FunctionToken, node.feature + '(');\n    this.node(node.value);\n    this.token(RightParenthesis, ')');\n}\n","import {\n    Ident,\n    Number,\n    Dimension,\n    Function as FunctionToken,\n    LeftParenthesis,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\nconst SOLIDUS = 0x002F;         // U+002F SOLIDUS (/)\nconst LESSTHANSIGN = 0x003C;    // U+003C LESS-THAN SIGN (<)\nconst EQUALSSIGN = 0x003D;      // U+003D EQUALS SIGN (=)\nconst GREATERTHANSIGN = 0x003E; // U+003E GREATER-THAN SIGN (>)\n\nexport const name = 'FeatureRange';\nexport const structure = {\n    kind: String,\n    left: ['Identifier', 'Number', 'Dimension', 'Ratio', 'Function'],\n    leftComparison: String,\n    middle: ['Identifier', 'Number', 'Dimension', 'Ratio', 'Function'],\n    rightComparison: [String, null],\n    right: ['Identifier', 'Number', 'Dimension', 'Ratio', 'Function', null]\n};\n\nfunction readTerm() {\n    this.skipSC();\n\n    switch (this.tokenType) {\n        case Number:\n            if (this.isDelim(SOLIDUS, this.lookupOffsetNonSC(1))) {\n                return this.Ratio();\n            } else {\n                return this.Number();\n            }\n\n        case Dimension:\n            return this.Dimension();\n\n        case Ident:\n            return this.Identifier();\n\n        case FunctionToken:\n            return this.parseWithFallback(\n                () => {\n                    const res = this.Function(this.readSequence, this.scope.Value);\n\n                    this.skipSC();\n\n                    if (this.isDelim(SOLIDUS)) {\n                        this.error();\n                    }\n\n                    return res;\n                },\n                () => {\n                    return this.Ratio();\n                }\n            );\n\n        default:\n            this.error('Number, dimension, ratio or identifier is expected');\n    }\n}\n\nfunction readComparison(expectColon) {\n    this.skipSC();\n\n    if (this.isDelim(LESSTHANSIGN) ||\n        this.isDelim(GREATERTHANSIGN)) {\n        const value = this.source[this.tokenStart];\n\n        this.next();\n\n        if (this.isDelim(EQUALSSIGN)) {\n            this.next();\n            return value + '=';\n        }\n\n        return value;\n    }\n\n    if (this.isDelim(EQUALSSIGN)) {\n        return '=';\n    }\n\n    this.error(`Expected ${expectColon ? '\":\", ' : ''}\"<\", \">\", \"=\" or \")\"`);\n}\n\nexport function parse(kind = 'unknown') {\n    const start = this.tokenStart;\n\n    this.skipSC();\n    this.eat(LeftParenthesis);\n\n    const left = readTerm.call(this);\n    const leftComparison = readComparison.call(this, left.type === 'Identifier');\n    const middle = readTerm.call(this);\n    let rightComparison = null;\n    let right = null;\n\n    if (this.lookupNonWSType(0) !== RightParenthesis) {\n        rightComparison = readComparison.call(this);\n        right = readTerm.call(this);\n    }\n\n    this.skipSC();\n    this.eat(RightParenthesis);\n\n    return {\n        type: 'FeatureRange',\n        loc: this.getLocation(start, this.tokenStart),\n        kind,\n        left,\n        leftComparison,\n        middle,\n        rightComparison,\n        right\n    };\n}\n\nexport function generate(node) {\n    this.token(LeftParenthesis, '(');\n    this.node(node.left);\n    this.tokenize(node.leftComparison);\n    this.node(node.middle);\n\n    if (node.right) {\n        this.tokenize(node.rightComparison);\n        this.node(node.right);\n    }\n\n    this.token(RightParenthesis, ')');\n}\n","import {\n    Function as FunctionToken,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\n\nexport const name = 'Function';\nexport const walkContext = 'function';\nexport const structure = {\n    name: String,\n    children: [[]]\n};\n\n// <function-token> <sequence> )\nexport function parse(readSequence, recognizer) {\n    const start = this.tokenStart;\n    const name = this.consumeFunctionName();\n    const nameLowerCase = name.toLowerCase();\n    let children;\n\n    children = recognizer.hasOwnProperty(nameLowerCase)\n        ? recognizer[nameLowerCase].call(this, recognizer)\n        : readSequence.call(this, recognizer);\n\n    if (!this.eof) {\n        this.eat(RightParenthesis);\n    }\n\n    return {\n        type: 'Function',\n        loc: this.getLocation(start, this.tokenStart),\n        name,\n        children\n    };\n}\n\nexport function generate(node) {\n    this.token(FunctionToken, node.name + '(');\n    this.children(node);\n    this.token(RightParenthesis, ')');\n}\n","import {\n    Function as FunctionToken,\n    LeftParenthesis,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\n\nexport const name = 'GeneralEnclosed';\nexport const structure = {\n    kind: String,\n    function: [String, null],\n    children: [[]]\n};\n\n// <function-token> <any-value> )\n// ( <any-value> )\nexport function parse(kind) {\n    const start = this.tokenStart;\n    let functionName = null;\n\n    if (this.tokenType === FunctionToken) {\n        functionName = this.consumeFunctionName();\n    } else {\n        this.eat(LeftParenthesis);\n    }\n\n    const children = this.parseWithFallback(\n        () => {\n            const startValueToken = this.tokenIndex;\n            const children = this.readSequence(this.scope.Value);\n\n            if (this.eof === false &&\n                this.isBalanceEdge(startValueToken) === false) {\n                this.error();\n            }\n\n            return children;\n        },\n        () => this.createSingleNodeList(\n            this.Raw(null, false)\n        )\n    );\n\n    if (!this.eof) {\n        this.eat(RightParenthesis);\n    }\n\n    return {\n        type: 'GeneralEnclosed',\n        loc: this.getLocation(start, this.tokenStart),\n        kind,\n        function: functionName,\n        children\n    };\n}\n\nexport function generate(node) {\n    if (node.function) {\n        this.token(FunctionToken, node.function + '(');\n    } else {\n        this.token(LeftParenthesis, '(');\n    }\n\n    this.children(node);\n    this.token(RightParenthesis, ')');\n}\n","import { Hash } from '../../tokenizer/index.js';\n\n// '#' ident\nexport const xxx = 'XXX';\nexport const name = 'Hash';\nexport const structure = {\n    value: String\n};\nexport function parse() {\n    const start = this.tokenStart;\n\n    this.eat(Hash);\n\n    return {\n        type: 'Hash',\n        loc: this.getLocation(start, this.tokenStart),\n        value: this.substrToCursor(start + 1)\n    };\n}\nexport function generate(node) {\n    this.token(Hash, '#' + node.value);\n}\n\n","import { Ident } from '../../tokenizer/index.js';\n\nexport const name = 'Identifier';\nexport const structure = {\n    name: String\n};\n\nexport function parse() {\n    return {\n        type: 'Identifier',\n        loc: this.getLocation(this.tokenStart, this.tokenEnd),\n        name: this.consume(Ident)\n    };\n}\n\nexport function generate(node) {\n    this.token(Ident, node.name);\n}\n","import { Hash, Delim } from '../../tokenizer/index.js';\n\nexport const name = 'IdSelector';\nexport const structure = {\n    name: String\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n\n    // TODO: check value is an ident\n    this.eat(Hash);\n\n    return {\n        type: 'IdSelector',\n        loc: this.getLocation(start, this.tokenStart),\n        name: this.substrToCursor(start + 1)\n    };\n}\n\nexport function generate(node) {\n    // Using Delim instead of Hash is a hack to avoid for a whitespace between ident and id-selector\n    // in safe mode (e.g. \"a#id\"), because IE11 doesn't allow a sequence <ident-token> <hash-token>\n    // without a whitespace in values (e.g. \"1px solid#000\")\n    this.token(Delim, '#' + node.name);\n}\n","import { Ident, Delim } from '../../tokenizer/index.js';\n\nconst FULLSTOP = 0x002E; // U+002E FULL STOP (.)\n\nexport const name = 'Layer';\nexport const structure = {\n    name: String\n};\n\nexport function parse() {\n    let name = this.consume(Ident);\n\n    while (this.isDelim(FULLSTOP)) {\n        this.eat(Delim);\n        name += '.' + this.consume(Ident);\n    }\n\n    return {\n        type: 'Layer',\n        loc: this.getLocation(this.tokenStart, this.tokenEnd),\n        name\n    };\n}\n\nexport function generate(node) {\n    this.tokenize(node.name);\n}\n","import { Comma } from '../../tokenizer/index.js';\n\nexport const name = 'LayerList';\nexport const structure = {\n    children: [[\n        'Layer'\n    ]]\n};\n\nexport function parse() {\n    const children = this.createList();\n\n    this.skipSC();\n\n    while (!this.eof) {\n        children.push(this.Layer());\n\n        if (this.lookupTypeNonSC(0) !== Comma) {\n            break;\n        }\n\n        this.skipSC();\n        this.next();\n        this.skipSC();\n    }\n\n    return {\n        type: 'LayerList',\n        loc: this.getLocationFromList(children),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.children(node, () => this.token(Comma, ','));\n}\n","import {\n    Comma,\n    EOF,\n    Ident,\n    LeftCurlyBracket,\n    LeftParenthesis,\n    Function as FunctionToken,\n    Semicolon\n} from '../../tokenizer/index.js';\n\nexport const name = 'MediaQuery';\nexport const structure = {\n    modifier: [String, null],\n    mediaType: [String, null],\n    condition: ['Condition', null]\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n    let modifier = null;\n    let mediaType = null;\n    let condition = null;\n\n    this.skipSC();\n\n    if (this.tokenType === Ident && this.lookupTypeNonSC(1) !== LeftParenthesis) {\n        // [ not | only ]? <media-type>\n        const ident = this.consume(Ident);\n        const identLowerCase = ident.toLowerCase();\n\n        if (identLowerCase === 'not' || identLowerCase === 'only') {\n            this.skipSC();\n            modifier = identLowerCase;\n            mediaType = this.consume(Ident);\n        } else {\n            mediaType = ident;\n        }\n\n        switch (this.lookupTypeNonSC(0)) {\n            case Ident: {\n                // and <media-condition-without-or>\n                this.skipSC();\n                this.eatIdent('and');\n                condition = this.Condition('media');\n                break;\n            }\n\n            case LeftCurlyBracket:\n            case Semicolon:\n            case Comma:\n            case EOF:\n                break;\n\n            default:\n                this.error('Identifier or parenthesis is expected');\n        }\n    } else {\n        switch (this.tokenType) {\n            case Ident:\n            case LeftParenthesis:\n            case FunctionToken: {\n                // <media-condition>\n                condition = this.Condition('media');\n                break;\n            }\n\n            case LeftCurlyBracket:\n            case Semicolon:\n            case EOF:\n                break;\n\n            default:\n                this.error('Identifier or parenthesis is expected');\n        }\n    }\n\n    return {\n        type: 'MediaQuery',\n        loc: this.getLocation(start, this.tokenStart),\n        modifier,\n        mediaType,\n        condition\n    };\n}\n\nexport function generate(node) {\n    if (node.mediaType) {\n        if (node.modifier) {\n            this.token(Ident, node.modifier);\n        }\n\n        this.token(Ident, node.mediaType);\n\n        if (node.condition) {\n            this.token(Ident, 'and');\n            this.node(node.condition);\n        }\n    } else if (node.condition) {\n        this.node(node.condition);\n    }\n}\n\n","import { Comma } from '../../tokenizer/index.js';\n\nexport const name = 'MediaQueryList';\nexport const structure = {\n    children: [[\n        'MediaQuery'\n    ]]\n};\n\nexport function parse() {\n    const children = this.createList();\n\n    this.skipSC();\n\n    while (!this.eof) {\n        children.push(this.MediaQuery());\n\n        if (this.tokenType !== Comma) {\n            break;\n        }\n\n        this.next();\n    }\n\n    return {\n        type: 'MediaQueryList',\n        loc: this.getLocationFromList(children),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.children(node, () => this.token(Comma, ','));\n}\n","import { Delim } from '../../tokenizer/index.js';\n\nconst AMPERSAND = 0x0026;       // U+0026 AMPERSAND (&)\n\nexport const name = 'NestingSelector';\nexport const structure = {\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n\n    this.eatDelim(AMPERSAND);\n\n    return {\n        type: 'NestingSelector',\n        loc: this.getLocation(start, this.tokenStart)\n    };\n}\n\nexport function generate() {\n    this.token(Delim, '&');\n}\n","import { Ident } from '../../tokenizer/index.js';\n\nexport const name = 'Nth';\nexport const structure = {\n    nth: ['AnPlusB', 'Identifier'],\n    selector: ['SelectorList', null]\n};\n\nexport function parse() {\n    this.skipSC();\n\n    const start = this.tokenStart;\n    let end = start;\n    let selector = null;\n    let nth;\n\n    if (this.lookupValue(0, 'odd') || this.lookupValue(0, 'even')) {\n        nth = this.Identifier();\n    } else {\n        nth = this.AnPlusB();\n    }\n\n    end = this.tokenStart;\n    this.skipSC();\n\n    if (this.lookupValue(0, 'of')) {\n        this.next();\n\n        selector = this.SelectorList();\n        end = this.tokenStart;\n    }\n\n    return {\n        type: 'Nth',\n        loc: this.getLocation(start, end),\n        nth,\n        selector\n    };\n}\n\nexport function generate(node) {\n    this.node(node.nth);\n    if (node.selector !== null) {\n        this.token(Ident, 'of');\n        this.node(node.selector);\n    }\n}\n","import { Number as NumberToken } from '../../tokenizer/index.js';\n\nexport const name = 'Number';\nexport const structure = {\n    value: String\n};\n\nexport function parse() {\n    return {\n        type: 'Number',\n        loc: this.getLocation(this.tokenStart, this.tokenEnd),\n        value: this.consume(NumberToken)\n    };\n}\n\nexport function generate(node) {\n    this.token(NumberToken, node.value);\n}\n","// '/' | '*' | ',' | ':' | '+' | '-'\nexport const name = 'Operator';\nexport const structure = {\n    value: String\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n\n    this.next();\n\n    return {\n        type: 'Operator',\n        loc: this.getLocation(start, this.tokenStart),\n        value: this.substrToCursor(start)\n    };\n}\n\nexport function generate(node) {\n    this.tokenize(node.value);\n}\n","import {\n    LeftParenthesis,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\nexport const name = 'Parentheses';\nexport const structure = {\n    children: [[]]\n};\n\nexport function parse(readSequence, recognizer) {\n    const start = this.tokenStart;\n    let children = null;\n\n    this.eat(LeftParenthesis);\n\n    children = readSequence.call(this, recognizer);\n\n    if (!this.eof) {\n        this.eat(RightParenthesis);\n    }\n\n    return {\n        type: 'Parentheses',\n        loc: this.getLocation(start, this.tokenStart),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.token(LeftParenthesis, '(');\n    this.children(node);\n    this.token(RightParenthesis, ')');\n}\n","import { Percentage } from '../../tokenizer/index.js';\n\nexport const name = 'Percentage';\nexport const structure = {\n    value: String\n};\n\nexport function parse() {\n    return {\n        type: 'Percentage',\n        loc: this.getLocation(this.tokenStart, this.tokenEnd),\n        value: this.consumeNumber(Percentage)\n    };\n}\n\nexport function generate(node) {\n    this.token(Percentage, node.value + '%');\n}\n","import {\n    Ident,\n    Function as FunctionToken,\n    Colon,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\n\nexport const name = 'PseudoClassSelector';\nexport const walkContext = 'function';\nexport const structure = {\n    name: String,\n    children: [['Raw'], null]\n};\n\n// : [ <ident> | <function-token> <any-value>? ) ]\nexport function parse() {\n    const start = this.tokenStart;\n    let children = null;\n    let name;\n    let nameLowerCase;\n\n    this.eat(Colon);\n\n    if (this.tokenType === FunctionToken) {\n        name = this.consumeFunctionName();\n        nameLowerCase = name.toLowerCase();\n\n        if (this.lookupNonWSType(0) == RightParenthesis) {\n            children = this.createList();\n        } else if (hasOwnProperty.call(this.pseudo, nameLowerCase)) {\n            this.skipSC();\n            children = this.pseudo[nameLowerCase].call(this);\n            this.skipSC();\n        } else {\n            children = this.createList();\n            children.push(\n                this.Raw(null, false)\n            );\n        }\n\n        this.eat(RightParenthesis);\n    } else {\n        name = this.consume(Ident);\n    }\n\n    return {\n        type: 'PseudoClassSelector',\n        loc: this.getLocation(start, this.tokenStart),\n        name,\n        children\n    };\n}\n\nexport function generate(node) {\n    this.token(Colon, ':');\n\n    if (node.children === null) {\n        this.token(Ident, node.name);\n    } else {\n        this.token(FunctionToken, node.name + '(');\n        this.children(node);\n        this.token(RightParenthesis, ')');\n    }\n}\n","import {\n    Ident,\n    Function as FunctionToken,\n    Colon,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\nexport const name = 'PseudoElementSelector';\nexport const walkContext = 'function';\nexport const structure = {\n    name: String,\n    children: [['Raw'], null]\n};\n\n// :: [ <ident> | <function-token> <any-value>? ) ]\nexport function parse() {\n    const start = this.tokenStart;\n    let children = null;\n    let name;\n    let nameLowerCase;\n\n    this.eat(Colon);\n    this.eat(Colon);\n\n    if (this.tokenType === FunctionToken) {\n        name = this.consumeFunctionName();\n        nameLowerCase = name.toLowerCase();\n\n        if (this.lookupNonWSType(0) == RightParenthesis) {\n            children = this.createList();\n        } else if (hasOwnProperty.call(this.pseudo, nameLowerCase)) {\n            this.skipSC();\n            children = this.pseudo[nameLowerCase].call(this);\n            this.skipSC();\n        } else {\n            children = this.createList();\n            children.push(\n                this.Raw(null, false)\n            );\n        }\n\n        this.eat(RightParenthesis);\n    } else {\n        name = this.consume(Ident);\n    }\n\n    return {\n        type: 'PseudoElementSelector',\n        loc: this.getLocation(start, this.tokenStart),\n        name,\n        children\n    };\n}\n\nexport function generate(node) {\n    this.token(Colon, ':');\n    this.token(Colon, ':');\n\n    if (node.children === null) {\n        this.token(Ident, node.name);\n    } else {\n        this.token(FunctionToken, node.name + '(');\n        this.children(node);\n        this.token(RightParenthesis, ')');\n    }\n}\n","import {\n    Delim,\n    Number as NumberToken,\n    Function as FunctionToken\n} from '../../tokenizer/index.js';\n\nconst SOLIDUS = 0x002F;  // U+002F SOLIDUS (/)\n\n// Media Queries Level 3 defines terms of <ratio> as a positive (not zero or negative)\n// integers (see https://drafts.csswg.org/mediaqueries-3/#values)\n// However, Media Queries Level 4 removes any definition of values\n// (see https://drafts.csswg.org/mediaqueries-4/#values) and refers to\n// CSS Values and Units for detail. In CSS Values and Units Level 4 a <ratio>\n// definition was added (see https://drafts.csswg.org/css-values-4/#ratios) which\n// defines ratio as \"<number [0,∞]> [ / <number [0,∞]> ]?\" and based on it\n// any constrains on terms were removed. Parser also doesn't test numbers\n// in any way to make possible for linting and fixing them by the tools using CSSTree.\n// An additional syntax examination may be applied by a lexer.\nfunction consumeTerm() {\n    this.skipSC();\n\n    switch (this.tokenType) {\n        case NumberToken:\n            return this.Number();\n\n        case FunctionToken:\n            return this.Function(this.readSequence, this.scope.Value);\n\n        default:\n            this.error('Number of function is expected');\n    }\n}\n\nexport const name = 'Ratio';\nexport const structure = {\n    left: ['Number', 'Function'],\n    right: ['Number', 'Function', null]\n};\n\n// <number [0,∞]> [ / <number [0,∞]> ]?\nexport function parse() {\n    const start = this.tokenStart;\n    const left = consumeTerm.call(this);\n    let right = null;\n\n    this.skipSC();\n    if (this.isDelim(SOLIDUS)) {\n        this.eatDelim(SOLIDUS);\n        right = consumeTerm.call(this);\n    }\n\n    return {\n        type: 'Ratio',\n        loc: this.getLocation(start, this.tokenStart),\n        left,\n        right\n    };\n}\n\nexport function generate(node) {\n    this.node(node.left);\n    this.token(Delim, '/');\n    if (node.right) {\n        this.node(node.right);\n    } else {\n        this.node(NumberToken, 1);\n    }\n}\n","import { WhiteSpace } from '../../tokenizer/index.js';\n\nfunction getOffsetExcludeWS() {\n    if (this.tokenIndex > 0) {\n        if (this.lookupType(-1) === WhiteSpace) {\n            return this.tokenIndex > 1\n                ? this.getTokenStart(this.tokenIndex - 1)\n                : this.firstCharOffset;\n        }\n    }\n\n    return this.tokenStart;\n}\n\nexport const name = 'Raw';\nexport const structure = {\n    value: String\n};\n\nexport function parse(consumeUntil, excludeWhiteSpace) {\n    const startOffset = this.getTokenStart(this.tokenIndex);\n    let endOffset;\n\n    this.skipUntilBalanced(this.tokenIndex, consumeUntil || this.consumeUntilBalanceEnd);\n\n    if (excludeWhiteSpace && this.tokenStart > startOffset) {\n        endOffset = getOffsetExcludeWS.call(this);\n    } else {\n        endOffset = this.tokenStart;\n    }\n\n    return {\n        type: 'Raw',\n        loc: this.getLocation(startOffset, endOffset),\n        value: this.substring(startOffset, endOffset)\n    };\n}\n\nexport function generate(node) {\n    this.tokenize(node.value);\n}\n","import { LeftCurlyBracket } from '../../tokenizer/index.js';\n\nfunction consumeRaw() {\n    return this.Raw(this.consumeUntilLeftCurlyBracket, true);\n}\n\nfunction consumePrelude() {\n    const prelude = this.SelectorList();\n\n    if (prelude.type !== 'Raw' &&\n        this.eof === false &&\n        this.tokenType !== LeftCurlyBracket) {\n        this.error();\n    }\n\n    return prelude;\n}\n\nexport const name = 'Rule';\nexport const walkContext = 'rule';\nexport const structure = {\n    prelude: ['SelectorList', 'Raw'],\n    block: ['Block']\n};\n\nexport function parse() {\n    const startToken = this.tokenIndex;\n    const startOffset = this.tokenStart;\n    let prelude;\n    let block;\n\n    if (this.parseRulePrelude) {\n        prelude = this.parseWithFallback(consumePrelude, consumeRaw);\n    } else {\n        prelude = consumeRaw.call(this, startToken);\n    }\n\n    block = this.Block(true);\n\n    return {\n        type: 'Rule',\n        loc: this.getLocation(startOffset, this.tokenStart),\n        prelude,\n        block\n    };\n}\nexport function generate(node) {\n    this.node(node.prelude);\n    this.node(node.block);\n}\n\n","import {\n    Ident,\n    LeftParenthesis,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\nexport const name = 'Scope';\nexport const structure = {\n    root: ['SelectorList', 'Raw', null],\n    limit: ['SelectorList', 'Raw', null]\n};\n\nexport function parse() {\n    let root = null;\n    let limit = null;\n\n    this.skipSC();\n\n    const startOffset = this.tokenStart;\n    if (this.tokenType === LeftParenthesis) {\n        this.next();\n        this.skipSC();\n        root = this.parseWithFallback(\n            this.SelectorList,\n            () => this.Raw(false, true)\n        );\n        this.skipSC();\n        this.eat(RightParenthesis);\n    }\n\n    if (this.lookupNonWSType(0) === Ident) {\n        this.skipSC();\n        this.eatIdent('to');\n        this.skipSC();\n        this.eat(LeftParenthesis);\n        this.skipSC();\n        limit = this.parseWithFallback(\n            this.SelectorList,\n            () => this.Raw(false, true)\n        );\n        this.skipSC();\n        this.eat(RightParenthesis);\n    }\n\n    return {\n        type: 'Scope',\n        loc: this.getLocation(startOffset, this.tokenStart),\n        root,\n        limit\n    };\n}\n\nexport function generate(node) {\n    if (node.root) {\n        this.token(LeftParenthesis, '(');\n        this.node(node.root);\n        this.token(RightParenthesis, ')');\n    }\n\n    if (node.limit) {\n        this.token(Ident, 'to');\n        this.token(LeftParenthesis, '(');\n        this.node(node.limit);\n        this.token(RightParenthesis, ')');\n    }\n}\n","export const name = 'Selector';\nexport const structure = {\n    children: [[\n        'TypeSelector',\n        'IdSelector',\n        'ClassSelector',\n        'AttributeSelector',\n        'PseudoClassSelector',\n        'PseudoElementSelector',\n        'Combinator'\n    ]]\n};\n\nexport function parse() {\n    const children = this.readSequence(this.scope.Selector);\n\n    // nothing were consumed\n    if (this.getFirstListNode(children) === null) {\n        this.error('Selector is expected');\n    }\n\n    return {\n        type: 'Selector',\n        loc: this.getLocationFromList(children),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.children(node);\n}\n","import { Comma } from '../../tokenizer/index.js';\n\nexport const name = 'SelectorList';\nexport const walkContext = 'selector';\nexport const structure = {\n    children: [[\n        'Selector',\n        'Raw'\n    ]]\n};\n\nexport function parse() {\n    const children = this.createList();\n\n    while (!this.eof) {\n        children.push(this.Selector());\n\n        if (this.tokenType === Comma) {\n            this.next();\n            continue;\n        }\n\n        break;\n    }\n\n    return {\n        type: 'SelectorList',\n        loc: this.getLocationFromList(children),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.children(node, () => this.token(Comma, ','));\n}\n","import {\n    isHexDigit,\n    isWhiteSpace,\n    isValidEscape,\n    consumeEscaped,\n    decodeEscaped\n} from '../tokenizer/index.js';\n\nconst REVERSE_SOLIDUS = 0x005c; // U+005C REVERSE SOLIDUS (\\)\nconst QUOTATION_MARK = 0x0022;  // \"\nconst APOSTROPHE = 0x0027;      // '\n\nexport function decode(str) {\n    const len = str.length;\n    const firstChar = str.charCodeAt(0);\n    const start = firstChar === QUOTATION_MARK || firstChar === APOSTROPHE ? 1 : 0;\n    const end = start === 1 && len > 1 && str.charCodeAt(len - 1) === firstChar ? len - 2 : len - 1;\n    let decoded = '';\n\n    for (let i = start; i <= end; i++) {\n        let code = str.charCodeAt(i);\n\n        if (code === REVERSE_SOLIDUS) {\n            // special case at the ending\n            if (i === end) {\n                // if the next input code point is EOF, do nothing\n                // otherwise include last quote as escaped\n                if (i !== len - 1) {\n                    decoded = str.substr(i + 1);\n                }\n                break;\n            }\n\n            code = str.charCodeAt(++i);\n\n            // consume escaped\n            if (isValidEscape(REVERSE_SOLIDUS, code)) {\n                const escapeStart = i - 1;\n                const escapeEnd = consumeEscaped(str, escapeStart);\n\n                i = escapeEnd - 1;\n                decoded += decodeEscaped(str.substring(escapeStart + 1, escapeEnd));\n            } else {\n                // \\r\\n\n                if (code === 0x000d && str.charCodeAt(i + 1) === 0x000a) {\n                    i++;\n                }\n            }\n        } else {\n            decoded += str[i];\n        }\n    }\n\n    return decoded;\n}\n\n// https://drafts.csswg.org/cssom/#serialize-a-string\n// § 2.1. Common Serializing Idioms\nexport function encode(str, apostrophe) {\n    const quote = apostrophe ? '\\'' : '\"';\n    const quoteCode = apostrophe ? APOSTROPHE : QUOTATION_MARK;\n    let encoded = '';\n    let wsBeforeHexIsNeeded = false;\n\n    for (let i = 0; i < str.length; i++) {\n        const code = str.charCodeAt(i);\n\n        // If the character is NULL (U+0000), then the REPLACEMENT CHARACTER (U+FFFD).\n        if (code === 0x0000) {\n            encoded += '\\uFFFD';\n            continue;\n        }\n\n        // If the character is in the range [\\1-\\1f] (U+0001 to U+001F) or is U+007F,\n        // the character escaped as code point.\n        // Note: Do not compare with 0x0001 since 0x0000 is precessed before\n        if (code <= 0x001f || code === 0x007F) {\n            encoded += '\\\\' + code.toString(16);\n            wsBeforeHexIsNeeded = true;\n            continue;\n        }\n\n        // If the character is '\"' (U+0022) or \"\\\" (U+005C), the escaped character.\n        if (code === quoteCode || code === REVERSE_SOLIDUS) {\n            encoded += '\\\\' + str.charAt(i);\n            wsBeforeHexIsNeeded = false;\n        } else {\n            if (wsBeforeHexIsNeeded && (isHexDigit(code) || isWhiteSpace(code))) {\n                encoded += ' ';\n            }\n\n            // Otherwise, the character itself.\n            encoded += str.charAt(i);\n            wsBeforeHexIsNeeded = false;\n        }\n    }\n\n    return quote + encoded + quote;\n}\n","import { String as StringToken } from '../../tokenizer/index.js';\nimport { decode, encode } from '../../utils/string.js';\n\nexport const name = 'String';\nexport const structure = {\n    value: String\n};\n\nexport function parse() {\n    return {\n        type: 'String',\n        loc: this.getLocation(this.tokenStart, this.tokenEnd),\n        value: decode(this.consume(StringToken))\n    };\n}\n\nexport function generate(node) {\n    this.token(StringToken, encode(node.value));\n}\n","import {\n    WhiteSpace,\n    Comment,\n    AtKeyword,\n    CDO,\n    CDC\n} from '../../tokenizer/index.js';\n\nconst EXCLAMATIONMARK = 0x0021; // U+0021 EXCLAMATION MARK (!)\n\nfunction consumeRaw() {\n    return this.Raw(null, false);\n}\n\nexport const name = 'StyleSheet';\nexport const walkContext = 'stylesheet';\nexport const structure = {\n    children: [[\n        'Comment',\n        'CDO',\n        'CDC',\n        'Atrule',\n        'Rule',\n        'Raw'\n    ]]\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n    const children = this.createList();\n    let child;\n\n    scan:\n    while (!this.eof) {\n        switch (this.tokenType) {\n            case WhiteSpace:\n                this.next();\n                continue;\n\n            case Comment:\n                // ignore comments except exclamation comments (i.e. /*! .. */) on top level\n                if (this.charCodeAt(this.tokenStart + 2) !== EXCLAMATIONMARK) {\n                    this.next();\n                    continue;\n                }\n\n                child = this.Comment();\n                break;\n\n            case CDO: // <!--\n                child = this.CDO();\n                break;\n\n            case CDC: // -->\n                child = this.CDC();\n                break;\n\n            // CSS Syntax Module Level 3\n            // §2.2 Error handling\n            // At the \"top level\" of a stylesheet, an <at-keyword-token> starts an at-rule.\n            case AtKeyword:\n                child = this.parseWithFallback(this.Atrule, consumeRaw);\n                break;\n\n            // Anything else starts a qualified rule ...\n            default:\n                child = this.parseWithFallback(this.Rule, consumeRaw);\n        }\n\n        children.push(child);\n    }\n\n    return {\n        type: 'StyleSheet',\n        loc: this.getLocation(start, this.tokenStart),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.children(node);\n}\n","import {\n    LeftParenthesis,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\nexport const name = 'SupportsDeclaration';\nexport const structure = {\n    declaration: 'Declaration'\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n\n    this.eat(LeftParenthesis);\n    this.skipSC();\n\n    const declaration = this.Declaration();\n\n    if (!this.eof) {\n        this.eat(RightParenthesis);\n    }\n\n    return {\n        type: 'SupportsDeclaration',\n        loc: this.getLocation(start, this.tokenStart),\n        declaration\n    };\n}\n\nexport function generate(node) {\n    this.token(LeftParenthesis, '(');\n    this.node(node.declaration);\n    this.token(RightParenthesis, ')');\n}\n","import { Ident } from '../../tokenizer/index.js';\n\nconst ASTERISK = 0x002A;     // U+002A ASTERISK (*)\nconst VERTICALLINE = 0x007C; // U+007C VERTICAL LINE (|)\n\nfunction eatIdentifierOrAsterisk() {\n    if (this.tokenType !== Ident &&\n        this.isDelim(ASTERISK) === false) {\n        this.error('Identifier or asterisk is expected');\n    }\n\n    this.next();\n}\n\nexport const name = 'TypeSelector';\nexport const structure = {\n    name: String\n};\n\n// ident\n// ident|ident\n// ident|*\n// *\n// *|ident\n// *|*\n// |ident\n// |*\nexport function parse() {\n    const start = this.tokenStart;\n\n    if (this.isDelim(VERTICALLINE)) {\n        this.next();\n        eatIdentifierOrAsterisk.call(this);\n    } else {\n        eatIdentifierOrAsterisk.call(this);\n\n        if (this.isDelim(VERTICALLINE)) {\n            this.next();\n            eatIdentifierOrAsterisk.call(this);\n        }\n    }\n\n    return {\n        type: 'TypeSelector',\n        loc: this.getLocation(start, this.tokenStart),\n        name: this.substrToCursor(start)\n    };\n}\n\nexport function generate(node) {\n    this.tokenize(node.name);\n}\n","import {\n    isHexDigit,\n    Ident,\n    Number,\n    Dimension\n} from '../../tokenizer/index.js';\n\nconst PLUSSIGN = 0x002B;     // U+002B PLUS SIGN (+)\nconst HYPHENMINUS = 0x002D;  // U+002D HYPHEN-MINUS (-)\nconst QUESTIONMARK = 0x003F; // U+003F QUESTION MARK (?)\n\nfunction eatHexSequence(offset, allowDash) {\n    let len = 0;\n\n    for (let pos = this.tokenStart + offset; pos < this.tokenEnd; pos++) {\n        const code = this.charCodeAt(pos);\n\n        if (code === HYPHENMINUS && allowDash && len !== 0) {\n            eatHexSequence.call(this, offset + len + 1, false);\n            return -1;\n        }\n\n        if (!isHexDigit(code)) {\n            this.error(\n                allowDash && len !== 0\n                    ? 'Hyphen minus' + (len < 6 ? ' or hex digit' : '') + ' is expected'\n                    : (len < 6 ? 'Hex digit is expected' : 'Unexpected input'),\n                pos\n            );\n        }\n\n        if (++len > 6) {\n            this.error('Too many hex digits', pos);\n        };\n    }\n\n    this.next();\n    return len;\n}\n\nfunction eatQuestionMarkSequence(max) {\n    let count = 0;\n\n    while (this.isDelim(QUESTIONMARK)) {\n        if (++count > max) {\n            this.error('Too many question marks');\n        }\n\n        this.next();\n    }\n}\n\nfunction startsWith(code) {\n    if (this.charCodeAt(this.tokenStart) !== code) {\n        this.error((code === PLUSSIGN ? 'Plus sign' : 'Hyphen minus') + ' is expected');\n    }\n}\n\n// https://drafts.csswg.org/css-syntax/#urange\n// Informally, the <urange> production has three forms:\n// U+0001\n//      Defines a range consisting of a single code point, in this case the code point \"1\".\n// U+0001-00ff\n//      Defines a range of codepoints between the first and the second value, in this case\n//      the range between \"1\" and \"ff\" (255 in decimal) inclusive.\n// U+00??\n//      Defines a range of codepoints where the \"?\" characters range over all hex digits,\n//      in this case defining the same as the value U+0000-00ff.\n// In each form, a maximum of 6 digits is allowed for each hexadecimal number (if you treat \"?\" as a hexadecimal digit).\n//\n// <urange> =\n//   u '+' <ident-token> '?'* |\n//   u <dimension-token> '?'* |\n//   u <number-token> '?'* |\n//   u <number-token> <dimension-token> |\n//   u <number-token> <number-token> |\n//   u '+' '?'+\nfunction scanUnicodeRange() {\n    let hexLength = 0;\n\n    switch (this.tokenType) {\n        case Number:\n            // u <number-token> '?'*\n            // u <number-token> <dimension-token>\n            // u <number-token> <number-token>\n            hexLength = eatHexSequence.call(this, 1, true);\n\n            if (this.isDelim(QUESTIONMARK)) {\n                eatQuestionMarkSequence.call(this, 6 - hexLength);\n                break;\n            }\n\n            if (this.tokenType === Dimension ||\n                this.tokenType === Number) {\n                startsWith.call(this, HYPHENMINUS);\n                eatHexSequence.call(this, 1, false);\n                break;\n            }\n\n            break;\n\n        case Dimension:\n            // u <dimension-token> '?'*\n            hexLength = eatHexSequence.call(this, 1, true);\n\n            if (hexLength > 0) {\n                eatQuestionMarkSequence.call(this, 6 - hexLength);\n            }\n\n            break;\n\n        default:\n            // u '+' <ident-token> '?'*\n            // u '+' '?'+\n            this.eatDelim(PLUSSIGN);\n\n            if (this.tokenType === Ident) {\n                hexLength = eatHexSequence.call(this, 0, true);\n                if (hexLength > 0) {\n                    eatQuestionMarkSequence.call(this, 6 - hexLength);\n                }\n                break;\n            }\n\n            if (this.isDelim(QUESTIONMARK)) {\n                this.next();\n                eatQuestionMarkSequence.call(this, 5);\n                break;\n            }\n\n            this.error('Hex digit or question mark is expected');\n    }\n}\n\nexport const name = 'UnicodeRange';\nexport const structure = {\n    value: String\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n\n    // U or u\n    this.eatIdent('u');\n    scanUnicodeRange.call(this);\n\n    return {\n        type: 'UnicodeRange',\n        loc: this.getLocation(start, this.tokenStart),\n        value: this.substrToCursor(start)\n    };\n}\n\nexport function generate(node) {\n    this.tokenize(node.value);\n}\n","import {\n    isHexDigit,\n    isWhiteSpace,\n    isValidEscape,\n    consumeEscaped,\n    decodeEscaped\n} from '../tokenizer/index.js';\n\nconst SPACE = 0x0020;            // U+0020 SPACE\nconst REVERSE_SOLIDUS = 0x005c;  // U+005C REVERSE SOLIDUS (\\)\nconst QUOTATION_MARK = 0x0022;   // \"\nconst APOSTROPHE = 0x0027;       // '\nconst LEFTPARENTHESIS = 0x0028;  // U+0028 LEFT PARENTHESIS (()\nconst RIGHTPARENTHESIS = 0x0029; // U+0029 RIGHT PARENTHESIS ())\n\nexport function decode(str) {\n    const len = str.length;\n    let start = 4; // length of \"url(\"\n    let end = str.charCodeAt(len - 1) === RIGHTPARENTHESIS ? len - 2 : len - 1;\n    let decoded = '';\n\n    while (start < end && isWhiteSpace(str.charCodeAt(start))) {\n        start++;\n    }\n\n    while (start < end && isWhiteSpace(str.charCodeAt(end))) {\n        end--;\n    }\n\n    for (let i = start; i <= end; i++) {\n        let code = str.charCodeAt(i);\n\n        if (code === REVERSE_SOLIDUS) {\n            // special case at the ending\n            if (i === end) {\n                // if the next input code point is EOF, do nothing\n                // otherwise include last left parenthesis as escaped\n                if (i !== len - 1) {\n                    decoded = str.substr(i + 1);\n                }\n                break;\n            }\n\n            code = str.charCodeAt(++i);\n\n            // consume escaped\n            if (isValidEscape(REVERSE_SOLIDUS, code)) {\n                const escapeStart = i - 1;\n                const escapeEnd = consumeEscaped(str, escapeStart);\n\n                i = escapeEnd - 1;\n                decoded += decodeEscaped(str.substring(escapeStart + 1, escapeEnd));\n            } else {\n                // \\r\\n\n                if (code === 0x000d && str.charCodeAt(i + 1) === 0x000a) {\n                    i++;\n                }\n            }\n        } else {\n            decoded += str[i];\n        }\n    }\n\n    return decoded;\n}\n\nexport function encode(str) {\n    let encoded = '';\n    let wsBeforeHexIsNeeded = false;\n\n    for (let i = 0; i < str.length; i++) {\n        const code = str.charCodeAt(i);\n\n        // If the character is NULL (U+0000), then the REPLACEMENT CHARACTER (U+FFFD).\n        if (code === 0x0000) {\n            encoded += '\\uFFFD';\n            continue;\n        }\n\n        // If the character is in the range [\\1-\\1f] (U+0001 to U+001F) or is U+007F,\n        // the character escaped as code point.\n        // Note: Do not compare with 0x0001 since 0x0000 is precessed before\n        if (code <= 0x001f || code === 0x007F) {\n            encoded += '\\\\' + code.toString(16);\n            wsBeforeHexIsNeeded = true;\n            continue;\n        }\n\n        if (code === SPACE ||\n            code === REVERSE_SOLIDUS ||\n            code === QUOTATION_MARK ||\n            code === APOSTROPHE ||\n            code === LEFTPARENTHESIS ||\n            code === RIGHTPARENTHESIS) {\n            encoded += '\\\\' + str.charAt(i);\n            wsBeforeHexIsNeeded = false;\n        } else {\n            if (wsBeforeHexIsNeeded && isHexDigit(code)) {\n                encoded += ' ';\n            }\n\n            encoded += str.charAt(i);\n            wsBeforeHexIsNeeded = false;\n        }\n    }\n\n    return 'url(' + encoded + ')';\n}\n","import * as url from '../../utils/url.js';\nimport * as string from '../../utils/string.js';\nimport {\n    Function as FunctionToken,\n    String as StringToken,\n    Url,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\nexport const name = 'Url';\nexport const structure = {\n    value: String\n};\n\n// <url-token> | <function-token> <string> )\nexport function parse() {\n    const start = this.tokenStart;\n    let value;\n\n    switch (this.tokenType) {\n        case Url:\n            value = url.decode(this.consume(Url));\n            break;\n\n        case FunctionToken:\n            if (!this.cmpStr(this.tokenStart, this.tokenEnd, 'url(')) {\n                this.error('Function name must be `url`');\n            }\n\n            this.eat(FunctionToken);\n            this.skipSC();\n            value = string.decode(this.consume(StringToken));\n            this.skipSC();\n            if (!this.eof) {\n                this.eat(RightParenthesis);\n            }\n            break;\n\n        default:\n            this.error('Url or Function is expected');\n    }\n\n    return {\n        type: 'Url',\n        loc: this.getLocation(start, this.tokenStart),\n        value\n    };\n}\n\nexport function generate(node) {\n    this.token(Url, url.encode(node.value));\n}\n","export const name = 'Value';\nexport const structure = {\n    children: [[]]\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n    const children = this.readSequence(this.scope.Value);\n\n    return {\n        type: 'Value',\n        loc: this.getLocation(start, this.tokenStart),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.children(node);\n}\n","import { WhiteSpace } from '../../tokenizer/index.js';\n\nconst SPACE = Object.freeze({\n    type: 'WhiteSpace',\n    loc: null,\n    value: ' '\n});\n\nexport const name = 'WhiteSpace';\nexport const structure = {\n    value: String\n};\n\nexport function parse() {\n    this.eat(WhiteSpace);\n    return SPACE;\n\n    // return {\n    //     type: 'WhiteSpace',\n    //     loc: this.getLocation(this.tokenStart, this.tokenEnd),\n    //     value: this.consume(WHITESPACE)\n    // };\n}\n\nexport function generate(node) {\n    this.token(WhiteSpace, node.value);\n}\n","import { cssWideKeywords } from '../../lexer/generic-const.js';\nimport definitions from '../../data.js';\nimport * as node from '../node/index.js';\n\nexport default {\n    generic: true,\n    cssWideKeywords,\n    ...definitions,\n    node\n};\n","import {\n    Ident,\n    String as StringToken,\n    Number as NumberToken,\n    Function as FunctionToken,\n    Url,\n    Hash,\n    Dimension,\n    Percentage,\n    LeftParenthesis,\n    LeftSquareBracket,\n    Comma,\n    Delim\n} from '../../tokenizer/index.js';\n\nconst NUMBERSIGN = 0x0023;  // U+0023 NUMBER SIGN (#)\nconst ASTERISK = 0x002A;    // U+002A ASTERISK (*)\nconst PLUSSIGN = 0x002B;    // U+002B PLUS SIGN (+)\nconst HYPHENMINUS = 0x002D; // U+002D HYPHEN-MINUS (-)\nconst SOLIDUS = 0x002F;     // U+002F SOLIDUS (/)\nconst U = 0x0075;           // U+0075 LATIN SMALL LETTER U (u)\n\nexport default function defaultRecognizer(context) {\n    switch (this.tokenType) {\n        case Hash:\n            return this.Hash();\n\n        case Comma:\n            return this.Operator();\n\n        case LeftParenthesis:\n            return this.Parentheses(this.readSequence, context.recognizer);\n\n        case LeftSquareBracket:\n            return this.Brackets(this.readSequence, context.recognizer);\n\n        case StringToken:\n            return this.String();\n\n        case Dimension:\n            return this.Dimension();\n\n        case Percentage:\n            return this.Percentage();\n\n        case NumberToken:\n            return this.Number();\n\n        case FunctionToken:\n            return this.cmpStr(this.tokenStart, this.tokenEnd, 'url(')\n                ? this.Url()\n                : this.Function(this.readSequence, context.recognizer);\n\n        case Url:\n            return this.Url();\n\n        case Ident:\n            // check for unicode range, it should start with u+ or U+\n            if (this.cmpChar(this.tokenStart, U) &&\n                this.cmpChar(this.tokenStart + 1, PLUSSIGN)) {\n                return this.UnicodeRange();\n            } else {\n                return this.Identifier();\n            }\n\n        case Delim: {\n            const code = this.charCodeAt(this.tokenStart);\n\n            if (code === SOLIDUS ||\n                code === ASTERISK ||\n                code === PLUSSIGN ||\n                code === HYPHENMINUS) {\n                return this.Operator(); // TODO: replace with Delim\n            }\n\n            // TODO: produce a node with Delim node type\n\n            if (code === NUMBERSIGN) {\n                this.error('Hex or identifier is expected', this.tokenStart + 1);\n            }\n\n            break;\n        }\n    }\n};\n","import getNode from './default.js';\n\nexport default {\n    getNode\n};\n","import {\n    Delim,\n    Ident,\n    Dimension,\n    Percentage,\n    Number as NumberToken,\n    Hash,\n    Colon,\n    LeftSquareBracket\n} from '../../tokenizer/index.js';\n\nconst NUMBERSIGN = 0x0023;      // U+0023 NUMBER SIGN (#)\nconst AMPERSAND = 0x0026;       // U+0026 AMPERSAND (&)\nconst ASTERISK = 0x002A;        // U+002A ASTERISK (*)\nconst PLUSSIGN = 0x002B;        // U+002B PLUS SIGN (+)\nconst SOLIDUS = 0x002F;         // U+002F SOLIDUS (/)\nconst FULLSTOP = 0x002E;        // U+002E FULL STOP (.)\nconst GREATERTHANSIGN = 0x003E; // U+003E GREATER-THAN SIGN (>)\nconst VERTICALLINE = 0x007C;    // U+007C VERTICAL LINE (|)\nconst TILDE = 0x007E;           // U+007E TILDE (~)\n\nfunction onWhiteSpace(next, children) {\n    if (children.last !== null && children.last.type !== 'Combinator' &&\n        next !== null && next.type !== 'Combinator') {\n        children.push({  // FIXME: this.Combinator() should be used instead\n            type: 'Combinator',\n            loc: null,\n            name: ' '\n        });\n    }\n}\n\nfunction getNode() {\n    switch (this.tokenType) {\n        case LeftSquareBracket:\n            return this.AttributeSelector();\n\n        case Hash:\n            return this.IdSelector();\n\n        case Colon:\n            if (this.lookupType(1) === Colon) {\n                return this.PseudoElementSelector();\n            } else {\n                return this.PseudoClassSelector();\n            }\n\n        case Ident:\n            return this.TypeSelector();\n\n        case NumberToken:\n        case Percentage:\n            return this.Percentage();\n\n        case Dimension:\n            // throws when .123ident\n            if (this.charCodeAt(this.tokenStart) === FULLSTOP) {\n                this.error('Identifier is expected', this.tokenStart + 1);\n            }\n            break;\n\n        case Delim: {\n            const code = this.charCodeAt(this.tokenStart);\n\n            switch (code) {\n                case PLUSSIGN:\n                case GREATERTHANSIGN:\n                case TILDE:\n                case SOLIDUS:  // /deep/\n                    return this.Combinator();\n\n                case FULLSTOP:\n                    return this.ClassSelector();\n\n                case ASTERISK:\n                case VERTICALLINE:\n                    return this.TypeSelector();\n\n                case NUMBERSIGN:\n                    return this.IdSelector();\n\n                case AMPERSAND:\n                    return this.NestingSelector();\n            }\n\n            break;\n        }\n    }\n};\n\nexport default {\n    onWhiteSpace,\n    getNode\n};\n","// legacy IE function\n// expression( <any-value> )\nexport default function() {\n    return this.createSingleNodeList(\n        this.Raw(null, false)\n    );\n}\n","import { Comma, WhiteSpace } from '../../tokenizer/index.js';\n\n// var( <ident> , <value>? )\nexport default function() {\n    const children = this.createList();\n\n    this.skipSC();\n\n    // NOTE: Don't check more than a first argument is an ident, rest checks are for lexer\n    children.push(this.Identifier());\n\n    this.skipSC();\n\n    if (this.tokenType === Comma) {\n        children.push(this.Operator());\n\n        const startIndex = this.tokenIndex;\n        const value = this.parseCustomProperty\n            ? this.Value(null)\n            : this.Raw(this.consumeUntilExclamationMarkOrSemicolon, false);\n\n        if (value.type === 'Value' && value.children.isEmpty) {\n            for (let offset = startIndex - this.tokenIndex; offset <= 0; offset++) {\n                if (this.lookupType(offset) === WhiteSpace) {\n                    value.children.appendData({\n                        type: 'WhiteSpace',\n                        loc: null,\n                        value: ' '\n                    });\n                    break;\n                }\n            }\n        }\n\n        children.push(value);\n    }\n\n    return children;\n};\n","import getNode from './default.js';\nimport expressionFn from '../function/expression.js';\nimport varFn from '../function/var.js';\n\nfunction isPlusMinusOperator(node) {\n    return (\n        node !== null &&\n        node.type === 'Operator' &&\n        (node.value[node.value.length - 1] === '-' || node.value[node.value.length - 1] === '+')\n    );\n}\n\nexport default {\n    getNode,\n    onWhiteSpace(next, children) {\n        if (isPlusMinusOperator(next)) {\n            next.value = ' ' + next.value;\n        }\n        if (isPlusMinusOperator(children.last)) {\n            children.last.value += ' ';\n        }\n    },\n    'expression': expressionFn,\n    'var': varFn\n};\n","import { Ident } from '../../tokenizer/index.js';\n\n// https://drafts.csswg.org/css-contain-3/#container-rule\n// The keywords `none`, `and`, `not`, and `or` are excluded from the <custom-ident> above.\nconst nonContainerNameKeywords = new Set(['none', 'and', 'not', 'or']);\n\nexport default {\n    parse: {\n        prelude() {\n            const children = this.createList();\n\n            if (this.tokenType === Ident) {\n                const name = this.substring(this.tokenStart, this.tokenEnd);\n\n                if (!nonContainerNameKeywords.has(name.toLowerCase())) {\n                    children.push(this.Identifier());\n                }\n            }\n\n            children.push(this.Condition('container'));\n\n            return children;\n        },\n        block(nested = false) {\n            return this.Block(nested);\n        }\n    }\n};\n","export default {\n    parse: {\n        prelude: null,\n        block() {\n            return this.Block(true);\n        }\n    }\n};\n","import {\n    String as StringToken,\n    Ident,\n    Url,\n    Function as FunctionToken,\n    LeftParenthesis,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\nfunction parseWithFallback(parse, fallback) {\n    return this.parseWithFallback(\n        () => {\n            try {\n                return parse.call(this);\n            } finally {\n                this.skipSC();\n                if (this.lookupNonWSType(0) !== RightParenthesis) {\n                    this.error();\n                }\n            }\n        },\n        fallback || (() => this.Raw(null, true))\n    );\n}\n\nconst parseFunctions = {\n    layer() {\n        this.skipSC();\n\n        const children = this.createList();\n        const node = parseWithFallback.call(this, this.Layer);\n\n        if (node.type !== 'Raw' || node.value !== '') {\n            children.push(node);\n        }\n\n        return children;\n    },\n    supports() {\n        this.skipSC();\n\n        const children = this.createList();\n        const node = parseWithFallback.call(\n            this,\n            this.Declaration,\n            () => parseWithFallback.call(this, () => this.Condition('supports'))\n        );\n\n        if (node.type !== 'Raw' || node.value !== '') {\n            children.push(node);\n        }\n\n        return children;\n    }\n};\n\nexport default {\n    parse: {\n        prelude() {\n            const children = this.createList();\n\n            switch (this.tokenType) {\n                case StringToken:\n                    children.push(this.String());\n                    break;\n\n                case Url:\n                case FunctionToken:\n                    children.push(this.Url());\n                    break;\n\n                default:\n                    this.error('String or url() is expected');\n            }\n\n            this.skipSC();\n\n            if (this.tokenType === Ident &&\n                this.cmpStr(this.tokenStart, this.tokenEnd, 'layer')) {\n                children.push(this.Identifier());\n            } else if (\n                this.tokenType === FunctionToken &&\n                this.cmpStr(this.tokenStart, this.tokenEnd, 'layer(')\n            ) {\n                children.push(this.Function(null, parseFunctions));\n            }\n\n            this.skipSC();\n\n            if (this.tokenType === FunctionToken &&\n                this.cmpStr(this.tokenStart, this.tokenEnd, 'supports(')) {\n                children.push(this.Function(null, parseFunctions));\n            }\n\n            if (this.lookupNonWSType(0) === Ident ||\n                this.lookupNonWSType(0) === LeftParenthesis) {\n                children.push(this.MediaQueryList());\n            }\n\n            return children;\n        },\n        block: null\n    }\n};\n","export default {\n    parse: {\n        prelude() {\n            return this.createSingleNodeList(\n                this.LayerList()\n            );\n        },\n        block() {\n            return this.Block(false);\n        }\n    }\n};\n","export default {\n    parse: {\n        prelude() {\n            return this.createSingleNodeList(\n                this.MediaQueryList()\n            );\n        },\n        block(nested = false) {\n            return this.Block(nested);\n        }\n    }\n};\n","export default {\n    parse: {\n        prelude() {\n            return this.createSingleNodeList(\n                this.SelectorList()\n            );\n        },\n        block() {\n            return this.Block(true);\n        }\n    }\n};\n","export default {\n    parse: {\n        prelude() {\n            return this.createSingleNodeList(\n                this.SelectorList()\n            );\n        },\n        block() {\n            return this.Block(true);\n        }\n    }\n};\n","export default {\n    parse: {\n        prelude() {\n            return this.createSingleNodeList(\n                this.Scope()\n            );\n        },\n        block(nested = false) {\n            return this.Block(nested);\n        }\n    }\n};\n","export default {\n    parse: {\n        prelude: null,\n        block(nested = false) {\n            return this.Block(nested);\n        }\n    }\n};\n","export default {\n    parse: {\n        prelude() {\n            return this.createSingleNodeList(\n                this.Condition('supports')\n            );\n        },\n        block(nested = false) {\n            return this.Block(nested);\n        }\n    }\n};\n","import container from './container.js';\nimport fontFace from './font-face.js';\nimport importAtrule from './import.js';\nimport layer from './layer.js';\nimport media from './media.js';\nimport nest from './nest.js';\nimport page from './page.js';\nimport scope from './scope.js';\nimport startingStyle from './starting-style.js';\nimport supports from './supports.js';\n\nexport default {\n    container,\n    'font-face': fontFace,\n    import: importAtrule,\n    layer,\n    media,\n    nest,\n    page,\n    scope,\n    'starting-style': startingStyle,\n    supports\n};\n","import { Comma, String as StringToken, Ident, RightParenthesis } from '../../tokenizer/index.js';\n\nexport function parseLanguageRangeList() {\n    const children = this.createList();\n\n    this.skipSC();\n\n    loop: while (!this.eof) {\n        switch (this.tokenType) {\n            case Ident:\n                children.push(this.Identifier());\n                break;\n\n            case StringToken:\n                children.push(this.String());\n                break;\n\n            case Comma:\n                children.push(this.Operator());\n                break;\n\n            case RightParenthesis:\n                break loop;\n\n            default:\n                this.error('Identifier, string or comma is expected');\n        }\n\n        this.skipSC();\n    }\n\n    return children;\n}\n","import { parseLanguageRangeList } from './lang.js';\n\nconst selectorList = {\n    parse() {\n        return this.createSingleNodeList(\n            this.SelectorList()\n        );\n    }\n};\n\nconst selector = {\n    parse() {\n        return this.createSingleNodeList(\n            this.Selector()\n        );\n    }\n};\n\nconst identList = {\n    parse() {\n        return this.createSingleNodeList(\n            this.Identifier()\n        );\n    }\n};\n\nconst langList = {\n    parse: parseLanguageRangeList\n};\n\nconst nth = {\n    parse() {\n        return this.createSingleNodeList(\n            this.Nth()\n        );\n    }\n};\n\nexport default {\n    'dir': identList,\n    'has': selectorList,\n    'lang': langList,\n    'matches': selectorList,\n    'is': selectorList,\n    '-moz-any': selectorList,\n    '-webkit-any': selectorList,\n    'where': selectorList,\n    'not': selectorList,\n    'nth-child': nth,\n    'nth-last-child': nth,\n    'nth-last-of-type': nth,\n    'nth-of-type': nth,\n    'slotted': selector,\n    'host': selector,\n    'host-context': selector\n};\n","import * as scope from '../scope/index.js';\nimport atrule from '../atrule/index.js';\nimport pseudo from '../pseudo/index.js';\nimport * as node from '../node/index-parse.js';\n\nexport default {\n    parseContext: {\n        default: 'StyleSheet',\n        stylesheet: 'StyleSheet',\n        atrule: 'Atrule',\n        atrulePrelude(options) {\n            return this.AtrulePrelude(options.atrule ? String(options.atrule) : null);\n        },\n        mediaQueryList: 'MediaQueryList',\n        mediaQuery: 'MediaQuery',\n        condition(options) {\n            return this.Condition(options.kind);\n        },\n        rule: 'Rule',\n        selectorList: 'SelectorList',\n        selector: 'Selector',\n        block() {\n            return this.Block(true);\n        },\n        declarationList: 'DeclarationList',\n        declaration: 'Declaration',\n        value: 'Value'\n    },\n    features: {\n        supports: {\n            selector() {\n                return this.Selector();\n            }\n        },\n        container: {\n            style() {\n                return this.Declaration();\n            }\n        }\n    },\n    scope,\n    atrule,\n    pseudo,\n    node\n};\n","import * as node from '../node/index.js';\n\nexport default {\n    node\n};\n","import createSyntax from './create.js';\nimport lexerConfig from './config/lexer.js';\nimport parserConfig from './config/parser.js';\nimport walkerConfig from './config/walker.js';\n\nexport default createSyntax({\n    ...lexerConfig,\n    ...parserConfig,\n    ...walkerConfig\n});\n","import syntax from './syntax/index.js';\n\nexport * from './version.js';\nexport { default as createSyntax } from './syntax/create.js';\nexport { List } from './utils/List.js';\nexport { Lexer } from './lexer/Lexer.js';\nexport { tokenTypes, tokenNames, TokenStream } from './tokenizer/index.js';\nexport * as definitionSyntax from './definition-syntax/index.js';\nexport { clone } from './utils/clone.js';\nexport * from './utils/names.js';\nexport * as ident from './utils/ident.js';\nexport * as string from './utils/string.js';\nexport * as url from './utils/url.js';\nexport const {\n    tokenize,\n    parse,\n    generate,\n    lexer,\n    createLexer,\n\n    walk,\n    find,\n    findLast,\n    findAll,\n\n    toPlainObject,\n    fromPlainObject,\n\n    fork\n} = syntax;\n","import * as csstree from 'css-tree';\n\nexport function isPseudoElementSelector(\n  selector: csstree.CssNodeCommon\n): selector is csstree.PseudoElementSelector {\n  return selector.type === 'PseudoElementSelector';\n}\nexport function isRawNode(node: csstree.CssNodeCommon): node is csstree.Raw {\n  return node.type === 'Raw';\n}\nexport function isDeclaration(\n  node: csstree.CssNodeCommon\n): node is csstree.Declaration {\n  return node.type === 'Declaration';\n}\nexport function isIdentifier(\n  node: csstree.CssNodeCommon\n): node is csstree.Identifier {\n  return node.type === 'Identifier';\n}\nexport function isValue(node: csstree.CssNodeCommon): node is csstree.Value {\n  return node.type === 'Value';\n}\nexport function isSelector(\n  node: csstree.CssNodeCommon\n): node is csstree.Selector {\n  return node.type === 'Selector';\n}\nexport function isRule(node: csstree.CssNodeCommon): node is csstree.Rule {\n  return node.type === 'Rule';\n}\n","import * as csstree from 'css-tree';\nimport { isPseudoElementSelector, isRawNode } from './style-types';\n\nexport const VIEW_TRANSITION_ELEMENTS = [\n  'view-transition',\n  'view-transition-group',\n  'view-transition-image-pair',\n  'view-transition-old',\n  'view-transition-new',\n];\n\n// CSS at-rules with blocks that could be relevant for view transitions\nexport const ATRULES = ['media', 'layer', 'container', 'scope', 'supports'];\n\nexport function getElementSelector(\n  pseudoElementSelector: csstree.PseudoElementSelector\n): csstree.Selector {\n  // Transform a custom element selector string into an item to use in csstree\n  //  to replace the corresponding pseudo-element\n\n  // Separate (for example with group) the ::view-transition-group from the (view-transition-name)\n  let pseudoElement = '';\n  let parentheses = '';\n  csstree.walk(pseudoElementSelector, {\n    enter(node: csstree.CssNodeCommon) {\n      if (isPseudoElementSelector(node)) {\n        pseudoElement = node.name;\n      } else if (\n        isRawNode(node) &&\n        (<csstree.WalkContext>this).root === pseudoElementSelector\n      ) {\n        parentheses = node.value;\n      }\n    },\n  });\n\n  const selectorString =\n    parentheses !== '' && parentheses !== '*'\n      ? `${pseudoElement}[name=\"${parentheses}\"]`\n      : pseudoElement;\n  const selectorAST = csstree.parse(selectorString, {\n    context: 'selector',\n  }) as csstree.Selector;\n\n  return selectorAST;\n}\n\nexport function getNameDeclaration(\n  declaration: csstree.Declaration\n): csstree.ListItem<csstree.Declaration> {\n  // Transform a view-transition-name declaration into --vt-polyfill-name.\n  // This will be a ListItem such that it can be used for replacement in an AST.\n  declaration.property = '--vt-polyfill-name';\n\n  const declarationItem = generateListItem(declaration);\n  return declarationItem;\n}\n\nexport function generateListItem<T>(node: T): csstree.ListItem<T> {\n  const list = new csstree.List();\n  const nodeItem = list.createItem(node) as csstree.ListItem<T>;\n  return nodeItem;\n}\n\nexport function replaceDeclarations(ast: csstree.CssNode) {\n  // Find view-transition-name declarations\n  //  to replace them with --vt-polyfill-name,\n  //  as that will be parsed by the polyfill is getComputedStyle()\n  csstree.walk(ast, {\n    visit: 'Declaration',\n    enter(node, item, list) {\n      if (node.property === 'view-transition-name') {\n        const newDeclaration = getNameDeclaration(node);\n        list.replace(item, newDeclaration);\n      }\n    },\n  });\n}\n","import * as csstree from 'css-tree';\nimport {\n  isDeclaration,\n  isPseudoElementSelector,\n  isRule,\n  isSelector,\n} from './style-types';\nimport {\n  VIEW_TRANSITION_ELEMENTS,\n  ATRULES,\n  getElementSelector,\n  replaceDeclarations,\n  generateListItem,\n} from './parsing-utils';\n\nfunction removeNonPolyfillCSS(ast: csstree.CssNode) {\n  // Remove most CSS from a stylesheet that is not relevant for view transitions.\n  // This means we only care about:\n  //  - any rule with a view transition pseudo element selector, like ::view-transition ()\n  //  - any rule whose block contains the view-transition-name property\n\n  // Recursive functions used to clear irrelevant CSS\n  const nestedRulesHaveName = (node: csstree.Rule): boolean => {\n    return node.block.children.some((node) => {\n      if (isRule(node)) return nestedRulesHaveName(node);\n      return isDeclaration(node) && node.property === 'view-transition-name';\n    });\n  };\n  const clearIrrelevantProperties = (node: csstree.Rule) => {\n    node.block.children.forEach((node, item, list) => {\n      if (isDeclaration(node) && node.property === 'view-transition-name')\n        return;\n      if (isRule(node)) {\n        clearIrrelevantProperties(node);\n        return;\n      }\n      list.remove(item);\n    });\n  };\n\n  csstree.walk(ast, {\n    visit: 'Rule',\n    enter(node, item, list) {\n      if (this.atrule && !ATRULES.includes(this.atrule.name)) {\n        // Skip at-rules that contain blocks we don't want to touch, like @keyframes.\n        return;\n      }\n      const hasTransitionName = node.block.children.some((node) => {\n        return isDeclaration(node) && node.property === 'view-transition-name';\n      });\n      const isPseudoElRule = (\n        node.prelude as csstree.SelectorList\n      ).children.some((selector) => {\n        if (!isSelector(selector)) return false;\n        return selector.children.some((selectorPart) => {\n          return (\n            isPseudoElementSelector(selectorPart) &&\n            VIEW_TRANSITION_ELEMENTS.includes(selectorPart.name)\n          );\n        });\n      });\n      if (!hasTransitionName && !isPseudoElRule) {\n        // Check that there aren't any nested rules with view-transition-name\n        const hasNestedName = nestedRulesHaveName(node);\n        if (hasNestedName) {\n          // Only delete declarations, not nested rules\n          node.block.children.forEach((node, item, list) => {\n            if (isDeclaration(node)) list.remove(item);\n          });\n          return;\n        }\n        list.remove(item);\n        return;\n      }\n      if (hasTransitionName) {\n        clearIrrelevantProperties(node);\n      }\n    },\n  });\n}\n\nfunction replaceSelectors(ast: csstree.CssNode) {\n  // Find view transition pseudo element selectors\n  // ::view-transition, ::view-transition-group(),\n  // ::view-transition-image-pair(), ::view-transition-old(),\n  // ::view-transition-new()\n\n  // Two conditions, one in visit option for possible performance gains\n  csstree.walk(ast, {\n    visit: 'PseudoElementSelector',\n    enter(node, item, list) {\n      if (VIEW_TRANSITION_ELEMENTS.includes(node.name)) {\n        const selector = node;\n\n        if (selector.name === 'view-transition') {\n          if (selector.children) {\n            // Parse error: ::view-transition should not have parentheses\n            console.warn(\n              `View Transition API polyfill, CSS parse error: ::view-transition should not have parentheses. ${node.loc ? `Source: ${node.loc.source}; Line: ${node.loc.start.line}; Column: ${node.loc.start.column}` : ''}`\n            );\n          }\n        }\n        // Replace pseudo-element selector in AST with custom element selector\n        const newSelector = getElementSelector(node);\n        list.replace(item, generateListItem(newSelector));\n      }\n    },\n  });\n  return ast;\n}\n\nexport default function parseStyleString(styleString: string): string {\n  // Given a CSS stylesheet, output a new stylesheet\n  //  (as a string, to be put inside a <style> element)\n  //  which has had its pseudo elements and transition properties\n  //  replaced with ones understood by the polyfill.\n\n  const parserOptions: csstree.ParseOptions = {\n    // The only detailed things needed are rule preludes (may contain ::view-transition pseudo elements)\n    // The values for view-transition-name can just be raw, they do not need to be dissected.\n    parseAtrulePrelude: false,\n    parseValue: false,\n    parseCustomProperty: false,\n    positions: true,\n  };\n  const parsed = csstree.parse(styleString, parserOptions);\n  removeNonPolyfillCSS(parsed);\n  replaceSelectors(parsed);\n  replaceDeclarations(parsed);\n  const newStyleString = csstree.generate(parsed);\n  return newStyleString;\n}\n","import parseStyleString from './style-parser';\n\nexport async function parseStyles() {\n  // Get all stylesheets and build an array (stylesheetContents) of their unparsed contents\n  // We cannot rely on the built-in cssText property, as it won't return unsupported properties\n  const stylesheets = [...document.styleSheets];\n\n  const styleElementsContents: Map<CSSStyleSheet, string> = new Map();\n  for (const stylesheet of stylesheets) {\n    if (stylesheet.ownerNode instanceof HTMLStyleElement) {\n      if (stylesheet.ownerNode.hasAttribute('data-vt-polyfill-style')) continue;\n      const styleString = stylesheet.ownerNode.textContent;\n      if (!styleString) continue;\n      styleElementsContents.set(stylesheet, styleString);\n    }\n  }\n\n  // Get <link rel=\"stylesheet\"> contents\n  const linkedStylesheets = stylesheets.filter(\n    (stylesheet) => stylesheet.ownerNode instanceof HTMLLinkElement\n  );\n  const linkedStylesheetsContents: Map<CSSStyleSheet, string> = new Map();\n  await Promise.all(\n    linkedStylesheets.map(async (stylesheet) => {\n      const href = stylesheet.href;\n      if (!href) return;\n      const fetchResponse = await fetch(href, {\n        headers: { Accept: 'text/css' },\n      });\n      const responseText = await fetchResponse.text();\n      linkedStylesheetsContents.set(stylesheet, responseText);\n    })\n  );\n\n  // Merge arrays following the order of document.styleSheets\n  const stylesheetContents = stylesheets.map((stylesheet) => {\n    return (\n      styleElementsContents.get(stylesheet) ||\n      linkedStylesheetsContents.get(stylesheet)\n    );\n  });\n\n  // Parse each stylesheet\n  const parsedStyleStrings: string[] = [];\n  await Promise.all(\n    stylesheetContents.map((stylesheetString) => {\n      if (!stylesheetString) return;\n      const parsedString = parseStyleString(stylesheetString);\n      parsedStyleStrings.push(parsedString);\n    })\n  );\n  return parsedStyleStrings.join('\\n');\n}\n","import CaptureElement from '../capture-element';\nexport class ViewTransitionImagePair extends HTMLElement {\n  constructor() {\n    super();\n  }\n  name = '';\n  captureElement = new CaptureElement();\n  oldImage: ViewTransitionOld | undefined;\n  newImage: ViewTransitionNew | undefined;\n  setupForOldImage(name: string, captureElement: CaptureElement) {\n    this.name = name;\n    this.setAttribute('name', name);\n    this.captureElement = captureElement;\n\n    if (this.captureElement.oldElement) {\n      this.oldImage = new ViewTransitionOld();\n      this.oldImage.setup(this.name, this.captureElement);\n      this.appendChild(this.oldImage);\n    }\n\n    return this.oldImage;\n  }\n  setupForNewImage(name: string, captureElement: CaptureElement) {\n    this.name = name;\n    this.setAttribute('name', name);\n    this.captureElement = captureElement;\n\n    if (this.captureElement.newElement) {\n      this.newImage = new ViewTransitionNew();\n      this.newImage.setup(this.name, this.captureElement);\n      this.appendChild(this.newImage);\n    }\n\n    return this.newImage;\n  }\n  addNewImage() {\n    if (this.captureElement.newElement) {\n      this.newImage = new ViewTransitionNew();\n      this.newImage.setup(this.name, this.captureElement);\n      this.appendChild(this.newImage);\n    }\n\n    return this.newImage;\n  }\n}\nclass PolyfillInnerElement {\n  static stylesheet = `\n      .polyfill-inner-element {\n        display: block;\n        position: relative;\n        inline-size: fit-content;\n      }\n      `;\n  styleEl: HTMLStyleElement;\n  element: HTMLDivElement;\n  constructor() {\n    this.element = document.createElement('div');\n    this.element.classList.add('polyfill-inner-element');\n    this.styleEl = document.createElement('style');\n    this.styleEl.textContent = PolyfillInnerElement.stylesheet;\n    this.element.appendChild(this.styleEl);\n  }\n}\ntype CSSTranslateFunction = string;\ntype CSSScaleFunction = string;\nclass ViewTransitionImage extends HTMLElement {\n  constructor() {\n    super();\n    const polyfillInnerElement = new PolyfillInnerElement();\n    this.innerElement = polyfillInnerElement.element;\n  }\n  protected innerElement: HTMLDivElement;\n  name = '';\n  captureElement = new CaptureElement();\n  protected image: Element | undefined;\n  protected element: Element | undefined;\n  setup(name: string, captureElement: CaptureElement) {\n    this.name = name;\n    if (!this.image)\n      throw new Error(\n        `View Transitions API polyfill: could not find old captured clone for name ${name}`\n      );\n    if (!this.element)\n      throw new Error(\n        `View Transitions API polyfill: could not find old captured element for name ${name}`\n      );\n    this.setAttribute('name', name);\n    this.captureElement = captureElement;\n\n    const shadow = this.attachShadow({ mode: 'closed' });\n\n    // To simulate the sizing of the replaced content that should be put inside ::view-transition-old and ::view-transition-new\n    // An extra element to put inside the old and new images is required, because the polyfill uses actual elements instead of images\n    // The size of this element will be animated as a transform: scale() to fit the requirements of the applied object-fit CSS properties\n    // We can be sure that oldImage is not undefined as ViewTransitionImagePair checks for it\n    this.innerElement.appendChild(this.image);\n    shadow.appendChild(this.innerElement);\n  }\n  connectedCallback() {\n    // Restore the scroll position of each cloned element\n    // We need to wait for connectedCallback, as the element needs to be in the document\n    this.innerElement\n      .querySelectorAll('[data-vt-scroll-top]')\n      .forEach((element) => {\n        // Make element scrollable by constraining its size\n        if (element instanceof HTMLElement) {\n          element.style.overflow = 'hidden';\n          element.style.maxHeight = '100vh';\n          element.style.maxWidth = '100vw';\n          const scrollTop =\n            parseInt(element.getAttribute('data-vt-scroll-top') || '0') ?? 0;\n          element.scrollTop = scrollTop;\n        }\n      });\n\n    this.innerElement\n      .querySelectorAll('[data-vt-scroll-left]')\n      .forEach((element) => {\n        if (element instanceof HTMLElement) {\n          element.style.overflow = 'hidden';\n          element.style.maxHeight = '100vh';\n          element.style.maxWidth = '100vw';\n          const scrollTop =\n            parseInt(element.getAttribute('data-vt-scroll-top') || '0') ?? 0;\n          element.scrollTop = scrollTop;\n        }\n      });\n\n    // Check for margin on root cloned element.\n    // If there was margin collapsing before but not anymore,\n    //  it should be removed becuase it won't be collapsed\n    //  with the position: fixed transition elements.\n    const childMarginCollapsingEl = this.innerElement.querySelector(\n      ':scope > :not(style) > :not(style)'\n    );\n    if (\n      this.offsetHeight !== this.innerElement.offsetHeight &&\n      childMarginCollapsingEl instanceof HTMLElement &&\n      !(this.element instanceof HTMLHtmlElement)\n    ) {\n      childMarginCollapsingEl.style.marginBlockStart = '0';\n    }\n  }\n  getScaleFactor(\n    objectFit: string,\n    fromWidth: number,\n    toWidth: number,\n    fromHeight: number,\n    toHeight: number\n  ): [number, number, string] {\n    let scaleFunction: CSSScaleFunction = '';\n    let scaleFactorX = 1;\n    let scaleFactorY = 1;\n\n    if (this.element instanceof HTMLHtmlElement) {\n      // Do not do any scale on the clone of <html>\n      // https://drafts.csswg.org/css-view-transitions/#capture-the-image\n      scaleFactorX = 1;\n      scaleFactorY = 1;\n      scaleFunction = '';\n\n      return [scaleFactorX, scaleFactorY, scaleFunction];\n    }\n\n    const fromAspectRatio = fromWidth / fromHeight;\n    const toAspectRatio = toWidth / toHeight;\n\n    switch (objectFit) {\n      case 'fill':\n        // The scale factors for X and Y are only different when stretching\n        scaleFactorX = toWidth / fromWidth;\n        scaleFactorY = toHeight / fromHeight;\n        break;\n      case 'contain':\n        if (fromAspectRatio > toAspectRatio) {\n          scaleFactorX = toWidth / fromWidth;\n        } else {\n          scaleFactorX = toHeight / fromHeight;\n        }\n        scaleFactorY = scaleFactorX;\n        break;\n      case 'cover':\n        if (fromAspectRatio > toAspectRatio) {\n          scaleFactorX = toHeight / fromHeight;\n        } else {\n          scaleFactorX = toWidth / fromWidth;\n        }\n        scaleFactorY = scaleFactorX;\n        break;\n      case 'scale-down':\n        scaleFactorX = 1;\n        scaleFactorY = scaleFactorX;\n        break;\n    }\n\n    // Fix possible divisions by zero\n    scaleFactorX = Number.isNaN(scaleFactorX) ? 1 : scaleFactorX;\n    scaleFactorY = Number.isNaN(scaleFactorY) ? 1 : scaleFactorY;\n\n    scaleFactorX = parseFloat(scaleFactorX.toFixed(2));\n    scaleFactorY = parseFloat(scaleFactorY.toFixed(2));\n    scaleFunction = `scale(${scaleFactorX}, ${scaleFactorY})`;\n\n    return [scaleFactorX, scaleFactorY, scaleFunction];\n  }\n  getObjectPositionValues(\n    objectPosition: string,\n    oldWidth: number,\n    newWidth: number,\n    oldHeight: number,\n    newHeight: number\n  ) {\n    // Do not do any translation on the clone of <html>\n    // https://drafts.csswg.org/css-view-transitions/#capture-the-image\n    if (this.element instanceof HTMLHtmlElement)\n      return {\n        old: { top: '0px', left: '0px' },\n        new: { top: '0px', left: '0px' },\n      };\n\n    const [objectPositionX, objectPositionY] = objectPosition.split(' ');\n\n    const oldContainerWidth = this.captureElement.old.width;\n    const oldContainerHeight = this.captureElement.old.height;\n    const newContainerWidth = this.captureElement.new.width;\n    const newContainerHeight = this.captureElement.new.height;\n\n    let oldLeft: string;\n    let newLeft: string;\n    if (objectPositionX.includes('%')) {\n      // Calculating the position of the top left corner of the image given the percentage object-position\n      // https://developer.mozilla.org/en-US/docs/Web/CSS/background-position#regarding_percentages\n      const positionOffset = parseFloat(objectPositionX) / 100;\n      oldLeft = ((oldContainerWidth - oldWidth) * positionOffset)\n        .toString()\n        .concat('px');\n      newLeft = ((newContainerWidth - newWidth) * positionOffset)\n        .toString()\n        .concat('px');\n    } else {\n      oldLeft = objectPositionX;\n      newLeft = objectPositionX;\n    }\n\n    let oldTop: string;\n    let newTop: string;\n    if (objectPositionY.includes('%')) {\n      const positionOffset = parseFloat(objectPositionY) / 100;\n      oldTop = ((oldContainerHeight - oldHeight) * positionOffset)\n        .toString()\n        .concat('px');\n      newTop = ((newContainerHeight - newHeight) * positionOffset)\n        .toString()\n        .concat('px');\n    } else {\n      oldTop = objectPositionY;\n      newTop = objectPositionY;\n    }\n\n    return {\n      old: { top: oldTop, left: oldLeft },\n      new: { top: newTop, left: newLeft },\n    };\n  }\n  animateImage(\n    animationDuration: number,\n    CSSeasing: string,\n    fromTransform: string,\n    toTransform: string\n  ) {\n    this.innerElement.animate(\n      [\n        {\n          transform: fromTransform,\n          transformOrigin: 'top left',\n        },\n        {\n          transform: toTransform,\n          transformOrigin: 'top left',\n        },\n      ],\n      {\n        duration: animationDuration,\n        iterations: 1,\n        fill: 'forwards',\n        easing: CSSeasing,\n      }\n    );\n  }\n}\nexport class ViewTransitionOld extends ViewTransitionImage {\n  setup(name: string, captureElement: CaptureElement) {\n    this.image = captureElement.old.image;\n    this.element = captureElement.oldElement;\n    return super.setup(name, captureElement);\n  }\n  getAnimateImageFunctions() {\n    // Simulate the replaced content sizing of ::view-transition-old and ::view-transition-new\n    // Since view-transition-old and view-transition-new are not images in the polyfill,\n    // their size will fit the change in size of the animation by animating transform: scale() on them\n\n    // The value for transform will be determined using the value of object-fit\n    const style = getComputedStyle(this);\n    const objectFit = style.objectFit;\n\n    const [scaleFactorX, scaleFactorY, scaleFunction] =\n      this.getScaleFactor(objectFit);\n\n    const objectPosition = style.objectPosition;\n    const objectPositionValues = this.getObjectPositionValues(\n      objectPosition,\n      scaleFactorX,\n      scaleFactorY\n    );\n    const oldObjectPositionTranslate: CSSTranslateFunction = `translate(${objectPositionValues.old.left}, ${objectPositionValues.old.top})`;\n    const newObjectPositionTranslate: CSSTranslateFunction = `translate(${objectPositionValues.new.left}, ${objectPositionValues.new.top})`;\n\n    return [\n      oldObjectPositionTranslate,\n      newObjectPositionTranslate,\n      scaleFunction,\n    ];\n  }\n  getScaleFactor(objectFit: string): [number, number, string] {\n    const fromWidth = this.captureElement.old.width;\n    const fromHeight = this.captureElement.old.height;\n    const toWidth = this.captureElement.new.width;\n    const toHeight = this.captureElement.new.height;\n    return super.getScaleFactor(\n      objectFit,\n      fromWidth,\n      toWidth,\n      fromHeight,\n      toHeight\n    );\n  }\n  getObjectPositionValues(\n    objectPosition: string,\n    scaleFactorX: number,\n    scaleFactorY: number\n  ): {\n    old: { top: string; left: string };\n    new: { top: string; left: string };\n  } {\n    const oldWidth = this.innerElement.offsetWidth;\n    const oldHeight = this.innerElement.offsetHeight;\n    const newWidth = Math.floor(oldWidth * scaleFactorX);\n    const newHeight = Math.floor(oldHeight * scaleFactorY);\n    return super.getObjectPositionValues(\n      objectPosition,\n      oldWidth,\n      newWidth,\n      oldHeight,\n      newHeight\n    );\n  }\n  animateImage(animationDuration: number, CSSeasing: string) {\n    const [\n      oldObjectPositionTranslate,\n      newObjectPositionTranslate,\n      scaleFunction,\n    ] = this.getAnimateImageFunctions();\n    return super.animateImage(\n      animationDuration,\n      CSSeasing,\n      oldObjectPositionTranslate,\n      `${newObjectPositionTranslate} ${scaleFunction}`\n    );\n  }\n}\nexport class ViewTransitionNew extends ViewTransitionImage {\n  setup(name: string, captureElement: CaptureElement) {\n    this.image = captureElement.new.image;\n    this.element = captureElement.newElement;\n    super.setup(name, captureElement);\n  }\n  getAnimateImageFunctions() {\n    // Simulate the replaced content sizing of ::view-transition-old and ::view-transition-new\n    // Since view-transition-old and view-transition-new are not images in the polyfill,\n    // their size will fit the change in size of the animation by animating transform: scale() on them\n\n    // The value for transform will be determined using the value of object-fit\n    const style = getComputedStyle(this);\n    const objectFit = style.objectFit;\n\n    const [scaleFactorX, scaleFactorY, scaleFunction] =\n      this.getScaleFactor(objectFit);\n\n    const objectPosition = style.objectPosition;\n    const objectPositionValues = this.getObjectPositionValues(\n      objectPosition,\n      scaleFactorX,\n      scaleFactorY\n    );\n    const oldObjectPositionTranslate: CSSTranslateFunction = `translate(${objectPositionValues.old.left}, ${objectPositionValues.old.top})`;\n    const newObjectPositionTranslate: CSSTranslateFunction = `translate(${objectPositionValues.new.left}, ${objectPositionValues.new.top})`;\n\n    return [\n      oldObjectPositionTranslate,\n      newObjectPositionTranslate,\n      scaleFunction,\n    ];\n  }\n  getScaleFactor(objectFit: string): [number, number, string] {\n    const fromWidth = this.captureElement.new.width;\n    const fromHeight = this.captureElement.new.height;\n    const toWidth = this.captureElement.old.width;\n    const toHeight = this.captureElement.old.height;\n    return super.getScaleFactor(\n      objectFit,\n      fromWidth,\n      toWidth,\n      fromHeight,\n      toHeight\n    );\n  }\n  getObjectPositionValues(\n    objectPosition: string,\n    scaleFactorX: number,\n    scaleFactorY: number\n  ): {\n    old: { top: string; left: string };\n    new: { top: string; left: string };\n  } {\n    const newWidth = this.innerElement.offsetWidth;\n    const newHeight = this.innerElement.offsetHeight;\n    const oldWidth = Math.floor(newWidth * scaleFactorX);\n    const oldHeight = Math.floor(newHeight * scaleFactorY);\n    return super.getObjectPositionValues(\n      objectPosition,\n      oldWidth,\n      newWidth,\n      oldHeight,\n      newHeight\n    );\n  }\n  animateImage(animationDuration: number, CSSeasing: string) {\n    const [\n      oldObjectPositionTranslate,\n      newObjectPositionTranslate,\n      scaleFunction,\n    ] = this.getAnimateImageFunctions();\n    return super.animateImage(\n      animationDuration,\n      CSSeasing,\n      `${oldObjectPositionTranslate} ${scaleFunction}`,\n      newObjectPositionTranslate\n    );\n  }\n}\n\ncustomElements.define('view-transition-image-pair', ViewTransitionImagePair);\ncustomElements.define('view-transition-old', ViewTransitionOld);\ncustomElements.define('view-transition-new', ViewTransitionNew);\n","import {\n  ViewTransitionImagePair,\n  ViewTransitionOld,\n  ViewTransitionNew,\n} from './view-transition-image-elements';\nimport CaptureElement from '../capture-element';\n\ntype GroupStyleRuleValues = {\n  width: string;\n  height: string;\n  transform: string;\n  writingMode: string;\n  direction: string;\n  textOrientation: string;\n  mixBlendMode: string;\n  backdropFilter: string;\n  colorScheme: string;\n};\n\nexport default class ViewTransitionGroup extends HTMLElement {\n  constructor() {\n    super();\n  }\n  transitionName = '';\n  captureElement = new CaptureElement();\n  imagePair = new ViewTransitionImagePair();\n  oldImage: ViewTransitionOld | undefined;\n  newImage: ViewTransitionNew | undefined;\n  groupStyle = document.createElement('style');\n  setupForOldImage(name: string, captureElement: CaptureElement) {\n    this.transitionName = name;\n    this.setAttribute('name', name);\n    this.captureElement = captureElement;\n\n    this.imagePair = new ViewTransitionImagePair();\n    this.oldImage = this.imagePair.setupForOldImage(name, captureElement);\n    if (this.oldImage) this.forceDisplay(this.oldImage, true);\n\n    // Set initial positioning values for the group\n    // This prevents a flash of unpositioned groups before the update callback\n    const initialValues: GroupStyleRuleValues = this.getStyleValues('old');\n    this.mapStyleValuesForAttribute(initialValues);\n    this.appendChild(this.imagePair);\n    this.appendChild(this.groupStyle);\n  }\n  forceDisplay(image: ViewTransitionOld | ViewTransitionNew, toggle: boolean) {\n    // Force an element's CSS display value to block (therefore not none)\n    // This is useful for the old image: because ViewTransitionManager\n    //  yields to the browser's event loop before showing the new images\n    //  of captured elements, we need to avoid a flash of missing elements.\n    // This could happen if the website's authour has set display: none\n    //  on a class of ::view-transition-old expecting the new image to already\n    //  be there, even though the polyfill cannot place it in the DOM yet.\n    image.style.display = toggle ? 'block' : '';\n  }\n  setupForNewImage(name: string, captureElement: CaptureElement) {\n    this.transitionName = name;\n    this.setAttribute('name', name);\n    this.captureElement = captureElement;\n\n    this.imagePair = new ViewTransitionImagePair();\n    this.newImage = this.imagePair.setupForNewImage(name, captureElement);\n\n    // Set initial positioning values for the group\n    // This prevents a flash of unpositioned groups before the update callback\n    const initialValues: GroupStyleRuleValues = this.getStyleValues('new');\n    this.mapStyleValuesForAttribute(initialValues);\n    this.appendChild(this.imagePair);\n    this.appendChild(this.groupStyle);\n  }\n  addNewImage() {\n    this.newImage = this.imagePair.addNewImage();\n  }\n  setup() {\n    // Move the values previously initialized in the style attribute to a <style> element\n    // This enables changing the specificity to match that expected from a user agent style\n    if (!this.newImage) {\n      const values: GroupStyleRuleValues = this.getStyleValues('old');\n      this.captureElement.groupStylesRule = `\n      :where(view-transition-group[name=\"${this.transitionName}\"]) {\n        width: ${values.width};\n        height: ${values.height};\n        transform: ${values.transform};\n        writing-mode: ${values.writingMode};\n        direction: ${values.direction};\n        text-orientation: ${values.textOrientation};\n        mix-blend-mode: ${values.mixBlendMode};\n        backdrop-filter: ${values.backdropFilter};\n        color-scheme: ${values.colorScheme};\n      }\n      `;\n      this.appendToStyle(this.captureElement.groupStylesRule);\n      this.setAttribute('style', '');\n      this.appendToStyle(\n        `:where(view-transition-old[name=\"${this.transitionName}\"]) {\n          animation-name: -ua-view-transition-fade-out;\n        }`\n      );\n      return;\n    }\n\n    const values: GroupStyleRuleValues = this.getStyleValues('new');\n    this.captureElement.groupStylesRule = `\n      :where(view-transition-group[name=\"${this.transitionName}\"]) {\n        width: ${values.width};\n        height: ${values.height};\n        transform: ${values.transform};\n        writing-mode: ${values.writingMode};\n        direction: ${values.direction};\n        text-orientation: ${values.textOrientation};\n        mix-blend-mode: ${values.mixBlendMode};\n        backdrop-filter: ${values.backdropFilter};\n        color-scheme: ${values.colorScheme};\n      }\n      `;\n    this.appendToStyle(this.captureElement.groupStylesRule);\n    this.setAttribute('style', '');\n\n    if (!this.oldImage) {\n      this.appendToStyle(\n        `:where(view-transition-new[name=\"${this.transitionName}\"]) {\n          animation-name: -ua-view-transition-fade-in;\n        }`\n      );\n      return;\n    }\n\n    // Reset forced display mode\n    this.forceDisplay(this.oldImage, false);\n\n    this.captureElement.groupKeyframes = `\n        @keyframes -ua-view-transition-group-anim-${this.transitionName} {\n          from {\n            transform: ${this.captureElement.old.transform};\n            width: ${this.captureElement.old.width}px;\n            height: ${this.captureElement.old.height}px;\n            backdrop-filter: ${this.captureElement.old.backdropFilter};\n          }\n        }\n      `;\n    this.appendToStyle(this.captureElement.groupKeyframes);\n    this.captureElement.groupAnimationNameRule = `\n        :where(view-transition-group[name=\"${this.transitionName}\"]) {\n          animation-name: -ua-view-transition-group-anim-${this.transitionName};\n        }\n      `;\n    this.appendToStyle(this.captureElement.groupAnimationNameRule);\n    this.captureElement.imagePairIsolationRule = `\n        :where(view-transition-image-pair[name=\"${this.transitionName}\"]) {\n          isolation: isolate;\n        }\n      `;\n    this.appendToStyle(this.captureElement.imagePairIsolationRule);\n    this.captureElement.imageAnimationNameRule = `\n        :where(view-transition-old[name=\"${this.transitionName}\"]) {\n          animation-name: -ua-view-transition-fade-out, -ua-mix-blend-mode-plus-lighter;\n        }\n        :where(view-transition-new[name=\"${this.transitionName}\"]) {\n          animation-name: -ua-view-transition-fade-in, -ua-mix-blend-mode-plus-lighter;\n        }\n      `;\n    this.appendToStyle(this.captureElement.imageAnimationNameRule);\n  }\n  appendToStyle(string: string) {\n    const text = this.groupStyle.textContent || '';\n    this.groupStyle.textContent = text.concat(string);\n  }\n  getStyleValues(stage: 'old' | 'new' = 'old'): GroupStyleRuleValues {\n    if (stage === 'old') {\n      const values: GroupStyleRuleValues = {\n        width: this.captureElement.old.width.toString().concat('px'),\n        height: this.captureElement.old.height.toString().concat('px'),\n        transform: this.captureElement.old.transform,\n        writingMode: this.captureElement.old.writingMode,\n        direction: this.captureElement.old.direction,\n        textOrientation: this.captureElement.old.textOrientation,\n        mixBlendMode: this.captureElement.old.mixBlendMode,\n        backdropFilter: this.captureElement.old.mixBlendMode,\n        colorScheme: this.captureElement.old.colorScheme,\n      };\n      return values;\n    } else {\n      const values: GroupStyleRuleValues = {\n        width: this.captureElement.new.width.toString().concat('px'),\n        height: this.captureElement.new.height.toString().concat('px'),\n        transform: this.captureElement.new.transform,\n        writingMode: this.captureElement.new.writingMode,\n        direction: this.captureElement.new.direction,\n        textOrientation: this.captureElement.new.textOrientation,\n        mixBlendMode: this.captureElement.new.mixBlendMode,\n        backdropFilter: this.captureElement.new.backdropFilter,\n        colorScheme: this.captureElement.new.colorScheme,\n      };\n      return values;\n    }\n  }\n  mapStyleValuesForAttribute(values: GroupStyleRuleValues) {\n    enum caseConverter {\n      width = 'width',\n      height = 'height',\n      transform = 'transform',\n      writingMode = 'writing-mode',\n      direction = 'direction',\n      textOrientation = 'text-orientation',\n      mixBlendMode = 'mix-blend-mode',\n      backdropFilter = 'backdrop-filter',\n      colorScheme = 'color-scheme',\n    }\n    for (const [property, value] of Object.entries(values)) {\n      const converted = caseConverter[property as keyof typeof caseConverter];\n      if (!converted) continue;\n      this.style.setProperty(converted, value);\n    }\n    return;\n  }\n  getSizingAnimationParemters(): [number, string] {\n    // This function returns the duration of the user agent animation that resizes the view-transition-group\n    // It is used to simulate the replaced content sizing effect in this.animateImages()\n    const style = getComputedStyle(this);\n    return [\n      this.getSizingAnimationDuration(style),\n      this.getSizingAnimationEasing(style),\n    ];\n  }\n  getSizingAnimationDuration(style: CSSStyleDeclaration) {\n    const animations = style.animationName.split(', ');\n    const animationDurations = style.animationDuration.split(', ');\n    const durationsMap = new Map(\n      animations.map((animationName) => {\n        return [\n          animationName,\n          animationDurations[animations.indexOf(animationName)],\n        ];\n      })\n    );\n    const rawDuration = durationsMap.get(\n      `-ua-view-transition-group-anim-${this.transitionName}`\n    );\n    const duration = parseFloat(rawDuration || '0') * 1000;\n    return duration;\n  }\n  getSizingAnimationEasing(style: CSSStyleDeclaration) {\n    const animations = style.animationName.split(', ');\n    const animationEasings = style.animationTimingFunction.split(', ');\n    const easingsMap = new Map(\n      animations.map((animationName) => {\n        return [\n          animationName,\n          animationEasings[animations.indexOf(animationName)],\n        ];\n      })\n    );\n    const easing = easingsMap.get(\n      `-ua-view-transition-group-anim-${this.transitionName}`\n    );\n    return easing || 'ease';\n  }\n  animateImages() {\n    const [duration, easing] = this.getSizingAnimationParemters();\n    if (this.oldImage) this.oldImage.animateImage(duration, easing);\n    if (this.newImage) this.newImage.animateImage(duration, easing);\n  }\n}\ncustomElements.define('view-transition-group', ViewTransitionGroup);\n","import ViewTransitionGroup from './elements/view-transition-group';\n\nclass ImageData {\n  image: Element | undefined;\n  width = 0;\n  height = 0;\n  styleTransform = 'initial';\n  transform = 'initial';\n  writingMode = 'initial';\n  direction = 'initial';\n  textOrientation = 'initial';\n  mixBlendMode = 'initial';\n  backdropFilter = 'initial';\n  colorScheme = 'initial';\n}\n\nexport default class CaptureElement {\n  // The initial structure of captureElement follows https://drafts.csswg.org/css-view-transitions/#captured-element\n  old = new ImageData();\n  groupKeyframes = '';\n  groupAnimationNameRule = '';\n  groupStylesRule = '';\n  imagePairIsolationRule = '';\n  imageAnimationNameRule = '';\n\n  oldElement: Element | undefined;\n  newElement: Element | undefined;\n  name = '';\n  group: ViewTransitionGroup | undefined;\n\n  new = new ImageData();\n}\n","export class ViewTransitionElement extends HTMLElement {\n  constructor() {\n    super();\n    this.setAttribute('aria-hidden', 'true');\n    this.setAttribute('inert', '');\n  }\n}\ncustomElements.define('view-transition', ViewTransitionElement);\n","import { parseStyles } from './style-parsing/style-sheet-parser';\nimport CaptureElement from './capture-element';\nimport {\n  cloneElementWithStyles,\n  getElementPosition,\n  isStylableElement,\n  CSSTransformPropertyToFunction,\n  ViewTransition,\n  shouldNormalizeFontSize,\n} from './polyfill-utils';\nimport ViewTransitionGroup from './elements/view-transition-group';\nimport type { StylableElement } from './polyfill-utils';\nimport type { Callback } from './polyfill-utils';\nimport { ViewTransitionElement } from './elements/view-transition-element';\nimport {\n  setElementVisibility,\n  setDocumentVisibility,\n  afterNextPaint,\n} from './polyfill-utils';\n\ndeclare global {\n  interface CSSStyleDeclaration {\n    viewTransitionName: string;\n  }\n}\nclass DuplicateNamesError extends Error {\n  elements: [Element, Element];\n  constructor(message: string | undefined, elements: [Element, Element]) {\n    super(message);\n    this.elements = elements;\n  }\n}\n\ntype NamedElementsMap = Map<string, CaptureElement>;\ntype viewTransitionElementsMap = Map<string, HTMLElement>;\ntype ViewTransitionPhase =\n  | 'pending-capture'\n  | 'update-callback-called'\n  | 'animating'\n  | 'done';\n\nexport default class ViewTransitionManager {\n  static isViewTransitionActive() {\n    return document.querySelector('view-transition') ? true : false;\n  }\n\n  // Adapted from https://drafts.csswg.org/css-view-transitions/#ua-styles\n  // :where() removes specificity, simulating a user agent style sheet\n  static UAStylesheetText = `* {\n      --vt-polyfill-name: initial;\n    }\n    \n    :where(:root) {\n      --vt-polyfill-name: root;\n    }\n    \n    :where(view-transition) {\n      position: fixed;\n      inset: 0;\n      z-index: 100000;\n  \n      pointer-events: none;\n    }\n    \n    :where(view-transition-group) {\n      position: absolute;\n      top: 0;\n      left: 0;\n    \n      animation-duration: 0.25s;\n      animation-fill-mode: both;\n    }\n    \n    :where(view-transition-image-pair) {\n      position: absolute;\n      inset: 0;\n    \n      isolation: isolate;\n    \n      animation-duration: inherit;\n      animation-fill-mode: inherit;\n    }\n    \n    :where(view-transition-old,\n    view-transition-new) {\n      position: absolute;\n      inset-block-start: 0;\n      inline-size: 100%;\n      block-size: auto;\n    \n      mix-blend-mode: plus-lighter;\n    \n      animation-duration: inherit;\n      animation-fill-mode: inherit;\n    }\n  \n    @keyframes -ua-view-transition-fade-out {\n      to { opacity: 0; }\n    }\n    @keyframes -ua-view-transition-fade-in {\n      from { opacity: 0; }\n    }\n    @keyframes -ua-mix-blend-mode-plus-lighter {\n      from { mix-blend-mode: plus-lighter }\n      to { mix-blend-mode: plus-lighter }\n    }\n    `;\n\n  phase: ViewTransitionPhase = 'pending-capture';\n  transitionPromises: ViewTransition = new ViewTransition(this);\n  viewTransitionElement = new ViewTransitionElement();\n  parsedStyleElement = document.createElement('style');\n  namedElements: NamedElementsMap = new Map();\n  oldElements: viewTransitionElementsMap = new Map();\n  newElements: viewTransitionElementsMap = new Map();\n  callback: Callback | undefined = () => undefined;\n  animationPromises: Promise<Animation>[] = [];\n\n  // Needed for Chrome 114.0.5735.196\n  // (see shouldNormalizeFontSize())\n  fontSizeFactor: number | undefined = undefined;\n\n  // Store focus to be restored from inert\n  activeElement: HTMLElement | undefined;\n\n  constructor() {}\n  async startViewTransition(\n    viewTransitionObject: ViewTransition,\n    callback?: Callback\n  ) {\n    this.phase = 'pending-capture';\n    this.transitionPromises = viewTransitionObject;\n    if (callback) this.callback = callback;\n    if (ViewTransitionManager.isViewTransitionActive()) {\n      this.skipTransition(\n        'Tried to initiate a View Transition from the polyfill, but one was already active.'\n      );\n      return;\n    }\n    this.viewTransitionElement = new ViewTransitionElement();\n    document.documentElement.appendChild(this.viewTransitionElement);\n\n    try {\n      const parsedStyleString = await parseStyles();\n      this.parsedStyleElement = document.createElement('style');\n      this.parsedStyleElement.textContent = parsedStyleString;\n    } catch (error) {\n      const reason =\n        error instanceof Error\n          ? `View Transitions API polyfill: could not parse stylesheets: ${error.name} ${error.message}`\n          : error;\n      this.skipTransition(reason);\n      throw reason;\n    }\n\n    this.addUAStylesheet();\n    this.viewTransitionElement.appendChild(this.parsedStyleElement);\n    this.fontSizeFactor = shouldNormalizeFontSize();\n\n    this.namedElements = new Map();\n    try {\n      this.oldElements = this.getNamedTransitionElements();\n    } catch (e) {\n      if (e instanceof DuplicateNamesError) {\n        return;\n      }\n    }\n    this.captureElements('old');\n    this.initialSetupGroups();\n\n    this.activeElement =\n      document.activeElement instanceof HTMLElement\n        ? document.activeElement\n        : undefined;\n    document.body.setAttribute('inert', '');\n\n    try {\n      if (callback) await callback();\n      this.transitionPromises.updateCallbackDone.resolve();\n      this.phase = 'update-callback-called';\n    } catch (error) {\n      this.transitionPromises.updateCallbackDone.reject(error);\n      this.skipTransition(error);\n      return;\n    }\n\n    this.parsedStyleElement?.remove();\n    try {\n      const parsedStyleString = await parseStyles();\n      this.parsedStyleElement = document.createElement('style');\n      this.parsedStyleElement.textContent = parsedStyleString;\n      this.viewTransitionElement.appendChild(this.parsedStyleElement);\n    } catch (error) {\n      const reason =\n        error instanceof Error\n          ? `View Transitions API polyfill: could not parse stylesheets: ${error.name} ${error.message}`\n          : error;\n      this.skipTransition(reason);\n      throw reason;\n    }\n\n    try {\n      this.newElements = this.getNamedTransitionElements();\n    } catch (e) {\n      if (e instanceof DuplicateNamesError) {\n        return;\n      }\n    }\n    this.captureElements('new');\n\n    // Yield control of the event loop to the browser\n    await afterNextPaint();\n    this.setupGroups();\n    this.newElements.forEach((element) => setElementVisibility(element, false));\n    this.transitionPromises.ready.resolve();\n    this.phase = 'animating';\n\n    // Clear the view transition once every animation is over\n    // https://drafts.csswg.org/css-view-transitions/#handle-transition-frame-algorithm\n    const animations = this.viewTransitionElement.getAnimations({\n      subtree: true,\n    });\n    const finishedPromises = animations.map((animation) => animation.finished);\n    this.animationPromises.push(...finishedPromises);\n    this.animationsFinished();\n  }\n  skipTransition(reason?: unknown) {\n    if (this.phase === 'pending-capture') {\n      // Call the update callback if it has not been called yet\n      queueMicrotask(async () => {\n        if (this.callback) await this.callback();\n        this.transitionPromises.updateCallbackDone.resolve();\n      });\n    }\n    setDocumentVisibility(true);\n    document.body.removeAttribute('inert');\n    this.phase = 'done';\n    this.transitionPromises.ready.reject(reason);\n    this.transitionPromises.finished.resolve();\n\n    // Account for multiple view transition elements\n    // in case the polyfill has erroneously added more than one\n    const viewTransitionElements = document.querySelectorAll('view-transition');\n    viewTransitionElements.forEach((element) => element.remove());\n  }\n  captureElements(stage: 'old' | 'new') {\n    // For each old or new element captured, add its data to a new CapturedElement struct\n    // https://drafts.csswg.org/css-view-transitions/#capture-old-state-algorithm\n    const map = stage === 'old' ? this.oldElements : this.newElements;\n    for (const [viewTransitionName, element] of map) {\n      let captureElement = this.namedElements.get(viewTransitionName);\n      if (!captureElement) {\n        captureElement = new CaptureElement();\n        this.namedElements.set(viewTransitionName, captureElement);\n      }\n      const style = getComputedStyle(element);\n      captureElement.name = viewTransitionName;\n      if (stage === 'old') {\n        captureElement.oldElement = element;\n      } else {\n        captureElement.newElement = element;\n      }\n\n      try {\n        const live = stage === 'new';\n        captureElement[stage].image = cloneElementWithStyles(\n          element,\n          live,\n          this.fontSizeFactor // Needed for Chrome 114.0.5735.196\n        );\n      } catch (error) {\n        const reason =\n          error instanceof Error\n            ? `Could not clone element ${element}: ${error.message}`\n            : error;\n        this.skipTransition(reason);\n        return;\n      }\n      captureElement[stage].width = element.offsetWidth;\n      captureElement[stage].height = element.offsetHeight;\n\n      captureElement[stage].styleTransform = style.transform;\n      // Within the scope of this function, if the style transform is none,\n      // replace it with an empty string to concat\n      const styleTransform =\n        captureElement[stage].styleTransform === 'none'\n          ? ''\n          : captureElement[stage].styleTransform;\n\n      try {\n        // Get the element's position and put it in the form of a translate()\n        const elementPosition = getElementPosition(element);\n        const elementPositionTranslateFunction = `translate(${elementPosition.left}px, ${elementPosition.top}px)`;\n        // Combine the translate() for the element's position with any transforms the element had\n        // This follows a specific order according to how CSS transforms are applied:\n        //  first the element position, then the standalone transforms, then the previous value of the transform property\n        if (style.translate) {\n          // Convert the standalone CSS transform properties to CSS functions\n          const standaloneTranslate = CSSTransformPropertyToFunction(\n            'translate',\n            style.translate\n          );\n          const standaloneRotate = CSSTransformPropertyToFunction(\n            'rotate',\n            style.rotate\n          );\n          const standaloneScale = CSSTransformPropertyToFunction(\n            'scale',\n            style.scale\n          );\n          const standaloneTransforms = [\n            standaloneTranslate,\n            standaloneRotate,\n            standaloneScale,\n          ].join(' ');\n          captureElement[stage].transform =\n            `${elementPositionTranslateFunction} ${standaloneTransforms} ${styleTransform}`.trim();\n        } else {\n          captureElement[stage].transform =\n            `${elementPositionTranslateFunction} ${styleTransform}`.trim();\n        }\n      } catch (error) {\n        const reason =\n          error instanceof Error\n            ? `Could not get position of element ${element}: ${error.message}`\n            : error;\n        this.skipTransition(reason);\n        return;\n      }\n\n      captureElement[stage].writingMode = style.writingMode;\n      captureElement[stage].direction = style.direction;\n      captureElement[stage].textOrientation = style.textOrientation;\n      captureElement[stage].mixBlendMode = style.mixBlendMode;\n      captureElement[stage].backdropFilter = style.backdropFilter;\n      captureElement[stage].colorScheme = style.colorScheme;\n      if (stage === 'old')\n        this.namedElements.set(viewTransitionName, captureElement);\n    }\n  }\n  addUAStylesheet() {\n    // Append a <style> element with the default styles normally in the UA stylesheet for browsers that support the API\n    const UAStyleEl = document.createElement('style');\n    UAStyleEl.setAttribute('data-vt-polyfill-style', '');\n    UAStyleEl.textContent = ViewTransitionManager.UAStylesheetText;\n    this.viewTransitionElement.appendChild(UAStyleEl);\n  }\n  getNamedTransitionElements() {\n    // This function parses the DOM for elements with a view transition name\n\n    const usedTransitionNames: string[] = [];\n    // capturedElements maps view transition names to the elements that have them\n    const capturedElements = new Map();\n    const loopforNamedElements = (element: StylableElement): void => {\n      // Recursive function: analyze the given element and call the function again individually for each of its children\n\n      if (element === document.head) return;\n\n      const style = getComputedStyle(element);\n\n      let isRendered = true;\n      if (element.checkVisibility) {\n        isRendered = element.checkVisibility();\n      } else {\n        // Element.checkVisibility is not supported until\n        //  some fairly recent browser versions\n        isRendered = style.getPropertyValue('display') !== 'none';\n      }\n      if (!isRendered) return;\n      const viewTransitionName =\n        element.style.viewTransitionName ||\n        // Note the .trim(): newer browsers already do it, older browsers don't\n        style.getPropertyValue('--vt-polyfill-name').trim();\n\n      const loopOverChildren = (element: StylableElement) =>\n        element.querySelectorAll(':scope > *').forEach((child) => {\n          if (!isStylableElement(child)) return;\n          loopforNamedElements(child);\n        });\n\n      if (viewTransitionName === 'none') {\n        return loopOverChildren(element);\n      }\n\n      if (usedTransitionNames.includes(viewTransitionName)) {\n        const duplicateNamesError = new DuplicateNamesError(\n          'View Transitions API Polyfill: two elements with the same view transition name have been found',\n          [capturedElements.get(viewTransitionName), element]\n        );\n        throw duplicateNamesError;\n      }\n\n      if (viewTransitionName !== '') {\n        usedTransitionNames.push(viewTransitionName);\n        capturedElements.set(viewTransitionName, element);\n        if (element === document.documentElement || element === document.body) {\n          // If <html> (or <body>) has a view transition name (which is the default case, but can be overridden),\n          //  a white background (specified in the polyfill's user agent stylesheet) is applied to <view-transition>.\n          this.viewTransitionElement.classList.add('has-root-group');\n        }\n      }\n      return loopOverChildren(element);\n    };\n    try {\n      loopforNamedElements(document.documentElement);\n    } catch (e) {\n      if (e instanceof DuplicateNamesError) {\n        this.skipTransition(e);\n        throw e;\n      }\n    }\n    return capturedElements;\n  }\n  initialSetupGroups() {\n    // Append partially completed groups with old images to DOM to simulate rendering freeze for callback\n    for (const [key, value] of this.namedElements) {\n      const captureElement = value;\n      const viewTransitionName = key;\n\n      const viewTransitionGroup = new ViewTransitionGroup();\n      captureElement.group = viewTransitionGroup;\n      viewTransitionGroup.setupForOldImage(viewTransitionName, captureElement);\n      this.viewTransitionElement.appendChild(viewTransitionGroup);\n    }\n  }\n  setupGroups() {\n    for (const entry of this.namedElements) {\n      const viewTransitionName = entry[0];\n      const captureElement = entry[1];\n\n      let viewTransitionGroup = captureElement.group;\n      if (!viewTransitionGroup) {\n        viewTransitionGroup = new ViewTransitionGroup();\n        captureElement.group = viewTransitionGroup;\n        viewTransitionGroup.setupForNewImage(\n          viewTransitionName,\n          captureElement\n        );\n        this.viewTransitionElement.appendChild(viewTransitionGroup);\n      } else {\n        viewTransitionGroup.addNewImage();\n      }\n      viewTransitionGroup.setup();\n      viewTransitionGroup.animateImages();\n    }\n  }\n  updateAnimations(newAnimation: Animation) {\n    // Add animations from document.documentElement.animate()\n    //  to the finished promises to be awaited for the end of the transition.\n    this.animationPromises.push(newAnimation.finished);\n  }\n  animationsFinished() {\n    Promise.allSettled(this.animationPromises).then((resolvedPromises) => {\n      // The array of resolvedPromises was initially made to include\n      //  the animations generated by the polyfill itself, not including\n      //  any animations added by document.documentElement.animate()\n      //  to this.animationPromises.\n      if (resolvedPromises.length === this.animationPromises.length) {\n        this.animationPromises = [];\n        this.phase = 'done';\n        this.transitionPromises.finished.resolve();\n        setDocumentVisibility(true);\n        document.body.removeAttribute('inert');\n        if (this.activeElement && document.body.contains(this.activeElement)) {\n          this.activeElement.focus();\n        }\n        this.viewTransitionElement.remove();\n      } else {\n        this.animationsFinished();\n      }\n    });\n  }\n}\n","import { MediaClone } from './elements/media-clone';\nimport ViewTransitionManager from './view-transition-manager';\n\ntype PromiseResolve = (value?: PromiseLike<undefined> | undefined) => void;\ntype PromiseReject = (reason?: unknown) => void;\n\nexport type DeferredPromise = Promise<undefined> & {\n  resolve: PromiseResolve;\n  reject: PromiseReject;\n};\n\nexport function defer() {\n  let resolve!: PromiseResolve;\n  let reject!: PromiseReject;\n\n  const promise = new Promise((res, rej) => {\n    resolve = res;\n    reject = rej;\n  }) as DeferredPromise;\n  promise.resolve = resolve;\n  promise.reject = reject;\n\n  return promise;\n}\n\nexport type Callback = () => unknown;\n\nexport class ViewTransition {\n  private viewTransitionElement: ViewTransitionManager;\n  finished: DeferredPromise;\n  ready: DeferredPromise;\n  updateCallbackDone: DeferredPromise;\n  constructor(viewTransitionElement: ViewTransitionManager) {\n    // Deferred promises are resolved remotely as needed by the ViewTransitionElement governing the transition\n    this.finished = defer();\n    this.ready = defer();\n    this.updateCallbackDone = defer();\n    this.viewTransitionElement = viewTransitionElement;\n  }\n  skipTransition() {\n    this.viewTransitionElement.skipTransition(\n      new DOMException('Transition skipped')\n    );\n  }\n}\n\nexport const afterNextPaint = (): Promise<void> =>\n  new Promise<void>((resolve) => {\n    requestAnimationFrame(() => {\n      setTimeout(resolve, 0);\n    });\n  });\n\nconst isElementUnallowed = (el: Element) => {\n  const unallowedTagNames = [\n    'head',\n    'script',\n    'style',\n    'view-transition',\n    'view-transition-group',\n    'view-transition-image-pair',\n    'view-transition-old',\n    'view-transition-new',\n  ];\n  return unallowedTagNames.includes(el.tagName.toLowerCase());\n};\n\nconst isVoidElement = (el: Element) => {\n  const voidElements = [\n    'area',\n    'base',\n    'br',\n    'col',\n    'embed',\n    'hr',\n    'img',\n    'input',\n    'link',\n    'meta',\n    'param',\n    'source',\n    'track',\n    'wbr',\n  ];\n  return voidElements.includes(el.tagName.toLowerCase());\n};\n\nconst isElementOutsideViewport = (el: Element) => {\n  const rect = el.getBoundingClientRect();\n\n  return (\n    rect.top > window.innerHeight + document.documentElement.scrollTop ||\n    rect.left > window.innerWidth + document.documentElement.scrollLeft\n  );\n};\n\n// Always clone these link properties, as their real values\n// could be hidden by the :visited pseudo-class.\n// https://developer.mozilla.org/en-US/docs/Web/CSS/:visited#privacy_restrictions\nconst linkProperties = [\n  'color',\n  'background-color',\n  'border-color',\n  'border-bottom-color',\n  'border-left-color',\n  'border-right-color',\n  'border-top-color',\n  'column-rule-color',\n  'outline-color',\n  'text-decoration-color',\n  'text-emphasis-color',\n  'text-decoration-line',\n];\n\n// Always clone the values of these layout-related CSS properties.\n// Using longhands because shorthands are not included in CSSStyleDeclaration.\nconst alwaysCloneProperties = [\n  'width',\n  'height',\n  'inline-size',\n  'block-size',\n  'padding-top',\n  'padding-bottom',\n  'padding-left',\n  'padding-right',\n  'border-top-width',\n  'border-bottom-width',\n  'border-left-width',\n  'border-right-width',\n  'margin-top',\n  'margin-bottom',\n  'margin-left',\n  'margin-right',\n  'box-sizing',\n  'display',\n];\n// Never clone the values of these layout-related CSS properties.\n// Their values would hinder animations on ViewTransitionImage.\nconst neverCloneProperties = [\n  'max-width',\n  'max-height',\n  'max-inline-size',\n  'max-block-size',\n  'min-width',\n  'min-height',\n  'min-inline-size',\n  'min-block-size',\n];\n\nconst spacerProperties = [\n  'position',\n  'margin-top',\n  'margin-bottom',\n  'margin-right',\n  'margin-left',\n  'position',\n  'top',\n  'bottom',\n  'right',\n  'left',\n];\n\nconst cloneAsSpacer = (el: Element) => {\n  const clone = document.createElement('div');\n  clone.dataset.vtSpacer = '';\n\n  const rect = el.getBoundingClientRect();\n  clone.style.width = `${rect.width}px`;\n  clone.style.height = `${rect.height}px`;\n\n  const style = getComputedStyle(el);\n  for (const prop of spacerProperties) {\n    clone.style.setProperty(prop, style.getPropertyValue(prop));\n  }\n  return clone;\n};\n\n// The Element interface does not implement the style property (needed for cloning),\n//  but all of its subclasses do.\nexport type StylableElement = Element & { style: CSSStyleDeclaration };\nexport function isStylableElement(\n  element: unknown\n): element is StylableElement {\n  return (\n    element instanceof HTMLElement ||\n    element instanceof SVGElement ||\n    element instanceof MathMLElement\n  );\n}\n\nexport function shouldNormalizeFontSize(): number | undefined {\n  // Needed for Chrome 114.0.5735.196\n  // That browser has a bug where the font-size returned\n  //  by getComputedStyle() might be multiplied by a constant factor.\n  // If the polyfill doesn't correct for this bug, all cloned elements\n  //  with a non-default font-size will have the wrong font-size.\n  const fontSizeTester = document.createElement('div');\n  fontSizeTester.style.fontSize = '16px';\n  fontSizeTester.style.position = 'fixed';\n  fontSizeTester.style.display = 'none';\n  document.body.appendChild(fontSizeTester);\n  const fontSizeFactor =\n    parseFloat(getComputedStyle(fontSizeTester).fontSize) / 16;\n  fontSizeTester.remove();\n\n  return fontSizeFactor > 1.01 || fontSizeFactor < 0.99\n    ? fontSizeFactor\n    : undefined;\n}\n\nexport function cloneElementWithStyles(\n  element: StylableElement,\n  live = false,\n  normalizeFontSizeFactor: number | undefined = undefined // Needed for Chrome 114.0.5735.196\n): Element | undefined {\n  // This is a recursive function that clones an element while also applying its computed styles\n\n  // Create a defaultStyle object which contains the default\n  // CSS declarations from the user agent, in order to avoid\n  // duplicating these when cloning an element's style.\n  const div = document.createElement('div');\n  div.setAttribute('data-vt-default-style-div', '');\n  div.style.all = 'initial';\n  div.style.display = 'none';\n  document.body.appendChild(div);\n  const defaultStyle = getComputedStyle(div);\n\n  const cloneElement = (el: StylableElement) => {\n    // Check that the element is:\n    // + Not the <html> element (in such a case, go clone the <body> directly and skip <html>)\n    // + Not an element that would be redundant to clone\n    if (isElementUnallowed(el)) {\n      return;\n    }\n\n    // Create the clone\n    // Avoid duplicate <body> tags\n    // Clone <video> elements as <canvas>\n    let clone: StylableElement;\n    if (el instanceof HTMLBodyElement || el instanceof HTMLHtmlElement) {\n      clone = document.createElement('div');\n    } else if (el instanceof HTMLVideoElement) {\n      try {\n        const mediaClone = new MediaClone();\n        mediaClone.setup(el, live);\n        clone = mediaClone;\n      } catch {\n        // Canvas context 2D unsupported\n        return undefined;\n      }\n    } else {\n      clone = el.cloneNode() as StylableElement;\n    }\n\n    // Iterate over the properties of getComputedStyle() to make up the contents of a style attribute\n    const style = getComputedStyle(el);\n    const CSSProperties: Array<string> = [];\n    CSSProperties.push('all: initial;'); // Disable inheritance\n    if (style) {\n      for (const property of [...style]) {\n        if (neverCloneProperties.includes(property)) continue;\n\n        const value = style.getPropertyValue(property);\n\n        if (\n          value === defaultStyle.getPropertyValue(property) &&\n          !alwaysCloneProperties.includes(property)\n        ) {\n          continue;\n        }\n        if (property === '-webkit-text-fill-color') {\n          // There are cases of shadow DOMs which override the color property\n          //  but where the polyfill still applies the inherited color\n          //  because of -webkit-text-fill-color, which overrides it.\n          // As such, normalize it to the color property.\n          CSSProperties.push(`color: ${value};`);\n          continue;\n        } else if (normalizeFontSizeFactor && property === 'font-size') {\n          CSSProperties.push(\n            `font-size: ${parseFloat(value) / normalizeFontSizeFactor}px;`\n          );\n          continue;\n        }\n        CSSProperties.push(`${property}: ${value};`);\n      }\n    }\n\n    if (el instanceof HTMLAnchorElement) {\n      for (const property of linkProperties) {\n        clone.style.setProperty(property, style.getPropertyValue(property));\n      }\n    }\n\n    // Make up an ID for the clone to be referenced in <style> tags\n    const cloneID = 'VT' + Math.random().toString(36).slice(2);\n    clone.setAttribute('id', cloneID);\n\n    if (el instanceof HTMLHtmlElement) {\n      // If <html> has a view transition name (which is the default case, but can be overridden),\n      //  a white background (specified in the polyfill's user agent stylesheet) is applied to <view-transition>\n\n      // This ensures all content behind the transition is obscured, even before a view-transition group for <html> is added.\n      // As such, there won't be a flash of content visible through the transparent <view-transition>\n      //  if the transition is supposed to encompass the whole document.\n      const htmlStyle = document.createElement('style');\n      htmlStyle.textContent = `\n      :where(#${cloneID}) {background-color: Canvas}\n      #${cloneID} {zoom: initial !important;}\n      `;\n      // This also works around an unrelated issue on Chrome 114.0.5735.196\n      // That browser has a bug where the return value of\n      // getComputedStyle().zoom for <html> is the window.devicePixelRatio\n\n      clone.appendChild(htmlStyle);\n    }\n\n    if (cloningRoot) {\n      clone.style.margin = '0';\n    }\n\n    if (isVoidElement(clone)) {\n      clone.setAttribute('style', CSSProperties.join(''));\n    } else {\n      const styleElement = document.createElement('style');\n      styleElement.textContent = `#${cloneID} {${CSSProperties.join('')}}`;\n      clone.appendChild(styleElement);\n    }\n\n    clone.style.opacity = el.hasAttribute('data-vt-polyfill-opacity')\n      ? el.getAttribute('data-vt-polyfill-opacity') || '1'\n      : style\n        ? style.getPropertyValue('opacity')\n        : '1';\n    clone.removeAttribute('data-vt-polyfill-opacity');\n\n    if (cloningRoot) {\n      clone.style.position = 'relative';\n      clone.style.inset = '0';\n      clone.style.transform = 'none';\n      if (clone.style.translate !== undefined) {\n        // The browser supports standalone CSS transform properties\n        clone.style.translate = 'none';\n        clone.style.rotate = 'none';\n        clone.style.scale = 'none';\n      }\n    }\n\n    // Clone the ::before and ::after pseudo elements if they are present\n    // Their styles need to be placed withing a separate <style> tag, not the style attribute\n\n    const beforePseudoEl = getComputedStyle(el, '::before');\n    if (\n      beforePseudoEl.content !== 'none' &&\n      beforePseudoEl.content !== '-moz-alt-content'\n      // If a pseudo-element's content is none, it does not exist\n      // -moz-alt-content is returned for images in firefox\n      // For our purposes, -moz-alt-content is like none\n    ) {\n      const styleEl = document.createElement('style');\n      const CSSProperties: Array<string> = [];\n      for (const property of [...beforePseudoEl]) {\n        CSSProperties.push(\n          `${property}: ${beforePseudoEl.getPropertyValue(property)};`\n        );\n      }\n      styleEl.textContent = `#${cloneID}::before {${CSSProperties.join('')}}`;\n      clone.appendChild(styleEl);\n    }\n\n    const afterPseudoEl = getComputedStyle(el, '::after');\n    if (\n      afterPseudoEl.content !== 'none' &&\n      afterPseudoEl.content !== '-moz-alt-content'\n    ) {\n      const styleEl = document.createElement('style');\n      const CSSProperties: Array<string> = [];\n      for (const property of [...afterPseudoEl]) {\n        CSSProperties.push(\n          `${property}: ${afterPseudoEl.getPropertyValue(property)};`\n        );\n      }\n      styleEl.textContent = `#${cloneID}::after {${CSSProperties.join('')}}`;\n      clone.appendChild(styleEl);\n    }\n\n    // Clone scroll position\n\n    const scrollTop = el.scrollTop;\n\n    if (scrollTop !== 0) {\n      clone.setAttribute('data-vt-scroll-top', scrollTop.toString());\n    }\n\n    const scrollLeft = el.scrollLeft;\n\n    if (scrollLeft !== 0) {\n      clone.setAttribute('data-vt-scroll-left', scrollLeft.toString());\n    }\n\n    // Recursively call the clone function for the element's childNodes,\n    // then appending the resulting child clones to the parent clone\n    const elementChildren = el.childNodes;\n    for (const child of [...elementChildren]) {\n      if (child instanceof Element && !isElementUnallowed(child)) {\n        cloningRoot = false;\n        if (child.hasAttribute('data-vt-default-style-div')) continue;\n        // If a child has a view transition name, its contents will be skipped.\n        const childHasName =\n          getComputedStyle(child).getPropertyValue('--vt-polyfill-name');\n        if (isElementOutsideViewport(child) || childHasName) {\n          // If the element is outside the viewport's bounds,\n          // only clone it as an empty div to take up space,\n          // saving resources by not cloning its subtree.\n          const childClone = cloneAsSpacer(child);\n          clone.appendChild(childClone);\n          continue;\n        }\n        const childClone = cloneElement(child as StylableElement);\n        if (childClone) {\n          clone.appendChild(childClone);\n        }\n      } else if (child instanceof Text && child.textContent?.trim()) {\n        const childClone = child.cloneNode();\n        clone.append(childClone);\n      }\n    }\n\n    return clone;\n  };\n\n  let cloningRoot = true;\n  try {\n    const rootElement = cloneElement(element);\n    return rootElement;\n  } finally {\n    div.remove();\n  }\n}\n\ntype CSSTransformProperty = 'translate' | 'rotate' | 'scale';\nexport function CSSTransformPropertyToFunction(\n  transformProperty: CSSTransformProperty,\n  transformString: string\n): string {\n  // Convert a standalone CSS transform property (translate, rotate, scale)\n  //  to an equivalent CSS function for the transform property.\n  // This is mostly about converting space-separated lists of values to comma-separated ones.\n  if (transformString === 'none') return '';\n  const transformValues = transformString.split(' ').join(', ');\n  switch (transformProperty) {\n    case 'translate':\n      return `translate(${transformValues})`;\n    case 'rotate':\n      return `rotate(${transformValues})`;\n    case 'scale':\n      return `scale(${transformValues})`;\n  }\n  return '';\n}\n\nfunction getScrollOffset(element: HTMLElement): [number, number] {\n  // Function to get the total amount of pixels that an element's\n  //  layout position is offset on the screen due to the parents' scrolling\n  let scrollTop = 0;\n  let scrollLeft = 0;\n  const addOffset = (el: HTMLElement): void => {\n    if (el.scrollTop === 0 && el.scrollLeft === 0) {\n      if (!el.parentElement) return;\n      return addOffset(el.parentElement);\n    }\n    scrollTop += el.scrollTop;\n    scrollLeft += el.scrollLeft;\n  };\n  if (!element.parentElement) return [0, 0];\n  addOffset(element.parentElement);\n  return [scrollTop, scrollLeft];\n}\n\nexport function getElementPosition(element: HTMLElement): {\n  top: number;\n  left: number;\n} {\n  const offsetPosition = (el: HTMLElement) => {\n    // Recursive function to get an element's position in page layout without transforms\n    // offsetTop and offsetLeft are relative to the nearest ancestor with position =/= static\n    // Recursion is needed to loop through offsetParents and get an absolute position\n\n    const top = el.offsetTop;\n    const left = el.offsetLeft;\n\n    const offsetParent = el.offsetParent as HTMLElement;\n    let parentPosition = { top: 0, left: 0 };\n    if (offsetParent) {\n      // When the limit has been reached, offsetParent will be <html>\n      // When el.offsetParent is <html>, it actually returns null\n      parentPosition = offsetPosition(offsetParent);\n    }\n    const positionObject = {\n      top: top + parentPosition.top,\n      left: left + parentPosition.left,\n    };\n    return positionObject;\n  };\n  const [scrollTopOffset, scrollLeftOffset] = getScrollOffset(element);\n  const position = offsetPosition(element);\n  position.top -= scrollTopOffset;\n  position.left -= scrollLeftOffset;\n  return position;\n}\n\nexport function setElementVisibility(element: StylableElement, value: boolean) {\n  if (element instanceof HTMLHtmlElement) {\n    // Forward visibility of <html> to body to avoid hiding view-transition\n    setElementVisibility(document.body, value);\n    return;\n  }\n  if (value === false) {\n    // Hide elements\n    if (element.hasAttribute('data-vt-polyfill-opacity')) return;\n    const elementOpacity = element.style.opacity;\n    element.setAttribute('data-vt-polyfill-opacity', elementOpacity);\n    element.style.opacity = '0.001';\n  } else if (value === true) {\n    // Show elements\n    if (element.hasAttribute('data-vt-polyfill-opacity')) {\n      element.style.opacity =\n        element.getAttribute('data-vt-polyfill-opacity') ?? '';\n      element.removeAttribute('data-vt-polyfill-opacity');\n    }\n  }\n}\nexport function setDocumentVisibility(value: boolean) {\n  // Reset visibility of previously hidden elements with a view-transition-name\n  const elements = document.querySelectorAll('[data-vt-polyfill-opacity]');\n  for (const element of elements) {\n    setElementVisibility(element as StylableElement, value);\n  }\n}\n","import * as csstree from 'css-tree';\nimport {\n  isDeclaration,\n  isIdentifier,\n  isPseudoElementSelector,\n  isValue,\n} from './style-types';\nimport {\n  getElementSelector,\n  generateListItem,\n  VIEW_TRANSITION_ELEMENTS,\n  replaceDeclarations,\n} from './parsing-utils';\n\nexport function getSerializedElementSelector(\n  pseudoElementSelector: string\n): string {\n  const ast = csstree.parse(pseudoElementSelector, { context: 'selector' });\n  const pseudoAST = csstree.find(\n    ast,\n    (node) =>\n      isPseudoElementSelector(node) &&\n      VIEW_TRANSITION_ELEMENTS.includes(node.name)\n  ) as csstree.PseudoElementSelector | null;\n  if (!pseudoAST) {\n    throw new Error(\n      `View Transitions API polyfill: invalid pseudo-element selector given: ${pseudoElementSelector}`\n    );\n  }\n  const selectorAST = getElementSelector(pseudoAST);\n  return csstree.generate(selectorAST);\n}\n\nfunction isValidValue(valueAST: csstree.Value): boolean {\n  // Parse the value of view-transition-name (from the value itself), which must be one <custom-ident> in CSS\n  const plainObject = csstree.toPlainObject(valueAST) as csstree.ValuePlain;\n  const childrenArray = plainObject.children;\n  if (childrenArray.length !== 1) return false;\n  if (!isIdentifier(childrenArray[0])) return false;\n  return true;\n}\n\nfunction getNameValue(valueAST: csstree.Declaration): string {\n  // Parse the value of view-transition-name, which must be one <custom-ident> in CSS\n  const plainObject = csstree.toPlainObject(\n    valueAST\n  ) as csstree.DeclarationPlain;\n  const childrenArray = (plainObject.value as csstree.ValuePlain).children;\n  if (childrenArray.length !== 1) return '';\n  if (!isIdentifier(childrenArray[0])) return '';\n  return childrenArray[0].name;\n}\n\nexport function getFromStyleAttribute(styleAttribute: string): string {\n  // Given the style=\"\" HTML attribute of an element,\n  //  get the value of view-transition-name\n  const ast = csstree.parse(styleAttribute, {\n    context: 'declarationList',\n    parseCustomProperty: true,\n  });\n  // Replace view-transition-name declarations with --vt-polyfill-name\n  replaceDeclarations(ast);\n  const lastDeclaration = csstree.findLast(\n    ast,\n    (node) => isDeclaration(node) && node.property === '--vt-polyfill-name'\n  ) as csstree.Declaration | null;\n  if (!lastDeclaration) return '';\n  return getNameValue(lastDeclaration);\n}\n\nexport function setStyleAttribute(\n  styleAttribute: string,\n  value: string\n): string {\n  // Given the style=\"\" HTML attribute of an element,\n  //  get what style=\"\" should be if view-transition name is set\n  const ast = csstree.parse(styleAttribute, {\n    context: 'declarationList',\n    parseCustomProperty: true,\n  }) as csstree.DeclarationList;\n  // Normalize view-transition-name declarations to --vt-polyfill-name\n  replaceDeclarations(ast);\n\n  const declarations = csstree.findAll(\n    ast,\n    (node) => isDeclaration(node) && node.property === '--vt-polyfill-name'\n  ) as csstree.Declaration[];\n\n  if (value === '') {\n    // Remove any declarations\n    csstree.walk(ast, {\n      visit: 'Declaration',\n      enter(node, item, list) {\n        if (node.property === '--vt-polyfill-name') {\n          list.remove(item);\n        }\n      },\n    });\n\n    const serializedAttribute = csstree.generate(ast);\n    return serializedAttribute;\n  }\n\n  if (declarations.length >= 2) {\n    // Remove all declarations except for the last one\n    const lastDeclaration = declarations[declarations.length - 1];\n    csstree.walk(ast, {\n      visit: 'Declaration',\n      enter(node, item, list) {\n        if (\n          node.property === '--vt-polyfill-name' &&\n          node !== lastDeclaration\n        ) {\n          list.remove(item);\n        }\n      },\n    });\n  }\n\n  if (declarations.length === 1) {\n    const lastDeclaration = declarations[declarations.length - 1];\n    // Create new csstree.Value object\n    const valueAST = csstree.parse(value, { context: 'value' });\n    const valueTree = csstree.find(valueAST, (node) =>\n      isValue(node)\n    ) as csstree.Value | null;\n    // Early exit: return styleAttribute as-is to avoid modifications\n    if (!valueTree || !isValidValue(valueTree)) return styleAttribute;\n\n    const valueItem = generateListItem(valueTree);\n    (lastDeclaration.value as csstree.Value).children.clear();\n    (lastDeclaration.value as csstree.Value).children.append(valueItem);\n\n    const serializedAttribute = csstree.generate(ast);\n    return serializedAttribute;\n  } else {\n    // Create new csstree.Declaration object\n    const serialized = `--vt-polyfill-name: ${value}`;\n    const valueAST = csstree.parse(serialized, {\n      context: 'declaration',\n      parseCustomProperty: true,\n    });\n    const declaration = csstree.find(\n      valueAST,\n      (node) => isDeclaration(node) && node.property === '--vt-polyfill-name'\n    ) as csstree.Declaration | null;\n    // Early exit: return styleAttribute as-is to avoid modifications\n    if (!declaration || !isValidValue(declaration.value as csstree.Value))\n      return styleAttribute;\n\n    // Get declaration as a list item to be appended to style attribute\n    const declarationItem = generateListItem(declaration);\n    ast.children.append(declarationItem);\n  }\n\n  const serializedAttribute = csstree.generate(ast);\n  return serializedAttribute;\n}\n","import type { Callback } from './polyfill-utils';\nimport { ViewTransition } from './polyfill-utils';\nimport ViewTransitionManager from './view-transition-manager';\nimport {\n  getFromStyleAttribute,\n  setStyleAttribute,\n  getSerializedElementSelector,\n} from './style-parsing/style-attribute-parser';\n\nlet activeViewTransition: ViewTransitionManager | undefined;\n\nexport function startViewTransitionPolyfill(\n  callback: Callback | undefined\n): ViewTransition {\n  // The ViewTransitionManager class handles most of the transition work\n  const viewTransitionManager = new ViewTransitionManager();\n  // The ViewTransition class acts as the polyfill for the user-facing object returned by document.startViewTransition\n  const viewTransitionObject = new ViewTransition(viewTransitionManager);\n  activeViewTransition = viewTransitionManager;\n  viewTransitionManager.startViewTransition(viewTransitionObject, callback);\n  viewTransitionObject.finished.then(() => {\n    activeViewTransition = undefined;\n  });\n\n  return viewTransitionObject;\n}\n\nexport function mapStartViewTransition() {\n  Object.defineProperty(Document.prototype, 'startViewTransition', {\n    value: startViewTransitionPolyfill,\n    writable: true,\n  });\n}\n\ndeclare global {\n  interface Document {\n    startViewTransition:\n      | ((callback?: () => void) => ViewTransition)\n      | undefined;\n  }\n}\n\nexport function mapPolyfillViewTransitionAnimate() {\n  // Decorate the animate function of <html>\n  // The new function must account for changing view transition pseudo elements to polyfill elements\n\n  const animateFunction = HTMLHtmlElement.prototype.animate;\n\n  Object.defineProperty(HTMLHtmlElement.prototype, 'animate', {\n    value: (\n      keyframes: Keyframe[] | PropertyIndexedKeyframes | null,\n      options?: number | KeyframeAnimationOptions\n    ): Animation => {\n      const callAnimation = () =>\n        animateFunction.call(document.documentElement, keyframes, options);\n\n      if (!options || typeof options === 'number') return callAnimation();\n      const pseudoElement = options.pseudoElement;\n      const hasViewTransitionPseudoElement =\n        pseudoElement && pseudoElement.startsWith('::view-transition');\n      if (!hasViewTransitionPseudoElement) {\n        return callAnimation();\n      }\n      // Intercept normal animate function if it refers to view transition pseudo elements\n      // The polyfill needs to forward the animation to the custom elements in the DOM\n\n      // Turn the pseudo element name into a valid polyfill element name\n      const elementName = getSerializedElementSelector(pseudoElement);\n\n      // Remove the pseudoElement option from the animation options now that we are animating a real element\n      const animationOptions = { ...options };\n      delete animationOptions.pseudoElement;\n      const element = document.querySelector(elementName);\n      if (!element) {\n        // Return an empty Animation that won't ever finish,\n        //  following Chrome's behavior\n        const keyframeEffect = new KeyframeEffect(\n          document.documentElement,\n          keyframes,\n          animationOptions\n        );\n        Object.defineProperty(keyframeEffect, 'pseudoElement', {\n          get() {\n            return pseudoElement;\n          },\n        });\n        const animation = new Animation(keyframeEffect, document.timeline);\n        return animation;\n      }\n      const animation = element.animate(keyframes, animationOptions);\n      activeViewTransition?.updateAnimations(animation);\n      return animation;\n    },\n    configurable: true,\n    writable: true,\n  });\n}\n\nexport function mapToGetAnimations() {\n  // Patch document.getAnimations() such that\n  // The animations on polyfill elements are returned as animations of pseudo elements\n  // To account for functions looking for animations on view transition pseudo elements\n\n  const getAnimations = Document.prototype.getAnimations;\n\n  Object.defineProperty(Document.prototype, 'getAnimations', {\n    value: () => {\n      interface AnimationKeyframe extends Animation {\n        // Extend the Animation interface to tell TypeScript that Animation.effect is a KeyframeEffect\n        //  instead of an AnimationEffect, an abstract interface (never touched in the browser) which does not have a target\n        effect: KeyframeEffect;\n      }\n      const animations = getAnimations.call(document) as AnimationKeyframe[];\n      const viewTransitionElementAnimations = animations.filter((animation) => {\n        {\n          return animation.effect.target?.tagName\n            .toLowerCase()\n            .startsWith('view-transition');\n        }\n      });\n      viewTransitionElementAnimations.forEach((animation) => {\n        const target = animation.effect?.target;\n        Object.defineProperty(animation.effect, 'target', {\n          get(): HTMLElement {\n            // The view transition pseudo elements are attached to <html>\n            return document.documentElement;\n          },\n        });\n        Object.defineProperty(animation.effect, 'pseudoElement', {\n          get(): string {\n            let pseudoElementString = `::${target?.tagName.toLowerCase()}`;\n            if (!(target instanceof ViewTransition)) {\n              // All view transition elements except for the root have a name\n              pseudoElementString = pseudoElementString.concat(\n                `(${target?.getAttribute('name')})`\n              );\n            }\n            return pseudoElementString;\n          },\n        });\n      });\n\n      return animations;\n    },\n    configurable: true,\n    writable: true,\n  });\n}\n\nexport function mapViewTransitionName() {\n  // Monkey patching HTMLElement.prototype.style.viewTransitionName.\n  // To do this, we first monkey patch HTMLElement.prototype.style,\n  //  such that the CSSStyleDeclaration object it returns is intercepted\n  //  in order to add the viewTransitionName getter and setter.\n  // Monkey patching CSSStyleDeclaration directly is not feasible\n  //  because 'this' wouldn't refer to an HTMLElement.\n  const originalStyle = Object.getOwnPropertyDescriptor(\n    HTMLElement.prototype,\n    'style'\n  );\n  Object.defineProperty(HTMLElement.prototype, 'style', {\n    get() {\n      const styleObject: CSSStyleDeclaration = originalStyle?.get?.call(this);\n      /* eslint-disable @typescript-eslint/no-this-alias */\n      const element = this;\n      /* eslint-enable @typescript-eslint/no-this-alias */\n      Object.defineProperty(styleObject, 'viewTransitionName', {\n        get() {\n          const styleAttribute = element.getAttribute('style') || '';\n          return getFromStyleAttribute(styleAttribute);\n        },\n        set(value: string) {\n          const styleAttribute = element.getAttribute('style') || '';\n          const attribute = setStyleAttribute(styleAttribute, value);\n          element.setAttribute('style', attribute);\n          return value;\n        },\n        configurable: true,\n      });\n      return styleObject;\n    },\n    configurable: true,\n  });\n}\n","import {\n  mapViewTransitionName,\n  mapStartViewTransition,\n  mapPolyfillViewTransitionAnimate,\n  mapToGetAnimations,\n} from './polyfill-functions';\n\nif (!document.startViewTransition) {\n  mapStartViewTransition();\n  mapPolyfillViewTransitionAnimate();\n  mapToGetAnimations();\n  mapViewTransitionName();\n}\n"],"names":["MediaClone","ctx","element","live","EOF","Ident","Function","AtKeyword","Hash","String","BadString","Url","BadUrl","Delim","Number","Percentage","Dimension","WhiteSpace","CDO","CDC","Colon","Semicolon","Comma","LeftSquareBracket","RightSquareBracket","LeftParenthesis","RightParenthesis","LeftCurlyBracket","RightCurlyBracket","Comment","isDigit","code","isHexDigit","isUppercaseLetter","isLowercaseLetter","isLetter","isNonAscii","isNameStart","isName","isNonPrintable","isNewline","isWhiteSpace","isValidEscape","first","second","isIdentifierStart","third","isNumberStart","isBOM","CATEGORY","EofCategory","WhiteSpaceCategory","DigitCategory","NameStartCategory","NonPrintableCategory","i","charCodeCategory","getCharCode","source","offset","getNewlineLength","cmpChar","testStr","referenceCode","cmpStr","start","end","referenceStr","testCode","findWhiteSpaceStart","findWhiteSpaceEnd","findDecimalNumberEnd","consumeEscaped","maxOffset","consumeName","consumeNumber","sign","consumeBadUrlRemnants","decodeEscaped","escaped","tokenNames","MIN_SIZE","adoptBuffer","buffer","size","N","F","R","computeLinesAndColumns","host","sourceLength","startOffset","lines","columns","line","column","OffsetToLocation","startLine","startColumn","filename","OFFSET_MASK","TYPE_SHIFT","balancePair","FunctionToken","TokenStream","tokenize","offsetAndType","balance","tokenCount","balanceCloseType","balanceStart","firstCharOffset","type","balancePrev","idx","tokenType","tokenIndex","pos","next","startToken","stopConsume","cursor","balanceEnd","loop","fn","item","tokens","index","onToken","consumeNumericToken","TYPE.Dimension","TYPE.Percentage","TYPE.Number","consumeIdentLikeToken","nameStartOffset","TYPE.Function","consumeUrlToken","TYPE.Ident","consumeStringToken","endingCodePoint","TYPE.String","TYPE.BadString","nextCode","TYPE.Url","TYPE.BadUrl","TYPE.WhiteSpace","TYPE.Hash","TYPE.Delim","TYPE.LeftParenthesis","TYPE.RightParenthesis","TYPE.Comma","TYPE.CDC","TYPE.Comment","TYPE.Colon","TYPE.Semicolon","TYPE.CDO","TYPE.AtKeyword","TYPE.LeftSquareBracket","TYPE.RightSquareBracket","TYPE.LeftCurlyBracket","TYPE.RightCurlyBracket","releasedCursors","List","data","prev","prevOld","prevNew","nextOld","nextNew","array","thisArg","initialValue","acc","result","before","list","oldItem","newItemOrList","createCustomError","name","message","error","errorStack","MAX_LINE_LENGTH","OFFSET_CORRECTION","TAB_REPLACEMENT","sourceFragment","baseLine","baseColumn","extraLines","processLines","maxNumLength","prelines","precolumns","endLine","cutLeft","SyntaxError","readSequence","recognizer","children","space","context","child","NOOP","EXCLAMATIONMARK","NUMBERSIGN","SEMICOLON","LEFTCURLYBRACKET","NULL","createParseContext","fetchParseValues","dict","processConfig","config","parseConfig","createParser","needPositions","onParseError","onParseErrorThrow","locationMap","parser","node","consumer","fallback","startIndex","e","fallbackNode","offsetStart","offsetEnd","charCode","str","number","tokenName","m","NumberToken","head","tail","location","source_","options","onComment","loc","value","ast","intToCharMap","base64","bigA","bigZ","littleA","littleZ","zero","nine","plus","slash","littleOffset","numberOffset","require$$0","VLQ_BASE_SHIFT","VLQ_BASE","VLQ_BASE_MASK","VLQ_CONTINUATION_BIT","toVLQSigned","aValue","fromVLQSigned","isNegative","shifted","base64Vlq","encoded","digit","vlq","aStr","aIndex","aOutParam","strLen","shift","continuation","getArg","aArgs","aName","aDefaultValue","exports","urlRegexp","dataUrlRegexp","urlParse","aUrl","match","urlGenerate","aParsedUrl","url","MAX_CACHED_INPUTS","lruMemoize","f","cache","input","temp","normalize","aPath","path","isAbsolute","parts","part","up","join","aRoot","aPathUrl","aRootUrl","joined","relative","level","supportsNullProto","obj","identity","s","toSetString","isProtoString","fromSetString","length","compareByOriginalPositions","mappingA","mappingB","onlyCompareOriginal","cmp","strcmp","compareByOriginalPositionsNoSource","compareByGeneratedPositionsDeflated","onlyCompareGenerated","compareByGeneratedPositionsDeflatedNoLine","aStr1","aStr2","compareByGeneratedPositionsInflated","parseSourceMapInput","computeSourceURL","sourceRoot","sourceURL","sourceMapURL","parsed","util","has","hasNativeMap","ArraySet","aArray","aAllowDuplicates","set","len","sStr","isDuplicate","aIdx","arraySet","generatedPositionAfter","lineA","lineB","columnA","columnB","MappingList","aCallback","aThisArg","aMapping","mappingList","base64VLQ","require$$1","require$$2","require$$3","SourceMapGenerator","aSourceMapConsumer","generatorOps","generator","mapping","newMapping","sourceFile","sourceRelative","content","generated","original","aSourceFile","aSourceContent","aSourceMapPath","newSources","newNames","aGenerated","aOriginal","aSource","previousGeneratedColumn","previousGeneratedLine","previousOriginalColumn","previousOriginalLine","previousName","previousSource","nameIdx","sourceIdx","mappings","aSources","aSourceRoot","key","map","SourceMapGenerator_1","trackNodes","generateSourceMap","handlers","activatedGenerated","activatedMapping","sourceMappingActive","origHandlersNode","nodeLine","nodeColumn","origHandlersEmit","auto","origHandlersResult","PLUSSIGN","HYPHENMINUS","specPairs","safePairs","StringToken","createMap","pairs","isWhiteSpaceRequired","prevCode","nextCharCode","spec","safe","REVERSESOLIDUS","processChildren","delimeter","processChunk","chunk","createGenerator","types","publicApi","tokenBefore.safe","tokenBefore","createConvertor","walk","hasOwnProperty","noop","ensureFunction","invokeForType","getWalkersFromStructure","nodeType","structure","walkers","fieldTypes","walker","fieldType","getTypesFromConfig","createTypeIterator","reverse","fields","contextName","useContext","walkReducer","prevContextValue","field","ref","createFastTraveralMap","StyleSheet","Atrule","Rule","Block","DeclarationList","createWalker","iteratorsNatural","iteratorsReverse","breakWalk","skipNode","fastTraversalIteratorsNatural","fastTraversalIteratorsReverse","root","walkNode","enterRet","enter","iterators","leave","ret","found","generateMultiplier","multiplier","min","max","comma","generateTypeOpts","generateSequence","decorate","forceBraces","compact","combinator","term","internalGenerate","generate","defaultLoc","locateMismatch","matchResult","longestMatch","mismatchNode","badNode","mismatchOffset","mismatchLength","entries","css","token","fromLoc","buildLoc","point","extra","SyntaxReferenceError","referenceName","SyntaxMatchError","syntax","keywords","properties","keyword","getKeywordDescriptor","property","getPropertyDescriptor","isCustomProperty","getVendorPrefix","secondDashIndex","descriptor","custom","vendor","hack","prefix","cssWideKeywords","DISALLOW_SIGN","ALLOW_SIGN","isDelim","skipSC","getNextToken","checkInteger","valueOffset","disallowSign","consumeB","offset_","anPlusB","QUESTIONMARK","U","startsWith","hexSequence","allowDash","hexlen","withQuestionMarkSequence","consumed","urange","consumedHexLength","calcFunctionNames","charCodeAt","eqStr","actual","expected","eqStrAny","isPostfixIeHack","outOfRange","opts","numEnd","num","consumeFunction","balanceStash","scan","calc","expectedTokenType","customIdent","dashedIdent","customPropertyName","hexColor","idSelector","declarationValue","anyValue","dimension","numberEnd","reverseSolidusOffset","unit","percentage","integer","tokenTypes","productionTypes","createDemensionTypes","units","angle","decibel","frequency","flex","resolution","semitones","time","createGenericTypes","TAB","SPACE","Tokenizer","AMPERSAND","APOSTROPHE","LEFTPARENTHESIS","RIGHTPARENTHESIS","ASTERISK","COMMA","HYPERMINUS","LESSTHANSIGN","GREATERTHANSIGN","COMMERCIALAT","LEFTSQUAREBRACKET","RIGHTSQUAREBRACKET","VERTICALLINE","RIGHTCURLYBRACKET","INFINITY","NAME_CHAR","_","COMBINATOR_PRECEDENCE","scanSpaces","tokenizer","scanWord","scanNumber","scanString","readMultiplierRange","readMultiplier","range","maybeMultiplied","maybeToken","ch","readProperty","readTypeRange","readType","readKeywordOrFunction","regroupTerms","terms","combinators","createGroup","a","b","subgroupStart","readImplicitGroup","prevToken","prevTokenPos","peek","readGroup","parse","astToTokens","curNode","tmp","stringToTokens","prepareTokens","MATCH","MISMATCH","DISALLOW_EMPTY","createCondition","thenBranch","elseBranch","isFunctionType","isEnumCapatible","buildGroupMatchGraph","atLeastOneTermMatched","thenClause","newGroupTerm","buildMultiplierMatchGraph","matchTerm","buildMatchGraphInternal","buildMatchGraph","syntaxTree","STUB","TOKEN","OPEN_SYNTAX","CLOSE_SYNTAX","EXIT_REASON_MATCH","EXIT_REASON_MISMATCH","EXIT_REASON_ITERATION_LIMIT","ITERATION_LIMIT","reverseList","areStringsEqualCaseInsensitive","isContextEdgeDelim","isCommaContextStart","isCommaContextEnd","internalMatch","state","syntaxes","moveToNextToken","nextIndex","stateSnapshotFromSyntax","nextState","matchStack","syntaxStack","thenStack","pushThenStack","pushElseStack","elseStack","addTokenToMatch","syntaxStash","openSyntax","closeSyntax","iterationCount","exitReason","matchFlag","lastTokenIndex","syntaxDict","dictSyntax","keywordName","string","matchAsTree","matchGraph","hostStack","getTrace","shouldPutToTrace","hasMatch","matchNode","isType","testNode","isProperty","isKeyword","trace","getFirstMatchNode","getLastMatchNode","matchFragments","lexer","findFragments","nodes","fragments","isValidNumber","isValidLocation","createNodeStructureChecker","warn","valid","genTypesList","docsTypes","processStructure","docs","getStructureFromConfig","dumpMapSyntax","syntaxAsAst","dumpAtruleMapSyntax","atrule","valueHasVar","syntaxHasTopLevelCommaMultiplier","singleTerm","buildMatchResult","matched","iterations","matchSyntax","useCssWideKeywords","Lexer","group","collectWarning","warns","parent","descName","atruleName","prelude","descriptorName","names.keyword","propertyName","names.property","typeName","typeSyntax","declaration","fallbackBasename","syntaxRef","validate","broken","brokenMap","brokenTypes","brokenProperties","errors","brokenTypesArray","brokenPropertiesArray","pretty","appendOrSet","sliceProps","props","prop","mix","dest","src","patch","exists","current","descriptorValue","createSyntax","fromPlainObject","toPlainObject","extension","base","createSyntax$1","definitions","checkTokenIsInteger","expectCharCode","msg","consumeRaw","isDeclarationBlockAtrule","walkContext","isDeclaration","nameLowerCase","block","DOLLARSIGN","EQUALSSIGN","CIRCUMFLEXACCENT","TILDE","getAttributeName","expectIdent","getOperator","matcher","flags","consumeRule","consumeRawDeclaration","consumeDeclaration","isStyleBlock","FULLSTOP","SOLIDUS","likelyFeatureToken","featureOrRange","kind","parentheses","res","consumeValueRaw","consumeCustomPropertyRaw","consumeValue","startValueToken","customProperty","parseValue","important","valueStart","getImportant","getFeatureParser","functionName","valueParser","readTerm","readComparison","expectColon","left","leftComparison","middle","rightComparison","right","xxx","modifier","mediaType","condition","ident","identLowerCase","selector","nth","consumeTerm","getOffsetExcludeWS","consumeUntil","excludeWhiteSpace","endOffset","consumePrelude","limit","REVERSE_SOLIDUS","QUOTATION_MARK","decode","firstChar","decoded","escapeStart","escapeEnd","encode","apostrophe","quote","quoteCode","wsBeforeHexIsNeeded","eatIdentifierOrAsterisk","eatHexSequence","eatQuestionMarkSequence","count","scanUnicodeRange","hexLength","url.decode","string.decode","url.encode","lexerConfig","defaultRecognizer","atrulePrelude","getNode","onWhiteSpace","selector$1","expressionFn","varFn","isPlusMinusOperator","nonContainerNameKeywords","container","nested","fontFace","parseWithFallback","parseFunctions","importAtrule","layer","media","nest","page","scope","startingStyle","supports","parseLanguageRangeList","selectorList","identList","langList","pseudo","parserConfig","walkerConfig","createLexer","find","findLast","findAll","fork","isPseudoElementSelector","isRawNode","isIdentifier","isValue","isSelector","isRule","VIEW_TRANSITION_ELEMENTS","ATRULES","getElementSelector","pseudoElementSelector","pseudoElement","csstree.walk","selectorString","csstree.parse","getNameDeclaration","generateListItem","csstree.List","replaceDeclarations","newDeclaration","removeNonPolyfillCSS","nestedRulesHaveName","clearIrrelevantProperties","hasTransitionName","isPseudoElRule","selectorPart","replaceSelectors","newSelector","parseStyleString","styleString","csstree.generate","parseStyles","stylesheets","styleElementsContents","stylesheet","linkedStylesheets","linkedStylesheetsContents","href","responseText","stylesheetContents","parsedStyleStrings","stylesheetString","parsedString","ViewTransitionImagePair","CaptureElement","captureElement","ViewTransitionOld","ViewTransitionNew","_PolyfillInnerElement","PolyfillInnerElement","ViewTransitionImage","polyfillInnerElement","shadow","scrollTop","childMarginCollapsingEl","objectFit","fromWidth","toWidth","fromHeight","toHeight","scaleFunction","scaleFactorX","scaleFactorY","fromAspectRatio","toAspectRatio","objectPosition","oldWidth","newWidth","oldHeight","newHeight","objectPositionX","objectPositionY","oldContainerWidth","oldContainerHeight","newContainerWidth","newContainerHeight","oldLeft","newLeft","positionOffset","oldTop","newTop","animationDuration","CSSeasing","fromTransform","toTransform","style","objectPositionValues","oldObjectPositionTranslate","newObjectPositionTranslate","ViewTransitionGroup","initialValues","image","toggle","values","text","stage","caseConverter","converted","animations","animationDurations","rawDuration","animationName","animationEasings","duration","easing","ImageData","ViewTransitionElement","DuplicateNamesError","elements","_ViewTransitionManager","ViewTransition","viewTransitionObject","callback","_a","parsedStyleString","reason","shouldNormalizeFontSize","afterNextPaint","setElementVisibility","finishedPromises","animation","setDocumentVisibility","viewTransitionName","cloneElementWithStyles","styleTransform","elementPosition","getElementPosition","elementPositionTranslateFunction","standaloneTranslate","CSSTransformPropertyToFunction","standaloneRotate","standaloneScale","standaloneTransforms","UAStyleEl","usedTransitionNames","capturedElements","loopforNamedElements","isRendered","loopOverChildren","isStylableElement","viewTransitionGroup","entry","newAnimation","resolvedPromises","ViewTransitionManager","defer","resolve","reject","promise","rej","viewTransitionElement","isElementUnallowed","el","isVoidElement","isElementOutsideViewport","rect","linkProperties","alwaysCloneProperties","neverCloneProperties","spacerProperties","cloneAsSpacer","clone","fontSizeTester","fontSizeFactor","normalizeFontSizeFactor","div","defaultStyle","cloneElement","mediaClone","CSSProperties","cloneID","htmlStyle","cloningRoot","styleElement","beforePseudoEl","styleEl","afterPseudoEl","scrollLeft","elementChildren","childHasName","childClone","transformProperty","transformString","transformValues","getScrollOffset","addOffset","offsetPosition","top","offsetParent","parentPosition","scrollTopOffset","scrollLeftOffset","position","elementOpacity","getSerializedElementSelector","pseudoAST","csstree.find","selectorAST","isValidValue","valueAST","childrenArray","csstree.toPlainObject","getNameValue","getFromStyleAttribute","styleAttribute","lastDeclaration","csstree.findLast","setStyleAttribute","declarations","csstree.findAll","valueTree","valueItem","serialized","declarationItem","activeViewTransition","startViewTransitionPolyfill","viewTransitionManager","mapStartViewTransition","mapPolyfillViewTransitionAnimate","animateFunction","keyframes","callAnimation","elementName","animationOptions","keyframeEffect","mapToGetAnimations","getAnimations","target","pseudoElementString","mapViewTransitionName","originalStyle","styleObject","attribute"],"mappings":"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","x_google_ignoreList":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121]}